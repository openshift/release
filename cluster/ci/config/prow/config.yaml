plank:
  allow_cancellations: true
  job_url_template: 'https://openshift-gce-devel.appspot.com/build/origin-ci-test/{{if eq .Spec.Type "presubmit"}}pr-logs/pull{{else if eq .Spec.Type "batch"}}pr-logs/pull{{else}}logs{{end}}{{if ne .Spec.Refs.Repo "origin"}}/{{.Spec.Refs.Org}}_{{.Spec.Refs.Repo}}{{end}}{{if eq .Spec.Type "presubmit"}}/{{with index .Spec.Refs.Pulls 0}}{{.Number}}{{end}}{{else if eq .Spec.Type "batch"}}/batch{{end}}/{{.Spec.Job}}/{{.Status.BuildID}}/'
  default_decoration_config:
    timeout: 7200000000000 # 2h
    grace_period: 15000000000 # 15s
    utility_images:
      clonerefs: "clonerefs:latest"
      initupload: "initupload:latest"
      entrypoint: "entrypoint:latest"
      sidecar: "sidecar:latest"
    gcs_configuration:
      bucket: "origin-ci-test"
      path_strategy: "single"
      default_org: "openshift"
      default_repo: "origin"
    gcs_credentials_secret: "gcs-publisher-credentials"

jenkins_operators:
- label_selector: master=ci.openshift.redhat.com
  max_concurrency: 150
  max_goroutines: 20
  allow_cancellations: true
  job_url_template: 'https://openshift-gce-devel.appspot.com/build/origin-ci-test/{{if eq .Spec.Type "presubmit"}}pr-logs/pull{{else if eq .Spec.Type "batch"}}pr-logs/pull{{else}}logs{{end}}{{if ne .Spec.Refs.Repo "origin"}}/{{.Spec.Refs.Org}}_{{.Spec.Refs.Repo}}{{end}}{{if eq .Spec.Type "presubmit"}}/{{with index .Spec.Refs.Pulls 0}}{{.Number}}{{end}}{{else if eq .Spec.Type "batch"}}/batch{{end}}/{{.Spec.Job}}/{{.Status.BuildID}}/'
  report_template: '[Full PR test history](https://openshift-gce-devel.appspot.com/pr/{{if ne .Spec.Refs.Repo "origin"}}{{.Spec.Refs.Org}}_{{.Spec.Refs.Repo}}/{{end}}{{with index .Spec.Refs.Pulls 0}}{{.Number}}{{end}}). [Your PR dashboard](https://openshift-gce-devel.appspot.com/pr/{{with index .Spec.Refs.Pulls 0}}{{.Author}}{{end}}). Please help us cut down on flakes by [linking to](https://github.com/kubernetes/community/blob/master/contributors/devel/flaky-tests.md#filing-issues-for-flaky-tests) an [open issue](https://github.com/{{.Spec.Refs.Org}}/{{.Spec.Refs.Repo}}/issues?q=is:issue+is:open) when you hit one in your PR.'
- label_selector: master=ci.dev.openshift.redhat.com
  max_concurrency: 25
  max_goroutines: 20
  allow_cancellations: true
  job_url_template: 'https://ci.dev.openshift.redhat.com/jenkins/job/{{.Spec.Job}}/{{.Status.JenkinsBuildID}}'
- label_selector: master=jenkins.katacontainers.io
  max_concurrency: 10
  max_goroutines: 20
  allow_cancellations: true
  job_url_template: 'http://jenkins.katacontainers.io/job/{{.Spec.Job}}/{{.Status.JenkinsBuildID}}'
- label_selector: master=jenkins-tectonic.prod.coreos.systems
  max_concurrency: 1
  max_goroutines: 1
  allow_cancellations: true
  job_url_template: 'https://jenkins-tectonic.prod.coreos.systems/job/{{.Spec.Job}}/{{.Status.JenkinsBuildID}}'

sinker:
  resync_period: 1h
  max_prowjob_age: 48h
  max_pod_age: 12h

deck:
  external_agent_logs:
  - agent: jenkins
    selector: master=ci.openshift.redhat.com
    url_template: 'http://jenkins-operator/job/{{.Spec.Job}}/{{.Status.BuildID}}/consoleText'
  branding:
    logo: "extensions/logo.png"
    favicon: "extensions/favicon.ico"
    header_color: "black"
  hidden_repos:
  - openshift/ose
  - openshift/online-registration

tide:
  pr_status_base_url: https://deck-ci.svc.ci.openshift.org/pr
  queries:
  - repos:
    - openshift/image-registry
    - openshift/online-hibernation
    - openshift/online-console-extensions
    - openshift/jenkins
    - openshift/jenkins-plugin
    - openshift/jenkins-sync-plugin
    - openshift/jenkins-client-plugin
    - openshift/jenkins-openshift-login-plugin
    - openshift-s2i/s2i-wildfly
    - openshift/monitor-project-lifecycle
    - openshift/autoheal
    - openshift/cluster-monitoring-operator
    - openshift/openshift-ansible
    - openshift/azure-misc
    labels:
    - lgtm
    - approved
    missingLabels:
    - needs-ok-to-test
    - do-not-merge/work-in-progress
    - do-not-merge/hold
  - repos:
    - openshift/origin
    labels:
    - lgtm
    - approved
    missingLabels:
    - needs-ok-to-test
    - do-not-merge/work-in-progress
    - do-not-merge/hold
  - repos:
    - openshift/online-registration
    labels:
    - lgtm
    - approved
    missingLabels:
    - needs-ok-to-test
    - do-not-merge/work-in-progress
    - do-not-merge/hold
  - repos:
    - openshift/kubernetes-metrics-server
    - openshift/origin-aggregated-logging
    - openshift/origin-web-console
    - openshift/origin-web-console-server
    - openshift/console
    - openshift/cluster-operator
    - openshift/os
    - openshift/cluster-capacity
    - openshift/descheduler
    - openshift/node-problem-detector
    - openshift/kubernetes-autoscaler
    - openshift/openshift-restclient-java
    - openshift/installer
    - openshift/coredns
    labels:
    - lgtm
    missingLabels:
    - needs-ok-to-test
    - do-not-merge/work-in-progress
    - do-not-merge/hold

prowjob_namespace: ci
pod_namespace: ci
log_level: debug

presubmits:
  openshift/origin:
  - name: test_pull_request_origin_verify_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - release-3.10
    context: ci/openshift-jenkins/verify
    rerun_command: "/test verify"
    trigger: "((?m)^/test( all| verify),?(\\s+|$))"

  - name: test_pull_request_origin_verify
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/verify
    rerun_command: "/test verify"
    trigger: "((?m)^/test( all| verify),?(\\s+|$))"

  - name: test_pull_request_origin_cmd
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/cmd
    rerun_command: "/test cmd"
    trigger: "((?m)^/test( all| cmd),?(\\s+|$))"

  - name: pull-ci-origin-unit
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - master
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin
              key: master.json
        - name: OVERRIDE_SPEC
          value: '{"test_base_image": {"cluster": "", "namespace": "ci", "name": "src-cache-origin", "tag": "master"}}'
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
  - name: pull-ci-origin-unit-3.10
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - release-3.10
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit

  - name: test_pull_request_origin_unit
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - cli-pre-rebase
    - release-3.9
    - release-3.8
    - release-3.7
    always_run: true
    context: ci/openshift-jenkins/unit
    rerun_command: "/test unit"
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"

  - name: test_pull_request_origin_integration_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - release-3.10
    context: ci/openshift-jenkins/integration
    rerun_command: "/test integration"
    trigger: "((?m)^/test( all| integration),?(\\s+|$))"

  - name: test_pull_request_origin_integration
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/integration
    rerun_command: "/test integration"
    trigger: "((?m)^/test( all| integration),?(\\s+|$))"

  - name: test_pull_request_origin_end_to_end
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/end_to_end
    rerun_command: "/test end_to_end"
    trigger: "((?m)^/test( all| end_to_end),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_install_36
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - release-3.6
    context: ci/openshift-jenkins/extended_conformance_install
    rerun_command: "/test extended_conformance_install"
    trigger: "((?m)^/test( all| extended_conformance_install),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_install_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - release-3.7
    context: ci/openshift-jenkins/extended_conformance_install
    rerun_command: "/test extended_conformance_install"
    trigger: "((?m)^/test( all| extended_conformance_install),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_install_38
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - release-3.8
    context: ci/openshift-jenkins/extended_conformance_install
    rerun_command: "/test extended_conformance_install"
    trigger: "((?m)^/test( all| extended_conformance_install),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_install_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - release-3.9
    context: ci/openshift-jenkins/extended_conformance_install
    rerun_command: "/test extended_conformance_install"
    trigger: "((?m)^/test( all| extended_conformance_install),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_install_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - release-3.10
    context: ci/openshift-jenkins/extended_conformance_install
    rerun_command: "/test extended_conformance_install"
    trigger: "((?m)^/test( all| extended_conformance_install),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_install
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - cli-pre-rebase
    - master
    - stage
    context: ci/openshift-jenkins/extended_conformance_install
    rerun_command: "/test extended_conformance_install"
    trigger: "((?m)^/test( all| extended_conformance_install),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_install_update
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    skip_report: true
    context: ci/openshift-jenkins/extended_conformance_install_update
    rerun_command: "/test extended_conformance_install_update"
    trigger: "((?m)^/test( extended_conformance_install_update),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_gce_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - release-3.7
    context: ci/openshift-jenkins/gcp
    rerun_command: "/test gcp"
    trigger: "((?m)^/test( all| gcp),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_gce_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - release-3.9
    context: ci/openshift-jenkins/gcp
    rerun_command: "/test gcp"
    trigger: "((?m)^/test( all| gcp),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_gce_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - release-3.10
    context: ci/openshift-jenkins/gcp
    rerun_command: "/test gcp"
    trigger: "((?m)^/test( all| gcp),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_gce
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - cli-pre-rebase
    - master
    context: ci/openshift-jenkins/gcp
    rerun_command: "/test gcp"
    trigger: "((?m)^/test( all| gcp),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_k8s_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
    always_run: false
    context: ci/openshift-jenkins/extended_conformance_k8s
    rerun_command: "/test conformance_k8s"
    trigger: "((?m)^/test conformance_k8s,?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_k8s
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/extended_conformance_k8s
    rerun_command: "/test conformance_k8s"
    trigger: "((?m)^/test conformance_k8s,?(\\s+|$))"

  - name: test_pull_request_origin_extended_networking_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    branches:
    - release-3.10
    context: ci/openshift-jenkins/extended_networking
    rerun_command: "/test extended_networking"
    trigger: "((?m)^/test extended_networking,?(\\s+|$))"

  - name: test_pull_request_origin_extended_networking
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/extended_networking
    rerun_command: "/test extended_networking"
    trigger: "((?m)^/test extended_networking,?(\\s+|$))"

  - name: test_pull_request_origin_extended_builds
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    run_if_changed: '^(pkg/oc/cli/cmd/startbuild.go)|^(pkg/build)|^(pkg/cmd/infra/builder)|^(test/extended/builds)|^(test/extended/testdata/builds)|^(vendor/github.com/openshift/source-to-image)|^(vendor/github.com/openshift/imagebuilder)'
    context: ci/openshift-jenkins/extended_builds
    rerun_command: "/test extended_builds"
    trigger: "((?m)^/test extended_builds,?(\\s+|$))"

  - name: test_pull_request_origin_extended_builds_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
    run_if_changed: '^(pkg/oc/cli/cmd/startbuild.go)|^(pkg/build)|^(pkg/cmd/infra/builder)|^(test/extended/builds)|^(test/extended/testdata/builds)|^(vendor/github.com/openshift/source-to-image)|^(vendor/github.com/openshift/imagebuilder)'
    context: ci/openshift-jenkins/extended_builds
    rerun_command: "/test extended_builds"
    trigger: "((?m)^/test extended_builds,?(\\s+|$))"

  - name: test_pull_request_origin_extended_clusterup
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/extended_clusterup
    rerun_command: "/test extended_clusterup"
    trigger: "((?m)^/test extended_clusterup,?(\\s+|$))"

  - name: test_pull_request_origin_extended_clusterup_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - release-3.10
    context: ci/openshift-jenkins/extended_clusterup
    rerun_command: "/test extended_clusterup"
    trigger: "((?m)^/test extended_clusterup,?(\\s+|$))"

  - name: test_pull_request_origin_extended_gssapi_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    branches:
    - release-3.10
    context: ci/openshift-jenkins/extended_gssapi
    rerun_command: "/test extended_gssapi"
    trigger: "((?m)^/test extended_gssapi,?(\\s+|$))"

  - name: test_pull_request_origin_extended_gssapi
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/extended_gssapi
    rerun_command: "/test extended_gssapi"
    trigger: "((?m)^/test extended_gssapi,?(\\s+|$))"

  - name: test_pull_request_origin_extended_image_ecosystem_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
    run_if_changed: '^(test/extended/image_ecosystem)|^(examples/db-templates)|^(examples/quickstarts)|^(examples/image-streams)|^(examples/jenkins)|^(vendor/github.com/openshift/source-to-image)|^(vendor/github.com/openshift/imagebuilder)'
    context: ci/openshift-jenkins/extended_image_ecosystem
    rerun_command: "/test extended_image_ecosystem"
    trigger: "((?m)^/test extended_image_ecosystem,?(\\s+|$))"

  - name: test_pull_request_origin_extended_image_ecosystem
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    run_if_changed: '^(test/extended/image_ecosystem)|^(examples/db-templates)|^(examples/quickstarts)|^(examples/image-streams)|^(examples/jenkins)|^(vendor/github.com/openshift/source-to-image)|^(vendor/github.com/openshift/imagebuilder)'
    context: ci/openshift-jenkins/extended_image_ecosystem
    rerun_command: "/test extended_image_ecosystem"
    trigger: "((?m)^/test extended_image_ecosystem,?(\\s+|$))"

  - name: test_pull_request_origin_extended_image_registry_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    branches:
    - release-3.10
    run_if_changed: '^(pkg/image)|^(test/extended/registry)|^(test/extended/images)|^(test/extended/imageapis)|^(vendor/github.com/docker/distribution)'
    context: ci/openshift-jenkins/extended_image_registry
    rerun_command: "/test extended_image_registry"
    trigger: "((?m)^/test extended_image_registry,?(\\s+|$))"

  - name: test_pull_request_origin_extended_image_registry
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    run_if_changed: '^(pkg/image)|^(test/extended/registry)|^(test/extended/images)|^(test/extended/imageapis)|^(vendor/github.com/docker/distribution)'
    context: ci/openshift-jenkins/extended_image_registry
    rerun_command: "/test extended_image_registry"
    trigger: "((?m)^/test extended_image_registry,?(\\s+|$))"

  - name: test_pull_request_origin_extended_ldap_groups_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    branches:
    - release-3.10
    context: ci/openshift-jenkins/extended_ldap_groups
    rerun_command: "/test extended_ldap_groups"
    trigger: "((?m)^/test extended_ldap_groups,?(\\s+|$))"

  - name: test_pull_request_origin_extended_ldap_groups
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/extended_ldap_groups
    rerun_command: "/test extended_ldap_groups"
    trigger: "((?m)^/test extended_ldap_groups,?(\\s+|$))"

  - name: test_pull_request_origin_cross
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    run_if_changed: '^(hack/)|(Makefile)|(.*_(windows|linux|darwin|unsupported)(_test)?\.go)$'
    context: ci/openshift-jenkins/cross
    rerun_command: "/test cross"
    trigger: "((?m)^/test cross,?(\\s+|$))"

  - name: test_pull_request_origin_launch_gce
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/launch-gcp
    rerun_command: "/test launch-gcp"
    trigger: "((?m)^/test launch-gcp,?(\\s+|$))"

  - name: test_pull_request_origin_launch_gce_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    branches:
    - release-3.10
    context: ci/openshift-jenkins/launch-gcp
    rerun_command: "/test launch-gcp"
    trigger: "((?m)^/test launch-gcp,?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_crio_rpm
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    skip_report: true
    context: ci/openshift-jenkins/extended_conformance_crio_rpm
    rerun_command: "/test crio"
    trigger: "((?m)^/test crio,?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_crio_rpm_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
    always_run: true
    skip_report: true
    context: ci/openshift-jenkins/extended_conformance_crio_rpm
    rerun_command: "/test crio"
    trigger: "((?m)^/test crio,?(\\s+|$))"

  - name: test_pull_request_origin_service_catalog_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    branches:
    - release-3.9
    run_if_changed: '^(pkg/cmd/server/bootstrappolicy)|^(pkg/oc/bootstrap/docker/openshift)|^(cmd/service-catalog)|^(examples/service-catalog)'
    context: ci/openshift-jenkins/service-catalog
    rerun_command: "/test service-catalog"
    trigger: "((?m)^/test service-catalog,?(\\s+|$))"

  - name: test_pull_request_origin_service_catalog_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    branches:
    - release-3.10
    run_if_changed: '^(pkg/cmd/server/bootstrappolicy)|^(pkg/oc/bootstrap/docker/openshift)|^(cmd/service-catalog)|^(examples/service-catalog)'
    context: ci/openshift-jenkins/service-catalog
    rerun_command: "/test service-catalog"
    trigger: "((?m)^/test service-catalog,?(\\s+|$))"

  - name: test_pull_request_origin_service_catalog
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    branches:
    - cli-pre-rebase
    - master
    run_if_changed: '^(pkg/cmd/server/bootstrappolicy)|^(pkg/oc/bootstrap/docker/openshift)|^(examples/service-catalog)|^(pkg/oc/bootstrap/clusteradd/components/service-catalog)'
    context: ci/openshift-jenkins/service-catalog
    rerun_command: "/test service-catalog"
    trigger: "((?m)^/test service-catalog,?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_azure_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    # TODO: Remove once the job is stable
    skip_report: true
    branches:
    - release-3.10
    context: ci/openshift-jenkins/azure
    rerun_command: "/test azure"
    trigger: "((?m)^/test( all| azure),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_azure_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    # TODO: Remove once the job is stable
    skip_report: true
    branches:
    - release-3.9
    context: ci/openshift-jenkins/azure
    rerun_command: "/test azure"
    trigger: "((?m)^/test( all| azure),?(\\s+|$))"

  - name: test_pull_request_origin_extended_conformance_azure
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    # TODO: Remove once the job is stable
    skip_report: true
    branches:
    - master
    context: ci/openshift-jenkins/azure
    rerun_command: "/test azure"
    trigger: "((?m)^/test( all| azure),?(\\s+|$))"

  openshift/kubernetes-autoscaler:
  - name: pull-ci-kubernetes-autoscaler-unit
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - master
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-autoscaler
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
        - --target=[images]
  - name: pull-ci-kubernetes-autoscaler-unit-3.10
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - release-3.10
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-autoscaler
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
        - --target=[images]

  openshift/cluster-capacity:
  - name: pull-ci-kubernetes-cluster-capacity-unit
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - master
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-cluster-capacity
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
        - --target=[images]
  - name: pull-ci-kubernetes-cluster-capacity-unit-3.10
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - release-3.10
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-cluster-capacity
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
        - --target=[images]

  openshift/coredns:
  - name: pull-ci-kubernetes-coredns-unit
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - master
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-coredns
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
        - --target=[images]

  openshift/os:
  - name: pull-ci-os-container-check
    agent: kubernetes
    context: pull-ci-os-container-check
    branches:
    - master
    rerun_command: "/test check"
    always_run: true
    trigger: "((?m)^/test( all| check),?(\\s+|$))"
    decorate: true
    spec:
      volumes:
      - name: docker-socket
        hostPath:
          path: /var/run/docker.sock
      serviceAccountName: privileged-builder
      containers:
      - name: build
        image: registry.svc.ci.openshift.org/ci/origin-release:golang-1.9
        volumeMounts:
        - name: docker-socket
          mountPath: /var/run/docker.sock
        securityContext:
          # TODO: the team has promised me they will be able to remove this soon
          privileged: true
          runAsUser: 0
        command:
        - ./.prow.sh

  - name: pull-ci-os-container-build
    agent: kubernetes
    context: pull-ci-os-container-build
    branches:
    - master
    rerun_command: "/test build"
    always_run: true
    trigger: "((?m)^/test( all| build),?(\\s+|$))"
    decorate: true
    spec:
      volumes:
      - name: docker-socket
        hostPath:
          path: /var/run/docker.sock
      - name: docker-binary
        hostPath:
          path: /usr/bin/docker
      serviceAccountName: privileged-builder
      containers:
      - name: build
        image: registry.svc.ci.openshift.org/ci/origin-release:golang-1.9
        volumeMounts:
        - name: docker-socket
          mountPath: /var/run/docker.sock
        - name: docker-binary
          mountPath: /usr/bin/docker
        securityContext:
          # TODO: the team has promised me they will be able to remove this soon
          privileged: true
          runAsUser: 0
        command:
        - /bin/bash
        - -c
        - |
          #!/bin/bash
          set -euo pipefail
          cat {atomic-centos-continuous,rhcos-continuous,ignition}.repo >/tmp/preserve
          rm *.repo
          mv /tmp/preserve openshift.repo
          curl http://rpm-mirror.ci.svc >> openshift.repo 2>/dev/null
          echo "true" > generate-openshift-repo
          imagebuilder -privileged .

  openshift/ci-operator:
  - name: pull-ci-operator-unit
    agent: kubernetes
    context: pull-ci-operator-unit
    branches:
    - master
    rerun_command: "/test pull-ci-operator-unit"
    trigger: "/test pull-ci-operator-unit"
    decorate: true
    spec:
      containers:
      - name: test
        command:
        - /usr/local/go/bin/go
        args:
        - test
        - ./...
        image: docker.io/golang:latest

  openshift/ose:
  - name: test_pull_request_ose_check_and_verify_tasks
    agent: jenkins
    labels:
      master: ci.dev.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/check
    rerun_command: "/test check"
    trigger: "((?m)^/test( all| check),?(\\s+|$))"

  - name: test_pull_request_ose_conformance
    agent: jenkins
    labels:
      master: ci.dev.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/conformance
    rerun_command: "/test conformance"
    trigger: "((?m)^/test( all| conformance),?(\\s+|$))"

  - name: test_pull_request_ose_integration_and_end_to_end
    agent: jenkins
    labels:
      master: ci.dev.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/integration
    rerun_command: "/test integration"
    trigger: "((?m)^/test( all| integration),?(\\s+|$))"

  - name: test_pull_request_ose_networking
    agent: jenkins
    labels:
      master: ci.dev.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/networking
    rerun_command: "/test networking"
    trigger: "((?m)^/test( all| networking),?(\\s+|$))"

  openshift/openshift-ansible:
  - name: test_pull_request_openshift_ansible_tox
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/tox
    rerun_command: "/test tox"
    trigger: "((?m)^/test( all| tox),?(\\s+|$))"
    branches:
    - master

  - name: test_pull_request_openshift_ansible_tox_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/tox
    rerun_command: "/test tox"
    trigger: "((?m)^/test( all| tox),?(\\s+|$))"
    branches:
    - release-3.10
    - release-3.9
    - release-3.7

  - name: test_pull_request_openshift_ansible_logging
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    skip_report: false
    branches:
      - master
      - stage
      - es5.x
    context: ci/openshift-jenkins/logging
    run_if_changed: "^roles/openshift_logging.*|playbooks/openshift-logging/.*"
    rerun_command: "/test logging"
    trigger: "((?m)^/test( all| logging),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_logging_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    skip_report: false
    branches:
      - release-3.10
    context: ci/openshift-jenkins/logging
    rerun_command: "/test logging"
    run_if_changed: "^roles/openshift_logging.*|playbooks/openshift-logging/.*"
    trigger: "((?m)^/test( all| logging),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_logging_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    skip_report: false
    branches:
      - release-3.9
    context: ci/openshift-jenkins/logging
    rerun_command: "/test logging"
    run_if_changed: "^roles/openshift_logging.*|playbooks/openshift-logging/.*"
    trigger: "((?m)^/test( all| logging),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_logging_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
      - release-3.7
    context: ci/openshift-jenkins/logging
    rerun_command: "/test logging"
    run_if_changed: "^roles/openshift_logging.*|playbooks/.+/openshift-cluster/openshift.logging.*"
    trigger: "((?m)^/test( all| logging),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_logging_36
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
      - release-3.6
    context: ci/openshift-jenkins/logging
    rerun_command: "/test logging"
    run_if_changed: "^roles/openshift_logging.*|playbooks/.+/openshift-cluster/openshift.logging.*"
    trigger: "((?m)^/test( all| logging),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_extended_conformance_gce_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/gcp
    rerun_command: "/test gcp"
    trigger: "((?m)^/test( all| gcp),?(\\s+|$))"
    branches:
    - release-3.7

  - name: test_pull_request_openshift_ansible_extended_conformance_gce_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/gcp
    rerun_command: "/test gcp"
    trigger: "((?m)^/test( all| gcp),?(\\s+|$))"
    branches:
    - release-3.9

  - name: test_pull_request_openshift_ansible_extended_conformance_gce_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/gcp
    rerun_command: "/test gcp"
    trigger: "((?m)^/test( all| gcp),?(\\s+|$))"
    branches:
    - release-3.10

  - name: test_pull_request_openshift_ansible_extended_conformance_gce
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/gcp
    rerun_command: "/test gcp"
    trigger: "((?m)^/test( all| gcp),?(\\s+|$))"
    branches:
    - master

  - name: test_pull_request_openshift_ansible_extended_conformance_gce_ha
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/gcp-ha
    rerun_command: "/test gcp-ha"
    trigger: "((?m)^/test gcp-ha,?(\\s+|$))"
    branches:
    - master

  - name: test_pull_request_openshift_ansible_extended_conformance_gce_ha_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/gcp-ha
    rerun_command: "/test gcp-ha"
    trigger: "((?m)^/test gcp-ha,?(\\s+|$))"
    branches:
    - release-3.10

  - name: test_pull_request_openshift_ansible_install_upgrade_gce_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/gcp-upgrade
    rerun_command: "/test gcp-upgrade"
    trigger: "((?m)^/test( all| gcp-upgrade),?(\\s+|$))"
    branches:
    - release-3.10

  - name: test_pull_request_openshift_ansible_extended_conformance_install
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - master
    context: ci/openshift-jenkins/install
    rerun_command: "/test install"
    trigger: "((?m)^/test( all| install),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_extended_conformance_install_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - release-3.10
    context: ci/openshift-jenkins/install
    rerun_command: "/test install"
    trigger: "((?m)^/test( all| install),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_extended_conformance_install_release_36
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - release-3.6
    context: ci/openshift-jenkins/install
    rerun_command: "/test install"
    trigger: "((?m)^/test( all| install),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_extended_conformance_install_release_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - release-3.7
    context: ci/openshift-jenkins/install
    rerun_command: "/test install"
    trigger: "((?m)^/test( all| install),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_extended_conformance_install_release_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - release-3.9
    context: ci/openshift-jenkins/install
    rerun_command: "/test install"
    trigger: "((?m)^/test( all| install),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_extended_conformance_install_update
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    skip_report: true
    context: ci/openshift-jenkins/upgrade
    rerun_command: "/test upgrade"
    trigger: "((?m)^/test( upgrade),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_extended_conformance_install_containerized
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    skip_report: true
    branches:
    - release-3.7
    - release-3.8
    - release-3.9
    context: ci/openshift-jenkins/containerized
    rerun_command: "/test containerized"
    trigger: "((?m)^/test( all| containerized),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_extended_conformance_install_crio_rpm
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    skip_report: true
    context: ci/openshift-jenkins/extended_conformance_install_crio_rpm
    rerun_command: "/test crio"
    trigger: "((?m)^/test( all| crio),?(\\s+|$))"
    branches:
    - master

  - name: test_pull_request_openshift_ansible_extended_conformance_install_crio_rpm_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    skip_report: true
    context: ci/openshift-jenkins/extended_conformance_install_crio_rpm
    rerun_command: "/test crio"
    trigger: "((?m)^/test( all| crio),?(\\s+|$))"
    branches:
    - release-3.10

  - name: test_pull_request_openshift_ansible_extended_conformance_install_update_containerized
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    branches:
    - release-3.7
    - release-3.8
    - release-3.9
    skip_report: true
    context: ci/openshift-jenkins/containerized_upgrade
    rerun_command: "/test containerized-upgrade"
    trigger: "((?m)^/test( containerized-upgrade),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_extended_conformance_install_in_tree
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    skip_report: true
    context: ci/openshift-jenkins/install_in_tree
    rerun_command: "/test install-in-tree"
    trigger: "((?m)^/test install-in-tree,?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_extended_conformance_install_system_containers_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    skip_report: true
    branches:
    - release-3.9
    context: ci/openshift-jenkins/system-containers
    rerun_command: "/test system-containers"
    trigger: "((?m)^/test( all| system-containers),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_extended_conformance_install_system_containers_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    skip_report: true
    branches:
    - release-3.7
    context: ci/openshift-jenkins/system-containers
    rerun_command: "/test system-containers"
    trigger: "((?m)^/test( all| system-containers),?(\\s+|$))"

  - name: test_pull_request_openshift_ansible_launch_gce
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/launch-gcp
    rerun_command: "/test launch-gcp"
    trigger: "((?m)^/test launch-gcp,?(\\s+|$))"
    branches:
    - master

  - name: test_pull_request_openshift_ansible_launch_gce_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/launch-gcp
    rerun_command: "/test launch-gcp"
    trigger: "((?m)^/test launch-gcp,?(\\s+|$))"
    branches:
    - release-3.10

  openvswitch/ovn-kubernetes:
  - name: test_pull_request_ovn_kubernetes_rhel
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/integration_rhel
    rerun_command: "/test integration"
    trigger: "((?m)^/test( all| integration),?(\\s+|$))"

  kubernetes-incubator/cri-o:
  - name: test_pull_request_crio_integration_rhel
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/integration_rhel
    rerun_command: "/test integration_rhel"
    trigger: "((?m)^/test( all| rhel| integration| integration_rhel),?(\\s+|$))"

  - name: test_pull_request_crio_integration_fedora
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/integration_fedora
    rerun_command: "/test integration_fedora"
    trigger: "((?m)^/test( all| fedora| integration| integration_fedora),?(\\s+|$))"

  - name: test_pull_request_crio_e2e_rhel
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/e2e_rhel
    rerun_command: "/test e2e_rhel"
    trigger: "((?m)^/test( all| rhel| e2e| e2e_rhel),?(\\s+|$))"

  - name: test_pull_request_crio_e2e_fedora
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/e2e_fedora
    rerun_command: "/test e2e_fedora"
    trigger: "((?m)^/test( all| fedora| e2e| e2e_fedora),?(\\s+|$))"

  - name: test_pull_request_crio_critest_rhel
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/critest_rhel
    rerun_command: "/test critest_rhel"
    trigger: "((?m)^/test( all| rhel| critest| critest_rhel),?(\\s+|$))"

  - name: test_pull_request_crio_critest_fedora
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/critest_fedora
    rerun_command: "/test critest_fedora"
    trigger: "((?m)^/test( all| fedora| critest| critest_fedora),?(\\s+|$))"

  - name: test_pull_request_crio_ami_rhel
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/ami_rhel
    rerun_command: "/test ami_rhel"
    trigger: "((?m)^/test( ami| ami_rhel),?(\\s+|$))"

  - name: test_pull_request_crio_ami_fedora
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/ami_fedora
    rerun_command: "/test ami_fedora"
    trigger: "((?m)^/test( ami| ami_fedora),?(\\s+|$))"

  - name: kata-containers-crio-PR
    agent: jenkins
    labels:
      master: jenkins.katacontainers.io
    always_run: false
    context: ci/kata-jenkins
    rerun_command: "/test kata-containers"
    trigger: "((?m)^/test( all| kata-containers),?(\\s+|$))"

  openshift/origin-aggregated-logging:
  - name: test_pull_request_origin_aggregated_logging_journald
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - master
      - stage
      - es5.x
    context: ci/openshift-jenkins/logging
    rerun_command: "/test logging"
    trigger: "((?m)^/test( all| logging),?(\\s+|$))"

  - name: test_pull_request_origin_aggregated_logging_journald_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - release-3.9
    context: ci/openshift-jenkins/logging
    rerun_command: "/test logging"
    trigger: "((?m)^/test( all| logging),?(\\s+|$))"

  - name: test_pull_request_origin_aggregated_logging_journald_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - release-3.7
    context: ci/openshift-jenkins/logging
    rerun_command: "/test logging"
    trigger: "((?m)^/test( all| logging),?(\\s+|$))"

  - name: test_pull_request_origin_aggregated_logging_journald_36
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - release-3.6
    context: ci/openshift-jenkins/logging
    rerun_command: "/test logging"
    trigger: "((?m)^/test( all| logging),?(\\s+|$))"

  - name: test_pull_request_origin_aggregated_logging_json_file
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - master
      - stage
      - es5.x
    context: ci/openshift-jenkins/json-file
    rerun_command: "/test json-file"
    trigger: "((?m)^/test( all| json-file),?(\\s+|$))"

  - name: test_pull_request_origin_aggregated_logging_json_file_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - release-3.9
    context: ci/openshift-jenkins/json-file
    rerun_command: "/test json-file"
    trigger: "((?m)^/test( all| json-file),?(\\s+|$))"

  - name: test_pull_request_origin_aggregated_logging_json_file_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - release-3.7
    context: ci/openshift-jenkins/json-file
    rerun_command: "/test json-file"
    trigger: "((?m)^/test( all| json-file),?(\\s+|$))"

  - name: test_pull_request_origin_aggregated_logging_json_file_36
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
      - release-3.6
    context: ci/openshift-jenkins/json-file
    rerun_command: "/test json-file"
    trigger: "((?m)^/test( all| json-file),?(\\s+|$))"

  openshift/origin-web-console:
  - name: test_pull_request_origin_web_console_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    branches:
    - release-3.10
    context: ci/openshift-jenkins
    rerun_command: "/test"
    trigger: "((?m)^/test,?(\\s+|$))"

  - name: test_pull_request_origin_web_console
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins
    rerun_command: "/test"
    trigger: "((?m)^/test,?(\\s+|$))"

  openshift/console:
  - name: pull-ci-console-backend
    agent: kubernetes
    context: ci/prow/backend
    rerun_command: "/test backend"
    always_run: true
    trigger: "((?m)^/test( all| backend),?(\\s+|$))"
    decorate: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-console
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=backend
  - name: pull-ci-console-frontend
    agent: kubernetes
    context: ci/prow/frontend
    rerun_command: "/test frontend"
    always_run: true
    trigger: "((?m)^/test( all| frontend),?(\\s+|$))"
    decorate: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-console
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=frontend
  - name: pull-ci-console-crud
    agent: kubernetes
    context: ci/prow/crud
    rerun_command: "/test crud"
    always_run: true
    trigger: "((?m)^/test( all| crud),?(\\s+|$))"
    decorate: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-console
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=crud
  - name: pull-ci-console-alm
    agent: kubernetes
    context: ci/prow/alm
    rerun_command: "/test alm"
    always_run: true
    trigger: "((?m)^/test( all| alm),?(\\s+|$))"
    decorate: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-console
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=alm
  - name: pull-ci-console-performance
    agent: kubernetes
    context: ci/prow/performance
    rerun_command: "/test performance"
    always_run: true
    trigger: "((?m)^/test( all| performance),?(\\s+|$))"
    decorate: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-console
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=performance

  openshift/origin-web-console-server:
  - name: pull-ci-origin-web-console-server-unit
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - master
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin-web-console-server
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
  - name: pull-ci-origin-web-console-server-unit-3.10
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - release-3.10
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin-web-console-server
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
  - name: pull-ci-origin-web-console-server-e2e
    agent: kubernetes
    context: ci/prow/e2e
    branches:
    - master
    rerun_command: "/test e2e"
    always_run: true
    trigger: "((?m)^/test( all| e2e),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      volumes:
      - name: job-definition
        configMap:
          name: prow-job-cluster-launch-e2e
      - name: cluster-profile
        projected:
          sources:
          - secret:
              name: cluster-secrets-gcp
          - configMap:
              name: cluster-profile-gcp
      containers:
      - name: test
        image: ci-operator:latest
        volumeMounts:
        - name: job-definition
          mountPath: /usr/local/e2e-gcp
          subPath: cluster-launch-e2e.yaml
        - name: cluster-profile
          mountPath: /usr/local/e2e-gcp-cluster-profile
        env:
        - name: TEST_FOCUS
          value: Suite:openshift/conformance/parallel
        - name: JOB_NAME_SAFE
          value: e2e-gcp
        - name: CLUSTER_TYPE
          value: gcp
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin-web-console-server
              key: master.json
        - name: RPM_REPO_BASEURL_REF
          value: https://storage.googleapis.com/origin-ci-test/releases/openshift/origin/master/.latest-rpms
        command:
        - /bin/bash
        - -c
        - |
          #!/bin/bash
          set -e
          export RPM_REPO="$( curl -q "${RPM_REPO_BASEURL_REF}" 2>/dev/null)"
          ci-operator \
            --delete-when-idle=10m --dry-run=false \
            --artifact-dir=$(ARTIFACTS) \
            --secret-dir=/usr/local/e2e-gcp-cluster-profile --template=/usr/local/e2e-gcp \
            --target=e2e-gcp
  - name: pull-ci-origin-web-console-server-e2e-3.10
    agent: kubernetes
    context: ci/prow/e2e
    branches:
    - release-3.10
    rerun_command: "/test e2e"
    always_run: true
    trigger: "((?m)^/test( all| e2e),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      volumes:
      - name: job-definition
        configMap:
          name: prow-job-cluster-launch-e2e
      - name: cluster-profile
        projected:
          sources:
          - secret:
              name: cluster-secrets-gcp
          - configMap:
              name: cluster-profile-gcp
      containers:
      - name: test
        image: ci-operator:latest
        volumeMounts:
        - name: job-definition
          mountPath: /usr/local/e2e-gcp
          subPath: cluster-launch-e2e.yaml
        - name: cluster-profile
          mountPath: /usr/local/e2e-gcp-cluster-profile
        env:
        - name: TEST_FOCUS
          value: Suite:openshift/conformance/parallel
        - name: JOB_NAME_SAFE
          value: e2e-gcp
        - name: CLUSTER_TYPE
          value: gcp
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin-web-console-server
              key: release-3.10.json
        - name: RPM_REPO_BASEURL_REF
          value: https://storage.googleapis.com/origin-ci-test/releases/openshift/origin/release-3.10/.latest-rpms
        command:
        - /bin/bash
        - -c
        - |
          #!/bin/bash
          set -e
          export RPM_REPO="$( curl -q "${RPM_REPO_BASEURL_REF}" 2>/dev/null)"
          ci-operator \
            --delete-when-idle=10m --dry-run=false \
            --artifact-dir=$(ARTIFACTS) \
            --secret-dir=/usr/local/e2e-gcp-cluster-profile --template=/usr/local/e2e-gcp \
            --target=e2e-gcp

  openshift/image-registry:
  - name: pull-ci-image-registry-unit
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - master
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-image-registry
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
  - name: pull-ci-image-registry-unit-3.10
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - release-3.10
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-image-registry
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
  - name: pull-ci-image-registry-integration
    agent: kubernetes
    context: ci/prow/integration
    branches:
    - master
    rerun_command: "/test integration"
    always_run: true
    trigger: "((?m)^/test( all| integration),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      volumes:
      - name: job-definition
        configMap:
          name: prow-job-master-sidecar
      containers:
      - name: test
        image: ci-operator:latest
        volumeMounts:
        - name: job-definition
          mountPath: /usr/local/integration
          subPath: master-sidecar.yaml
        env:
        - name: COMMAND
          value: TEST_KUBECONFIG=${KUBECONFIG} ARTIFACT_DIR=/tmp/artifacts JUNIT_REPORT=true make test-integration
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-image-registry
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --template=/usr/local/integration
        - --target=integration
  - name: pull-ci-image-registry-integration-3.10
    agent: kubernetes
    context: ci/prow/integration
    branches:
    - release-3.10
    rerun_command: "/test integration"
    always_run: true
    trigger: "((?m)^/test( all| integration),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      volumes:
      - name: job-definition
        configMap:
          name: prow-job-master-sidecar
      containers:
      - name: test
        image: ci-operator:latest
        volumeMounts:
        - name: job-definition
          mountPath: /usr/local/integration
          subPath: master-sidecar.yaml
        env:
        - name: COMMAND
          value: TEST_KUBECONFIG=${KUBECONFIG} ARTIFACT_DIR=/tmp/artifacts JUNIT_REPORT=true make test-integration
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-image-registry
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --template=/usr/local/integration
        - --target=integration
  - name: pull-ci-image-registry-e2e
    agent: kubernetes
    context: ci/prow/e2e
    branches:
    - master
    rerun_command: "/test e2e"
    always_run: true
    trigger: "((?m)^/test( all| e2e),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      volumes:
      - name: job-definition
        configMap:
          name: prow-job-cluster-launch-e2e
      - name: cluster-profile
        projected:
          sources:
          - secret:
              name: cluster-secrets-gcp
          - configMap:
              name: cluster-profile-gcp
      containers:
      - name: test
        image: ci-operator:latest
        volumeMounts:
        - name: job-definition
          mountPath: /usr/local/e2e-gcp
          subPath: cluster-launch-e2e.yaml
        - name: cluster-profile
          mountPath: /usr/local/e2e-gcp-cluster-profile
        env:
        - name: TEST_FOCUS
          value: Suite:openshift/conformance/parallel
        - name: TEST_FOCUS_SERIAL
          value: Suite:openshift/registry/serial
        - name: JOB_NAME_SAFE
          value: e2e-gcp
        - name: CLUSTER_TYPE
          value: gcp
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-image-registry
              key: master.json
        - name: RPM_REPO_BASEURL_REF
          value: https://storage.googleapis.com/origin-ci-test/releases/openshift/origin/master/.latest-rpms
        command:
        - /bin/bash
        - -c
        - |
          #!/bin/bash
          set -e
          export RPM_REPO="$( curl -q "${RPM_REPO_BASEURL_REF}" 2>/dev/null)"
          ci-operator \
            --delete-when-idle=10m --dry-run=false \
            --artifact-dir=$(ARTIFACTS) \
            --secret-dir=/usr/local/e2e-gcp-cluster-profile --template=/usr/local/e2e-gcp \
            --target=e2e-gcp
  - name: pull-ci-image-registry-e2e-3.10
    agent: kubernetes
    context: ci/prow/e2e
    branches:
    - release-3.10
    rerun_command: "/test e2e"
    always_run: true
    trigger: "((?m)^/test( all| e2e),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      volumes:
      - name: job-definition
        configMap:
          name: prow-job-cluster-launch-e2e
      - name: cluster-profile
        projected:
          sources:
          - secret:
              name: cluster-secrets-gcp
          - configMap:
              name: cluster-profile-gcp
      containers:
      - name: test
        image: ci-operator:latest
        volumeMounts:
        - name: job-definition
          mountPath: /usr/local/e2e-gcp
          subPath: cluster-launch-e2e.yaml
        - name: cluster-profile
          mountPath: /usr/local/e2e-gcp-cluster-profile
        env:
        - name: TEST_FOCUS
          value: Suite:openshift/conformance/parallel
        - name: TEST_FOCUS_SERIAL
          value: Suite:openshift/registry/serial
        - name: JOB_NAME_SAFE
          value: e2e-gcp
        - name: CLUSTER_TYPE
          value: gcp
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-image-registry
              key: release-3.10.json
        - name: RPM_REPO_BASEURL_REF
          value: https://storage.googleapis.com/origin-ci-test/releases/openshift/origin/release-3.10/.latest-rpms
        command:
        - /bin/bash
        - -c
        - |
          #!/bin/bash
          set -e
          export RPM_REPO="$( curl -q "${RPM_REPO_BASEURL_REF}" 2>/dev/null)"
          ci-operator \
            --delete-when-idle=10m --dry-run=false \
            --artifact-dir=$(ARTIFACTS) \
            --secret-dir=/usr/local/e2e-gcp-cluster-profile --template=/usr/local/e2e-gcp \
            --target=e2e-gcp

  openshift/kubernetes-metrics-server:
  - name: pull-ci-kubernetes-metrics-server-unit
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - master
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-metrics-server
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
        - --target=[images]
  - name: pull-ci-kubernetes-metrics-server-unit-3.10
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - release-3.10
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-metrics-server
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
        - --target=[images]

  openshift/cluster-operator:
  - name: test_pull_request_cluster_operator_unit
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/unit
    rerun_command: "/test unit"
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"

  openshift/jenkins:
  - name: test_pull_request_jenkins_images
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins
    rerun_command: "/test"
    trigger: "((?m)^/test,?(\\s+|$))"

  openshift/jenkins-plugin:
  - name: test_pull_request_jenkins_plugin
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins
    rerun_command: "/test"
    trigger: "((?m)^/test,?(\\s+|$))"

  openshift/jenkins-sync-plugin:
  - name: test_pull_request_jenkins_sync_plugin
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins
    rerun_command: "/test"
    trigger: "((?m)^/test,?(\\s+|$))"

  openshift/jenkins-client-plugin:
  - name: test_pull_request_jenkins_client_plugin
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins
    rerun_command: "/test"
    trigger: "((?m)^/test,?(\\s+|$))"

  openshift/jenkins-openshift-login-plugin:
  - name: test_pull_request_jenkins_openshift_login_plugin
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins
    rerun_command: "/test"
    trigger: "((?m)^/test,?(\\s+|$))"

  openshift-s2i/s2i-wildfly:
  - name: test_pull_request_wildfly_images
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins
    rerun_command: "/test"
    trigger: "((?m)^/test,?(\\s+|$))"

  openshift/online-hibernation:
  - name: test_pull_request_online_hibernation_unit
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: false
    context: ci/openshift-jenkins/unit
    rerun_command: "/test"
    trigger: "((?m)^/test,?(\\s+|$))"

  openshift/online-console-extensions:
  - name: test_pull_request_online_console_extensions
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins
    rerun_command: "/test"
    trigger: "((?m)^/test,?(\\s+|$))"

  openshift/online-registration:
  - name: test_pull_request_online_registration
    agent: jenkins
    labels:
      master: ci.dev.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins
    rerun_command: "/test"
    trigger: "((?m)^/test,?(\\s+|$))"

  openshift/release:
  - name: check_prometheus_rules
    agent: kubernetes
    run_if_changed: '^(projects/prometheus/prometheus.rules.yaml)$'
    context: ci/openshift/promrules
    rerun_command: "/test promrules"
    trigger: "((?m)^/test promrules,?(\\s+|$))"
    spec:
      containers:
      - image: registry.svc.ci.openshift.org/ci/promrules:latest

  kubernetes-incubator/descheduler:
  - name: ci-kubernetes-descheduler-e2e-gce
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins
    rerun_command: "/test e2e"
    trigger: "((?m)^/test( all| e2e),?(\\s+|$))"

  openshift/descheduler:
  - name: pull-ci-kubernetes-descheduler-unit
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - master
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-descheduler
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
        - --target=[images]
  - name: pull-ci-kubernetes-descheduler-unit-3.10
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - release-3.10
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-descheduler
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit
        - --target=[images]

  openshift/service-catalog:
  - name: test_pull_request_openshift_service_catalog
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/service-catalog
    rerun_command: "/test service-catalog"
    trigger: "((?m)^/test service-catalog,?(\\s+|$))"

  openshift/autoheal:
  - name: pull-autoheal-check
    agent: kubernetes
    context: pull-autoheal-check
    rerun_command: "/test pull-autoheal-check"
    trigger: "/test pull-autoheal-check"
    decorate: true
    spec:
      containers:
      - image: registry.svc.ci.openshift.org/ci/origin-release:golang-1.9
        command:
        - make
        args:
        - check

  openshift/installer:
  - name: pull-ci-origin-installer-unit
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - master
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-installer
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=unit

  - name: pull-ci-origin-installer-e2e-aws
    agent: kubernetes
    context: ci/prow/e2e-aws
    branches:
    - master
    rerun_command: "/test e2e-aws"
    always_run: true
    trigger: "((?m)^/test( all| e2e-aws),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      volumes:
      - name: job-definition
        configMap:
          name: prow-job-cluster-launch-installer-e2e
      - name: cluster-profile
        projected:
          sources:
          - secret:
              name: cluster-secrets-aws
          - configMap:
              name: cluster-profile-aws
      containers:
      - name: test
        image: ci-operator:latest
        volumeMounts:
        - name: job-definition
          mountPath: /usr/local/e2e-aws
          subPath: cluster-launch-installer-e2e.yaml
        - name: cluster-profile
          mountPath: /usr/local/e2e-aws-cluster-profile
        env:
        - name: TEST_FOCUS
          value: Suite:openshift/conformance/parallel
        - name: JOB_NAME_SAFE
          value: e2e-aws
        - name: CLUSTER_TYPE
          value: aws
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-installer
              key: master.json
        command:
        - ci-operator
        - --delete-when-idle=10m
        - --dry-run=false
        - --artifact-dir=$(ARTIFACTS)
        - --secret-dir=/usr/local/e2e-aws-cluster-profile
        - --template=/usr/local/e2e-aws
        - --target=e2e-aws

postsubmits:
  openshift/origin:
  - name: branch-ci-origin-images
    agent: kubernetes
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote
  - name: ami_build_origin_int_rhel_build
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: push_origin_release_36
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
  - name: push_origin_release_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.7
  - name: push_origin_release_38
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.8
  - name: push_origin_release_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.9
  - name: push_origin_release_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_origin_check
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
  - name: test_branch_origin_cmd
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
  - name: test_branch_origin_cross
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
    - stage
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
    - release-3.10
  - name: test_branch_origin_end_to_end
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
  - name: test_branch_origin_extended_conformance_gce_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.7
  - name: test_branch_origin_extended_conformance_gce_38
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.8
  - name: test_branch_origin_extended_conformance_gce_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.9
  - name: test_branch_origin_extended_conformance_gce_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_origin_extended_conformance_gce
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
    - stage
  - name: test_branch_origin_extended_conformance_install_36
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
  - name: test_branch_origin_extended_conformance_install_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.7
  - name: test_branch_origin_extended_conformance_install_38
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.8
  - name: test_branch_origin_extended_conformance_install_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.9
  - name: test_branch_origin_extended_conformance_install
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
    - stage
  - name: test_branch_origin_extended_networking
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
  - name: test_branch_origin_integration
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
  - name: test_branch_origin_verify_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
    - release-3.10
  - name: test_branch_origin_extended_conformance_crio_rpm_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.9
    - release-3.10
  - name: test_branch_origin_extended_conformance_crio_rpm
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_origin_service_catalog_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_origin_extended_conformance_azure_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.9
  - name: test_branch_origin_extended_conformance_azure_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_origin_extended_conformance_azure
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master

  openshift/openshift-ansible:
  - name: test_branch_openshift_ansible_extended_conformance_gce_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.7
  - name: test_branch_openshift_ansible_extended_conformance_gce_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.9
  - name: test_branch_openshift_ansible_extended_conformance_gce_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_openshift_ansible_extended_conformance_gce
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
    - stage
  - name: test_branch_openshift_ansible_logging
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_openshift_ansible_logging_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_openshift_ansible_logging_json_file
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_origin_extended_conformance_install_containerized
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_origin_extended_conformance_install_containerized_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_origin_extended_conformance_install_in_tree
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_origin_extended_conformance_install_in_tree_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_origin_extended_conformance_install_update_containerized
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_origin_extended_conformance_install_update_containerized_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  openshift/jenkins:
  - name: push_jenkins_images
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: push_jenkins_images_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - openshift-3.10
  - name: test_branch_jenkins_images
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/jenkins-plugin:
  - name: test_branch_jenkins_plugin
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/jenkins-sync-plugin:
  - name: test_branch_jenkins_sync_plugin
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/jenkins-client-plugin:
  - name: test_branch_jenkins_client_plugin
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/jenkins-openshift-login-plugin:
  - name: test_branch_jenkins_openshift_login_plugin
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift-s2i/s2i-wildfly:
  - name: push_wildfly_images
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_wildfly_images
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/os:
  - name: branch-ci-os-container-build
    agent: kubernetes
    branches:
    - master
    decorate: true
    spec:
      volumes:
      - name: docker-socket
        hostPath:
          path: /var/run/docker.sock
      - name: docker-binary
        hostPath:
          path: /usr/bin/docker-current
      serviceAccountName: privileged-builder
      containers:
      - name: build
        image: registry.svc.ci.openshift.org/ci/origin-release:golang-1.9
        volumeMounts:
        - name: docker-socket
          mountPath: /var/run/docker.sock
        - name: docker-binary
          mountPath: /usr/bin/docker
        securityContext:
          # TODO: the team has promised me they will be able to remove this soon
          privileged: true
          runAsUser: 0
        command:
        - /bin/bash
        - -c
        - |
          #!/bin/bash
          set -euo pipefail
          cat {atomic-centos-continuous,rhcos-continuous,ignition}.repo >/tmp/preserve
          rm *.repo
          mv /tmp/preserve openshift.repo
          curl http://rpm-mirror.ci.svc >> openshift.repo 2>/dev/null
          echo "true" > generate-openshift-repo
          imagebuilder -privileged -t docker-registry.default.svc:5000/openshift/os:latest .
          docker login docker-registry.default.svc:5000 -u serviceaccount -p "$( cat /var/run/secrets/kubernetes.io/serviceaccount/token )"
          docker push docker-registry.default.svc:5000/openshift/os:latest
          docker rmi docker-registry.default.svc:5000/openshift/os:latest

  kubernetes-incubator/cri-o:
  - name: test_branch_crio_e2e_rhel
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-1.7
    - release-1.8
    - release-1.9
    - master
  - name: test_branch_crio_e2e_fedora
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-1.7
    - release-1.8
    - release-1.9
    - master
  openvswitch/ovn-kubernetes:
  - name: test_branch_ovn_kubernetes_unit
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/online-hibernation:
  - name: test_branch_online_hibernation_unit
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
    - prod
    - stage
  openshift/online-console-extensions:
  - name: test_branch_online_console_extensions
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/image-registry:
  - name: test_branch_image_registry_extended
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_image_registry_integration
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_image_registry_unit
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: branch-ci-image-registry-images
    agent: kubernetes
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-image-registry
              key: master.json
        command:
        - ci-operator
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote
  - name: branch-ci-image-registry-images-3.10
    agent: kubernetes
    branches:
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-image-registry
              key: release-3.10.json
        command:
        - ci-operator
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote

  openshift/origin-web-console:
  - name: test_branch_origin_web_console
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/origin-web-console-server:
  - name: branch-ci-origin-web-console-server-images
    agent: kubernetes
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin-web-console-server
              key: master.json
        command:
        - ci-operator
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote
  - name: branch-ci-origin-web-console-server-images-3.10
    agent: kubernetes
    branches:
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin-web-console-server
              key: release-3.10.json
        command:
        - ci-operator
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote

  openshift/origin-aggregated-logging:
  - name: push_origin_aggregated_logging_release
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: push_origin_aggregated_logging_release_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10

  openshift/origin-metrics:
  - name: push_origin_metrics_release
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: push_origin_metrics_release_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10

  openshift/descheduler:
  - name: branch-ci-kubernetes-descheduler-images
    agent: kubernetes
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-descheduler
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote
  - name: branch-ci-kubernetes-descheduler-images-3.10
    agent: kubernetes
    branches:
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-descheduler
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote

  openshift/kubernetes-metrics-server:
  - name: branch-ci-kubernetes-metrics-server-images
    agent: kubernetes
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-metrics-server
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote
  - name: branch-ci-kubernetes-metrics-server-images-3.10
    agent: kubernetes
    branches:
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-metrics-server
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote

  openshift/kubernetes-autoscaler:
  - name: branch-ci-kubernetes-autoscaler-images
    agent: kubernetes
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-autoscaler
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote
  - name: branch-ci-kubernetes-autoscaler-images-3.10
    agent: kubernetes
    branches:
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-autoscaler
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote

  openshift/cluster-capacity:
  - name: branch-ci-kubernetes-cluster-capacity-images
    agent: kubernetes
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-cluster-capacity
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote
  - name: branch-ci-kubernetes-cluster-capacity-images-3.10
    agent: kubernetes
    branches:
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-cluster-capacity
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote

  openshift/coredns:
  - name: branch-ci-kubernetes-coredns-images
    agent: kubernetes
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-coredns
              key: master.json
        command:
        - ci-operator
        args:
        - --delete-when-idle=10m
        - --artifact-dir=$(ARTIFACTS)
        - --dry-run=false
        - --target=[images]
        - --promote

  openshift/cluster-operator:
  - name: test_branch_cluster_operator_unit
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: push_cluster_operator_images
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master

periodics:
- name: ami_build_origin_int_fedora_crio
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: ami_build_origin_int_rhel_base
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: ami_build_origin_int_rhel_crio
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_conformance_k8s_39
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 12h
- name: test_branch_origin_extended_conformance_k8s
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 12h
- name: test_branch_origin_extended_builds
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_clusterup
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_gssapi
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_image_ecosystem
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_image_registry
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_ldap_groups
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_networking
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: periodic-retester
  agent: kubernetes
  interval: 2h
  spec:
    containers:
    - image: docker-registry.default.svc:5000/ci/commenter:latest
      args:
      - |-
        --query=is:pr
        state:open
        label:lgtm
        label:approved
        status:failure
        -label:do-not-merge
        -label:do-not-merge/work-in-progress
        -label:do-not-merge/hold
        -label:needs-rebase
        -label:needs-ok-to-test
        repo:openshift/origin
      - --token=/etc/oauth/oauth
      - --updated=0
      - |-
        --comment=/retest

        Please review the [full test history](https://openshift-gce-devel.appspot.com/pr/{{.Number}}) for this PR and help us cut down flakes.

      - --template
      - --ceiling=1
      - --confirm
      volumeMounts:
      - name: token
        mountPath: /etc/oauth
    volumes:
    - name: token
      secret:
        secretName: openshift-bot-token
- name: periodic-issue-close
  interval: 6h
  agent: kubernetes
  spec:
    containers:
    - image: docker-registry.default.svc:5000/ci/commenter:latest
      args:
      - |-
        --query=repo:openshift/origin
        -label:lifecycle/frozen
        label:lifecycle/rotten
      - --updated=720h
      - --token=/etc/oauth/oauth
      - |-
        --comment=Rotten issues close after 30d of inactivity.

        Reopen the issue by commenting `/reopen`.
        Mark the issue as fresh by commenting `/remove-lifecycle rotten`.
        Exclude this issue from closing again by commenting `/lifecycle frozen`.

        /close
      - --template
      - --ceiling=10
      - --confirm
      volumeMounts:
      - name: token
        mountPath: /etc/oauth
    volumes:
    - name: token
      secret:
        secretName: openshift-bot-token
- name: periodic-issue-rotten
  interval: 6h
  agent: kubernetes
  spec:
    containers:
    - image: docker-registry.default.svc:5000/ci/commenter:latest
      args:
      - |-
        --query=repo:openshift/origin
        -label:lifecycle/frozen
        label:lifecycle/stale
        -label:lifecycle/rotten
      - --updated=720h
      - --token=/etc/oauth/oauth
      - |-
        --comment=Stale issues rot after 30d of inactivity.

        Mark the issue as fresh by commenting `/remove-lifecycle rotten`.
        Rotten issues close after an additional 30d of inactivity.
        Exclude this issue from closing by commenting `/lifecycle frozen`.

        If this issue is safe to close now please do so with `/close`.

        /lifecycle rotten
        /remove-lifecycle stale
      - --template
      - --ceiling=10
      - --confirm
      volumeMounts:
      - name: token
        mountPath: /etc/oauth
    volumes:
    - name: token
      secret:
        secretName: openshift-bot-token
- name: periodic-issue-stale
  interval: 6h
  agent: kubernetes
  spec:
    containers:
    - image: docker-registry.default.svc:5000/ci/commenter:latest
      args:
      - |-
        --query=repo:openshift/origin
        -label:lifecycle/frozen
        -label:lifecycle/stale
        -label:lifecycle/rotten
      - --updated=2160h
      - --token=/etc/oauth/oauth
      - |-
        --comment=Issues go stale after 90d of inactivity.

        Mark the issue as fresh by commenting `/remove-lifecycle stale`.
        Stale issues rot after an additional 30d of inactivity and eventually close.
        Exclude this issue from closing by commenting `/lifecycle frozen`.

        If this issue is safe to close now please do so with `/close`.

        /lifecycle stale
      - --template
      - --ceiling=10
      - --confirm
      volumeMounts:
      - name: token
        mountPath: /etc/oauth
    volumes:
    - name: token
      secret:
        secretName: openshift-bot-token
- name: periodic-label-sync
  interval: 24h
  agent: kubernetes
  spec:
    containers:
    - image: gcr.io/k8s-testimages/label_sync:v20180227-377685119
      args:
      - --config=/etc/config/labels.yaml
      - --confirm=true
      - --orgs=openshift
      - --token=/etc/github/oauth
      volumeMounts:
      - name: token
        mountPath: /etc/github
        readOnly: true
      - name: config
        mountPath: /etc/config
        readOnly: true
    volumes:
    - name: token
      secret:
        secretName: repo-management-token
    - name: config
      configMap:
        name: labels
- name: ci-kubernetes-conformance-node-e2e-rhel
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 2h
- name: ci-kubernetes-conformance-node-e2e-containerized-rhel
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 2h
- name: azure_build_base_image_centos
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
  run_after_success:
  - name: azure_build_node_image_centos_39
    agent: jenkins
    labels:
        master: ci.openshift.redhat.com
  - name: azure_build_node_image_centos
    agent: jenkins
    labels:
        master: ci.openshift.redhat.com
- name: azure_build_base_image_rhel
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
  run_after_success:
  - name: azure_build_node_image_rhel_39
    agent: jenkins
    labels:
        master: ci.openshift.redhat.com

- name: ami_build_ose_master
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 24h
- name: ami_build_ose_enterprise_39
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 24h
- name: ami_build_ose_enterprise_38
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 24h
- name: ami_build_ose_enterprise_37
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 24h
- name: ami_build_ose_enterprise_36
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 24h

- name: test_branch_ose_check_and_verify_tasks
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_conformance
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_integration_and_end_to_end
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_networking
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h

- name: test_branch_ose_check_and_verify_tasks_39
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_conformance_39
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_integration_and_end_to_end_39
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_networking_39
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h

- name: test_branch_ose_check_and_verify_tasks_38
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_conformance_38
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_integration_and_end_to_end_38
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_networking_38
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h

- name: test_branch_ose_check_and_verify_tasks_37
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_conformance_37
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_integration_and_end_to_end_37
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_networking_37
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h

- name: test_branch_ose_check_and_verify_tasks_36
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_conformance_36
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_integration_and_end_to_end_36
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_networking_36
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
