plank:
  allow_cancellations: true
  job_url_template: 'https://openshift-gce-devel.appspot.com/build/origin-ci-test/{{if eq .Spec.Type "presubmit"}}pr-logs/pull{{else if eq .Spec.Type "batch"}}pr-logs/pull{{else}}logs{{end}}{{if ne .Spec.Refs.Repo "origin"}}/{{.Spec.Refs.Org}}_{{.Spec.Refs.Repo}}{{end}}{{if eq .Spec.Type "presubmit"}}/{{with index .Spec.Refs.Pulls 0}}{{.Number}}{{end}}{{else if eq .Spec.Type "batch"}}/batch{{end}}/{{.Spec.Job}}/{{.Status.BuildID}}/'
  report_template: '[Full PR test history](https://openshift-gce-devel.appspot.com/pr/{{if ne .Spec.Refs.Repo "origin"}}{{.Spec.Refs.Org}}_{{.Spec.Refs.Repo}}/{{end}}{{with index .Spec.Refs.Pulls 0}}{{.Number}}{{end}}). [Your PR dashboard](https://openshift-gce-devel.appspot.com/pr/{{with index .Spec.Refs.Pulls 0}}{{.Author}}{{end}}). Please help us cut down on flakes by [linking to](https://github.com/kubernetes/community/blob/master/contributors/devel/flaky-tests.md#filing-issues-for-flaky-tests) an [open issue](https://github.com/{{.Spec.Refs.Org}}/{{.Spec.Refs.Repo}}/issues?q=is:issue+is:open) when you hit one in your PR.'
  default_decoration_config:
    timeout: 14400000000000 # 4h
    grace_period: 15000000000 # 15s
    utility_images:
      clonerefs: "clonerefs:latest"
      initupload: "initupload:latest"
      entrypoint: "entrypoint:latest"
      sidecar: "sidecar:latest"
    gcs_configuration:
      bucket: "origin-ci-test"
      path_strategy: "single"
      default_org: "openshift"
      default_repo: "origin"
    gcs_credentials_secret: "gcs-publisher-credentials"

jenkins_operators:
- label_selector: master=ci.openshift.redhat.com
  max_concurrency: 150
  max_goroutines: 20
  allow_cancellations: true
  job_url_template: 'https://openshift-gce-devel.appspot.com/build/origin-ci-test/{{if eq .Spec.Type "presubmit"}}pr-logs/pull{{else if eq .Spec.Type "batch"}}pr-logs/pull{{else}}logs{{end}}{{if ne .Spec.Refs.Repo "origin"}}/{{.Spec.Refs.Org}}_{{.Spec.Refs.Repo}}{{end}}{{if eq .Spec.Type "presubmit"}}/{{with index .Spec.Refs.Pulls 0}}{{.Number}}{{end}}{{else if eq .Spec.Type "batch"}}/batch{{end}}/{{.Spec.Job}}/{{.Status.JenkinsBuildID}}/'
  report_template: '[Full PR test history](https://openshift-gce-devel.appspot.com/pr/{{if ne .Spec.Refs.Repo "origin"}}{{.Spec.Refs.Org}}_{{.Spec.Refs.Repo}}/{{end}}{{with index .Spec.Refs.Pulls 0}}{{.Number}}{{end}}). [Your PR dashboard](https://openshift-gce-devel.appspot.com/pr/{{with index .Spec.Refs.Pulls 0}}{{.Author}}{{end}}). Please help us cut down on flakes by [linking to](https://github.com/kubernetes/community/blob/master/contributors/devel/flaky-tests.md#filing-issues-for-flaky-tests) an [open issue](https://github.com/{{.Spec.Refs.Org}}/{{.Spec.Refs.Repo}}/issues?q=is:issue+is:open) when you hit one in your PR.'
- label_selector: master=ci.dev.openshift.redhat.com
  max_concurrency: 25
  max_goroutines: 20
  allow_cancellations: true
  job_url_template: 'https://ci.dev.openshift.redhat.com/jenkins/job/{{.Spec.Job}}/{{.Status.JenkinsBuildID}}'
- label_selector: master=jenkins.katacontainers.io
  max_concurrency: 10
  max_goroutines: 20
  allow_cancellations: true
  job_url_template: 'http://jenkins.katacontainers.io/job/{{.Spec.Job}}/{{.Status.JenkinsBuildID}}'
- label_selector: master=jenkins-tectonic.prod.coreos.systems
  max_concurrency: 1
  max_goroutines: 1
  allow_cancellations: true
  job_url_template: 'https://jenkins-tectonic.prod.coreos.systems/job/{{.Spec.Job}}/{{.Status.JenkinsBuildID}}'

sinker:
  resync_period: 1h
  max_prowjob_age: 48h
  max_pod_age: 12h

deck:
  external_agent_logs:
  - agent: jenkins
    selector: master=ci.openshift.redhat.com
    url_template: 'http://jenkins-operator/job/{{.Spec.Job}}/{{.Status.JenkinsBuildID}}/consoleText'
  branding:
    logo: "extensions/logo.png"
    favicon: "extensions/favicon.ico"
    header_color: "black"
  hidden_repos:
  - openshift/ose
  - openshift/online-registration

tide:
  pr_status_base_url: https://deck-ci.svc.ci.openshift.org/pr
  queries:
  - repos:
    - openshift/image-registry
    - openshift/installer
    - openshift/online-hibernation
    - openshift/online-console-extensions
    - openshift/jenkins
    - openshift/jenkins-plugin
    - openshift/jenkins-sync-plugin
    - openshift/jenkins-client-plugin
    - openshift/jenkins-openshift-login-plugin
    - openshift-s2i/s2i-wildfly
    - openshift/monitor-project-lifecycle
    - openshift/autoheal
    - openshift/cluster-monitoring-operator
    - openshift/openshift-ansible
    - openshift/azure-misc
    - openshift/ci-operator
    - openshift/ci-vm-operator
    - openshift/ci-ns-ttl-controller
    labels:
    - lgtm
    - approved
    missingLabels:
    - needs-ok-to-test
    - do-not-merge/work-in-progress
    - do-not-merge/hold
  - repos:
    - openshift/origin
    labels:
    - lgtm
    - approved
    missingLabels:
    - needs-ok-to-test
    - do-not-merge/work-in-progress
    - do-not-merge/hold
  - repos:
    - openshift/online-registration
    - openshift/enterprise-images
    labels:
    - lgtm
    - approved
    missingLabels:
    - needs-ok-to-test
    - do-not-merge/work-in-progress
    - do-not-merge/hold
  - repos:
    - openshift/kubernetes-metrics-server
    - openshift/origin-aggregated-logging
    - openshift/origin-metrics
    - openshift/origin-web-console
    - openshift/origin-web-console-server
    - openshift/console
    - openshift/prometheus-operator
    - openshift/kube-rbac-proxy
    - openshift/kube-state-metrics
    - openshift/configmap-reload
    - openshift/cluster-operator
    - openshift/os
    - openshift/redhat-release-coreos
    - openshift/release
    - openshift/cluster-capacity
    - openshift/descheduler
    - openshift/node-problem-detector
    - openshift/kubernetes-autoscaler
    - openshift/openshift-restclient-java
    - openshift/coredns
    - openshift/telemeter
    - openshift/service-serving-cert-signer
    - openshift/service-catalog
    labels:
    - lgtm
    missingLabels:
    - needs-ok-to-test
    - do-not-merge/work-in-progress
    - do-not-merge/hold
  - repos:
    - openshift/openshift-azure
    labels:
    - lgtm
    - approved
    missingLabels:
    - needs-ok-to-test
    - do-not-merge/work-in-progress
    - do-not-merge/hold
    - do-not-merge/needs-signoff

prowjob_namespace: ci
pod_namespace: ci
log_level: debug

presubmits:
  openshift/descheduler:
  - name: pull-ci-kubernetes-descheduler-unit
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - master
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-descheduler
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=unit
        - --target=[images]
  - name: pull-ci-kubernetes-descheduler-unit-3.10
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - release-3.10
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-descheduler
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=unit
        - --target=[images]
  - name: pull-ci-kubernetes-descheduler-e2e-gce-3.10
    agent: kubernetes
    always_run: true
    context: ci/prow/e2e
    branches:
    - release-3.10
    rerun_command: "/test e2e"
    trigger: "((?m)^/test( all| e2e),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      volumes:
      - name: job-definition
        configMap:
          name: prow-job-cluster-launch-src
      - name: cluster-profile
        projected:
          sources:
          - secret:
              name: cluster-secrets-gcp
          - configMap:
              name: cluster-profile-gcp
      containers:
      - name: test
        image: ci-operator:latest
        volumeMounts:
        - name: job-definition
          mountPath: /usr/local/e2e-gcp
          subPath: cluster-launch-src.yaml
        - name: cluster-profile
          mountPath: /usr/local/kubernetes-descheduler-e2e-cluster-profile
        env:
        - name: JOB_NAME_SAFE
          value: kubernetes-descheduler-e2e
        - name: CLUSTER_TYPE
          value: gcp
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-descheduler
              key: release-3.10.json
        - name: TEST_COMMAND
          value: "cp /tmp/admin.kubeconfig /tmp/admin.conf && make test-e2e"
        - name: RPM_REPO_BASEURL_REF
          value: https://storage.googleapis.com/origin-ci-test/releases/openshift/origin/release-3.10/.latest-rpms
        command:
        - /bin/bash
        - -c
        - |
          #!/bin/bash
          set -e
          export RPM_REPO="$( curl -q "${RPM_REPO_BASEURL_REF}" 2>/dev/null)"
          ci-operator \
            --artifact-dir=$(ARTIFACTS) \
            --secret-dir=/usr/local/kubernetes-descheduler-e2e-cluster-profile \
            --template=/usr/local/e2e-gcp \
            --target=e2e-gcp

  openshift/service-catalog:
  - name: test_pull_request_openshift_service_catalog
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    always_run: true
    context: ci/openshift-jenkins/service-catalog
    rerun_command: "/test service-catalog"
    trigger: "((?m)^/test service-catalog,?(\\s+|$))"
  - name: pull-ci-openshift-service-catalog-unit
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - master
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-service-catalog
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=unit
        - --target=[images]

  openshift/autoheal:
  - name: pull-autoheal-check
    agent: kubernetes
    context: pull-autoheal-check
    rerun_command: "/test pull-autoheal-check"
    trigger: "/test pull-autoheal-check"
    decorate: true
    spec:
      containers:
      - image: registry.svc.ci.openshift.org/ci/origin-release:golang-1.9
        command:
        - make
        args:
        - check

  openshift/installer:
  - name: pull-ci-origin-installer-unit
    agent: kubernetes
    context: ci/prow/unit
    branches:
    - master
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-installer
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=unit

  - name: pull-ci-origin-installer-e2e-aws
    agent: kubernetes
    context: ci/prow/e2e-aws
    branches:
    - master
    - dockerless-build-temporary
    rerun_command: "/test e2e-aws"
    always_run: true
    trigger: "((?m)^/test( all| e2e-aws),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      volumes:
      - name: job-definition
        configMap:
          name: prow-job-cluster-launch-installer-e2e
      - name: cluster-profile
        projected:
          sources:
          - secret:
              name: cluster-secrets-aws
          - configMap:
              name: cluster-profile-aws
      containers:
      - name: test
        image: ci-operator:latest
        volumeMounts:
        - name: job-definition
          mountPath: /usr/local/e2e-aws
          subPath: cluster-launch-installer-e2e.yaml
        - name: cluster-profile
          mountPath: /usr/local/e2e-aws-cluster-profile
        env:
        - name: TEST_FOCUS
          value: "The HAProxy router should set Forwarded headers appropriately"
        - name: JOB_NAME_SAFE
          value: e2e-aws
        - name: CLUSTER_TYPE
          value: aws
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-installer
              key: master.json
        command:
        - ci-operator
        - --artifact-dir=$(ARTIFACTS)
        - --secret-dir=/usr/local/e2e-aws-cluster-profile
        - --template=/usr/local/e2e-aws
        - --target=e2e-aws

  - name: ci-pull-openshift-installer-yaml-lint
    trigger: "(?m)^/test yaml-lint"
    rerun_command: "/test yaml-lint"
    context: ci/prow/yaml-lint
    always_run: true
    skip_report: false
    agent: kubernetes
    decorate: true
    spec:
      containers:
      - image: quay.io/coreos/yamllint
        env:
        - name: IS_CONTAINER
          value: 'TRUE'
        command:
          - sh
        args:
          - ./hack/yaml-lint.sh

  - name: ci-pull-openshift-installer-tf-lint
    trigger: "(?m)^/test tf-lint"
    rerun_command: "/test tf-lint"
    context: ci/prow/tf-lint
    always_run: true
    skip_report: false
    agent: kubernetes
    decorate: true
    spec:
      containers:
      - image: quay.io/coreos/tflint
        env:
        - name: IS_CONTAINER
          value: 'TRUE'
        command:
          - sh
        args:
          - ./hack/tf-lint.sh

  - name: ci-pull-openshift-installer-shellcheck
    trigger: "(?m)^/test shellcheck"
    rerun_command: "/test shellcheck"
    context: ci/prow/shellcheck
    always_run: true
    skip_report: false
    agent: kubernetes
    decorate: true
    spec:
      containers:
      - image: quay.io/coreos/shellcheck-alpine:v0.5.0
        env:
        - name: IS_CONTAINER
          value: "TRUE"
        command:
        - sh
        args:
        - ./hack/shellcheck.sh

  openshift/ci-vm-operator:
  - name: pull-ci-vm-operator-build
    agent: kubernetes
    context: ci/prow/build
    rerun_command: "/test build"
    always_run: true
    trigger: "((?m)^/test( all| build),?(\\s+|$))"
    decorate: true
    spec:
      containers:
      - name: test
        image: registry.svc.ci.openshift.org/openshift/release:golang-1.10
        command:
        - make
        args:
        - build
  - name: pull-ci-vm-operator-unit
    agent: kubernetes
    context: ci/prow/unit
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    spec:
      containers:
      - name: test
        image: registry.svc.ci.openshift.org/openshift/release:golang-1.10
        command:
        - make
        args:
        - test

  openshift/ci-ns-ttl-controller:
  - name: pull-ci-ns-ttl-controller-build
    agent: kubernetes
    context: ci/prow/build
    rerun_command: "/test build"
    always_run: true
    trigger: "((?m)^/test( all| build),?(\\s+|$))"
    decorate: true
    spec:
      containers:
      - name: test
        image: registry.svc.ci.openshift.org/openshift/release:golang-1.10
        command:
        - make
        args:
        - build
  - name: pull-ci-ns-ttl-controller-unit
    agent: kubernetes
    context: ci/prow/unit
    rerun_command: "/test unit"
    always_run: true
    trigger: "((?m)^/test( all| unit),?(\\s+|$))"
    decorate: true
    spec:
      containers:
      - name: test
        image: registry.svc.ci.openshift.org/openshift/release:golang-1.10
        command:
        - make
        args:
        - test
  - name: pull-ci-ns-ttl-controller-lint
    agent: kubernetes
    context: ci/prow/lint
    rerun_command: "/test lint"
    always_run: true
    trigger: "((?m)^/test( all| lint),?(\\s+|$))"
    decorate: true
    spec:
      containers:
      - name: test
        image: registry.svc.ci.openshift.org/openshift/release:golang-1.10
        command:
        - make
        args:
        - test

  openshift/openshift-azure:
  - name: pull-ci-openshift-azure
    agent: kubernetes
    labels:
      artifacts: images
    context: ci/prow/build
    branches:
    - master
    rerun_command: "/test build"
    always_run: true
    trigger: "((?m)^/test( all| build),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-openshift-azure
              key: master.json
        command:
        - ci-operator
        args:
        - --target=[images]
        - --target=verify
        - --target=unit

  openshift/azure-misc:
  - name: pull-ci-openshift-azure-misc
    agent: kubernetes
    labels:
      artifacts: images
    context: ci/prow/build
    branches:
    - master
    rerun_command: "/test build"
    always_run: true
    trigger: "((?m)^/test( all| build),?(\\s+|$))"
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-azure-misc
              key: master.json
        command:
        - ci-operator
        args:
        - --target=[images]

postsubmits:
  openshift/origin:
  - name: branch-ci-origin-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin
              key: master.json
        - name: OVERRIDE_SPEC
          value: '{"promotion": {"cluster": "https://api.ci.openshift.org", "namespace": "openshift", "name": "origin-v3.11", "additional_images": {"base": "base"}}}'
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --target=artifacts
        - --promote
  - name: ami_build_origin_int_rhel_build
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: push_origin_release_36
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
  - name: push_origin_release_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.7
  - name: push_origin_release_38
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.8
  - name: push_origin_release_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.9
  - name: push_origin_release_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_origin_check
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
  - name: test_branch_origin_cmd
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
  - name: test_branch_origin_cross
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
    - release-3.10
  - name: test_branch_origin_end_to_end
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
  - name: test_branch_origin_extended_conformance_gce_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.7
  - name: test_branch_origin_extended_conformance_gce_38
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.8
  - name: test_branch_origin_extended_conformance_gce_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.9
  - name: test_branch_origin_extended_conformance_gce_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_origin_extended_conformance_gce
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
    - stage
  - name: test_branch_origin_extended_conformance_install_36
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
  - name: test_branch_origin_extended_conformance_install_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.7
  - name: test_branch_origin_extended_conformance_install_38
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.8
  - name: test_branch_origin_extended_conformance_install_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.9
  - name: test_branch_origin_extended_conformance_install
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
    - stage
  - name: test_branch_origin_extended_networking
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
  - name: test_branch_origin_integration
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
  - name: test_branch_origin_verify_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.6
    - release-3.7
    - release-3.8
    - release-3.9
    - release-3.10
  - name: test_branch_origin_extended_conformance_crio_rpm_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.9
    - release-3.10
  - name: test_branch_origin_service_catalog_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_origin_extended_conformance_azure_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_origin_extended_conformance_azure
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master

  openshift/openshift-ansible:
  - name: branch-ci-openshift-openshift-ansible-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-openshift-ansible
              key: master.json
        command:
        - ci-operator
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote
  - name: test_branch_openshift_ansible_extended_conformance_gce_37
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.7
  - name: test_branch_openshift_ansible_extended_conformance_gce_39
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.9
  - name: test_branch_openshift_ansible_extended_conformance_gce_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_openshift_ansible_extended_conformance_gce
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
    - stage
  - name: test_branch_openshift_ansible_extended_conformance_azure
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
    - stage
  - name: test_branch_openshift_ansible_extended_conformance_azure_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_openshift_ansible_logging
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_openshift_ansible_logging_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_openshift_ansible_logging_json_file
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_origin_extended_conformance_install_containerized
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_origin_extended_conformance_install_containerized_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_origin_extended_conformance_install_in_tree
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_origin_extended_conformance_install_in_tree_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  - name: test_branch_origin_extended_conformance_install_update_containerized
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_origin_extended_conformance_install_update_containerized_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10
  openshift/jenkins:
  - name: push_jenkins_images
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: push_jenkins_images_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - openshift-3.10
  - name: test_branch_jenkins_images
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/jenkins-plugin:
  - name: test_branch_jenkins_plugin
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/jenkins-sync-plugin:
  - name: test_branch_jenkins_sync_plugin
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/jenkins-client-plugin:
  - name: test_branch_jenkins_client_plugin
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/jenkins-openshift-login-plugin:
  - name: test_branch_jenkins_openshift_login_plugin
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift-s2i/s2i-wildfly:
  - name: push_wildfly_images
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_wildfly_images
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master

  kubernetes-incubator/cri-o:
  - name: test_branch_crio_e2e_rhel
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-1.7
    - release-1.8
    - release-1.9
    - master
  - name: test_branch_crio_e2e_fedora
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-1.7
    - release-1.8
    - release-1.9
    - master
  openvswitch/ovn-kubernetes:
  - name: test_branch_ovn_kubernetes_unit
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/online-hibernation:
  - name: test_branch_online_hibernation_unit
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
    - prod
    - stage
  openshift/online-console-extensions:
  - name: test_branch_online_console_extensions
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/image-registry:
  - name: test_branch_image_registry_extended
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_image_registry_integration
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_image_registry_unit
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: branch-ci-image-registry-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-image-registry
              key: master.json
        command:
        - ci-operator
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote
  - name: branch-ci-image-registry-images-3.10
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-image-registry
              key: release-3.10.json
        command:
        - ci-operator
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/installer:
  - name: branch-ci-origin-installer-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-installer
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/console:
  - name: branch-ci-openshift-console-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-console
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote
  openshift/origin-web-console:
  - name: test_branch_origin_web_console
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  openshift/origin-web-console-server:
  - name: branch-ci-origin-web-console-server-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin-web-console-server
              key: master.json
        command:
        - ci-operator
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote
  - name: branch-ci-origin-web-console-server-images-3.10
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin-web-console-server
              key: release-3.10.json
        command:
        - ci-operator
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/origin-aggregated-logging:
  - name: branch-ci-openshift-origin-aggregated-logging-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin-aggregated-logging
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote
  - name: push_origin_aggregated_logging_release_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10

  openshift/origin-metrics:
  - name: branch-ci-openshift-origin-metrics-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-origin-metrics
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote
  - name: push_origin_metrics_release_310
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - release-3.10

  openshift/descheduler:
  - name: branch-ci-kubernetes-descheduler-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-descheduler
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote
  - name: branch-ci-kubernetes-descheduler-images-3.10
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-descheduler
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/kubernetes-metrics-server:
  - name: branch-ci-kubernetes-metrics-server-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-metrics-server
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote
  - name: branch-ci-kubernetes-metrics-server-images-3.10
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-metrics-server
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/kubernetes-autoscaler:
  - name: branch-ci-kubernetes-autoscaler-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-autoscaler
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote
  - name: branch-ci-kubernetes-autoscaler-images-3.10
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-autoscaler
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/cluster-capacity:
  - name: branch-ci-kubernetes-cluster-capacity-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-cluster-capacity
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote
  - name: branch-ci-kubernetes-cluster-capacity-images-3.10
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-cluster-capacity
              key: release-3.10.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/coredns:
  - name: branch-ci-kubernetes-coredns-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-kubernetes-coredns
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/telemeter:
  - name: branch-ci-openshift-telemeter-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-telemeter
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/service-serving-cert-signer:
  - name: branch-ci-openshift-service-serving-cert-signer-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-service-serving-cert-signer
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/prometheus-operator:
  - name: branch-ci-openshift-prometheus-operator-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - openshift-master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-prometheus-operator
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/kube-rbac-proxy:
  - name: branch-ci-openshift-kube-rbac-proxy-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - openshift-master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-kube-rbac-proxy
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/kube-state-metrics:
  - name: branch-ci-openshift-kube-state-metrics-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - openshift-master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-kube-state-metrics
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/configmap-reload:
  - name: branch-ci-openshift-configmap-reload-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - openshift-master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-configmap-reload
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/cluster-monitoring-operator:
  - name: branch-ci-openshift-cluster-monitoring-operator-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-cluster-monitoring-operator
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/cluster-operator:
  - name: test_branch_cluster_operator_unit
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: test_branch_cluster_operator_e2e
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master
  - name: push_cluster_operator_images
    agent: jenkins
    labels:
      master: ci.openshift.redhat.com
    branches:
    - master

  openshift/service-catalog:
  - name: branch-ci-openshift-service-catalog-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    - release-3.10
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-service-catalog
              key: master.json
        command:
        - ci-operator
        args:
        - --artifact-dir=$(ARTIFACTS)
        - --target=[images]
        - --promote

  openshift/openshift-azure:
  - name: branch-ci-openshift-azure-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-openshift-azure
              key: master.json
        command:
        - ci-operator
        args:
        - --target=[images]
        - --target=verify
        - --target=unit
        - --promote

  openshift/azure-misc:
  - name: branch-ci-openshift-azure-misc-images
    agent: kubernetes
    labels:
      artifacts: images
    branches:
    - master
    decorate: true
    skip_cloning: true
    spec:
      serviceAccountName: ci-operator
      containers:
      - name: test
        image: ci-operator:latest
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              name: ci-operator-openshift-azure-misc
              key: master.json
        command:
        - ci-operator
        args:
        - --target=[images]
        - --promote

periodics:
- name: ami_build_origin_int_fedora_crio
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: ami_build_origin_int_rhel_base
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: ami_build_origin_int_rhel_crio
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h

- name: periodic-ci-origin-conformance-k8s
  interval: 24h
  agent: kubernetes
  decorate: true
  skip_cloning: true
  spec:
    serviceAccountName: ci-operator
    volumes:
    - name: job-definition
      configMap:
        name: prow-job-cluster-launch-src
    - name: cluster-profile
      projected:
        sources:
        - secret:
            name: cluster-secrets-gcp
        - configMap:
            name: cluster-profile-gcp
    containers:
    - name: test
      image: ci-operator:latest
      volumeMounts:
      - name: job-definition
        mountPath: /usr/local/e2e-gcp
        subPath: cluster-launch-src.yaml
      - name: cluster-profile
        mountPath: /usr/local/e2e-gcp-cluster-profile
      env:
      - name: TEST_COMMAND
        value: test/extended/conformance-k8s.sh
      - name: JOB_NAME_SAFE
        value: e2e-gcp
      - name: CLUSTER_TYPE
        value: gcp
      - name: CONFIG_SPEC
        valueFrom:
          configMapKeyRef:
            name: ci-operator-openshift-origin
            key: master.json
      - name: OVERRIDE_SPEC
        value: '{"test_base_image": {"cluster": "", "namespace": "ci", "name": "src-cache-origin", "tag": "master"}}'
      command:
      - ci-operator
      args:
      - --artifact-dir=$(ARTIFACTS)
      - --secret-dir=/usr/local/e2e-gcp-cluster-profile
      - --template=/usr/local/e2e-gcp
      - --target=e2e-gcp
      - --git-ref=openshift/origin@master

- name: test_branch_origin_extended_conformance_k8s_310
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_builds
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_clusterup
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_gssapi
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_image_ecosystem
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_image_registry
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_ldap_groups
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: test_branch_origin_extended_networking
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
- name: periodic-retester
  agent: kubernetes
  interval: 2h
  spec:
    containers:
    - image: docker-registry.default.svc:5000/ci/commenter:latest
      args:
      - |-
        --query=is:pr
        state:open
        label:lgtm
        label:approved
        status:failure
        -label:do-not-merge
        -label:do-not-merge/work-in-progress
        -label:do-not-merge/hold
        -label:needs-rebase
        -label:needs-ok-to-test
        repo:openshift/origin
      - --token=/etc/oauth/oauth
      - --updated=0
      - |-
        --comment=/retest

        Please review the [full test history](https://openshift-gce-devel.appspot.com/pr/{{.Number}}) for this PR and help us cut down flakes.

      - --template
      - --ceiling=1
      - --confirm
      volumeMounts:
      - name: token
        mountPath: /etc/oauth
    volumes:
    - name: token
      secret:
        secretName: openshift-bot-token
- name: periodic-issue-close
  interval: 6h
  agent: kubernetes
  spec:
    containers:
    - image: docker-registry.default.svc:5000/ci/commenter:latest
      args:
      - |-
        --query=repo:openshift/origin
        -label:lifecycle/frozen
        label:lifecycle/rotten
      - --updated=720h
      - --token=/etc/oauth/oauth
      - |-
        --comment=Rotten issues close after 30d of inactivity.

        Reopen the issue by commenting `/reopen`.
        Mark the issue as fresh by commenting `/remove-lifecycle rotten`.
        Exclude this issue from closing again by commenting `/lifecycle frozen`.

        /close
      - --template
      - --ceiling=10
      - --confirm
      volumeMounts:
      - name: token
        mountPath: /etc/oauth
    volumes:
    - name: token
      secret:
        secretName: openshift-bot-token
- name: periodic-issue-rotten
  interval: 6h
  agent: kubernetes
  spec:
    containers:
    - image: docker-registry.default.svc:5000/ci/commenter:latest
      args:
      - |-
        --query=repo:openshift/origin
        -label:lifecycle/frozen
        label:lifecycle/stale
        -label:lifecycle/rotten
      - --updated=720h
      - --token=/etc/oauth/oauth
      - |-
        --comment=Stale issues rot after 30d of inactivity.

        Mark the issue as fresh by commenting `/remove-lifecycle rotten`.
        Rotten issues close after an additional 30d of inactivity.
        Exclude this issue from closing by commenting `/lifecycle frozen`.

        If this issue is safe to close now please do so with `/close`.

        /lifecycle rotten
        /remove-lifecycle stale
      - --template
      - --ceiling=10
      - --confirm
      volumeMounts:
      - name: token
        mountPath: /etc/oauth
    volumes:
    - name: token
      secret:
        secretName: openshift-bot-token
- name: periodic-issue-stale
  interval: 6h
  agent: kubernetes
  spec:
    containers:
    - image: docker-registry.default.svc:5000/ci/commenter:latest
      args:
      - |-
        --query=repo:openshift/origin
        -label:lifecycle/frozen
        -label:lifecycle/stale
        -label:lifecycle/rotten
      - --updated=2160h
      - --token=/etc/oauth/oauth
      - |-
        --comment=Issues go stale after 90d of inactivity.

        Mark the issue as fresh by commenting `/remove-lifecycle stale`.
        Stale issues rot after an additional 30d of inactivity and eventually close.
        Exclude this issue from closing by commenting `/lifecycle frozen`.

        If this issue is safe to close now please do so with `/close`.

        /lifecycle stale
      - --template
      - --ceiling=10
      - --confirm
      volumeMounts:
      - name: token
        mountPath: /etc/oauth
    volumes:
    - name: token
      secret:
        secretName: openshift-bot-token
- name: periodic-label-sync
  interval: 24h
  agent: kubernetes
  spec:
    containers:
    - image: gcr.io/k8s-testimages/label_sync:v20180227-377685119
      args:
      - --config=/etc/config/labels.yaml
      - --confirm=true
      - --orgs=openshift
      - --token=/etc/github/oauth
      volumeMounts:
      - name: token
        mountPath: /etc/github
        readOnly: true
      - name: config
        mountPath: /etc/config
        readOnly: true
    volumes:
    - name: token
      secret:
        secretName: repo-management-token
    - name: config
      configMap:
        name: labels
- name: ci-kubernetes-conformance-node-e2e-rhel
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 2h
- name: ci-kubernetes-conformance-node-e2e-containerized-rhel
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 2h
- name: azure_build_base_image_centos
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
  run_after_success:
  - name: azure_build_node_image_centos_310
    agent: jenkins
    labels:
        master: ci.openshift.redhat.com
  - name: azure_build_node_image_centos
    agent: jenkins
    labels:
        master: ci.openshift.redhat.com
- name: azure_build_base_image_rhel
  agent: jenkins
  labels:
      master: ci.openshift.redhat.com
  interval: 24h
  run_after_success:
  - name: azure_build_node_image_rhel_310
    agent: jenkins
    labels:
        master: ci.openshift.redhat.com

- name: ami_build_ose_master
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 24h
- name: ami_build_ose_enterprise_39
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 24h
- name: ami_build_ose_enterprise_38
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 24h
- name: ami_build_ose_enterprise_37
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 24h
- name: ami_build_ose_enterprise_36
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 24h

- name: test_branch_ose_check_and_verify_tasks
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_conformance
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_integration_and_end_to_end
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_networking
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h

- name: test_branch_ose_check_and_verify_tasks_39
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_conformance_39
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_integration_and_end_to_end_39
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_networking_39
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h

- name: test_branch_ose_check_and_verify_tasks_38
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_conformance_38
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_integration_and_end_to_end_38
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_networking_38
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h

- name: test_branch_ose_check_and_verify_tasks_37
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_conformance_37
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_integration_and_end_to_end_37
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_networking_37
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h

- name: test_branch_ose_check_and_verify_tasks_36
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_conformance_36
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_integration_and_end_to_end_36
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
- name: test_branch_ose_networking_36
  agent: jenkins
  labels:
    master: ci.dev.openshift.redhat.com
  interval: 4h
