---
openshift_azure_clusterid: magentaci
openshift_azure_resource_location: eastus

openshift_azure_base_image_ns: opstest

openshift_deployment_type: openshift-enterprise

openshift_azure_vm_admin_username: openshift
ansible_ssh_user: "{{ openshift_azure_vm_admin_username }}"
ansible_ssh_private_key_file: '~/.ssh/id_rsa'
become: true

openshift_master_bootstrap_enabled: true
openshift_master_fire_handlers: false
openshift_master_systemd_enable: no
openshift_is_containerized: false

openshift_azure_vm_ssh_public_keys:
- path: "/home/{{ openshift_azure_vm_admin_username }}/.ssh/authorized_keys"
  key_data: "{{ lookup('file', '~/.ssh/id_rsa.pub') }}"

openshift_azure_vm_data_disks:
- lun: 0
  managed_disk_type: Premium_LRS
  disk_size_gb: 200
  storage_container_name: "{{ openshift_azure_storage_account_name }}"
  storage_account_name: "{{ openshift_azure_storage_account_name }}"

openshift_azure_use_cloud_init: false
openshift_cloudprovider_kind: azure

openshift_docker_additional_registries: registry.access.redhat.com,registry.reg-aws.openshift.com:443

container_runtime_docker_storage_type: overlay2
container_runtime_docker_storage_setup_device: /dev/sdc

openshift_azure_acsengine_template_dns_prefix: "{{ openshift_azure_prefix }}-{{ openshift_azure_clusterid }}"
openshift_azure_acsengine_template_image_name: "{{ openshift_azure_base_image }}"
openshift_azure_acsengine_template_image_rg: "{{ openshift_azure_base_image_ns }}"

openshift_azure_acsengine_urls:
- "http://acs-engine-build-acs-engine-build.svc.ci.openshift.org/acs-engine"
- "http://acs-engine-build-acs-engine-build.svc.ci.openshift.org/openshift.json"

openshift_azure_acsengine_template_edits:
# azProfile
- key: properties.azProfile.tenantId
  value: "{{ openshift_azure_tenant_id }}"
- key: properties.azProfile.subscriptionId
  value: "{{ openshift_azure_subscription_id }}"
- key: properties.azProfile.resourceGroup
  value: "{{ openshift_azure_resource_group_name }}"
- key: properties.azProfile.location
  value: "{{ openshift_azure_resource_location }}"
# masterProfile
- key: properties.masterProfile.dnsPrefix
  value: "{{ openshift_azure_acsengine_template_dns_prefix }}"
- key: properties.masterProfile.imageReference.name
  value: "{{ openshift_azure_acsengine_template_image_name }}"
- key: properties.masterProfile.imageReference.resourceGroup
  value: "{{ openshift_azure_acsengine_template_image_rg }}"
# agentpool compute
- key: properties.agentPoolProfiles[0].imageReference.name
  value: "{{ openshift_azure_acsengine_template_image_name }}"
- key: properties.agentPoolProfiles[0].imageReference.resourceGroup
  value: "{{ openshift_azure_acsengine_template_image_rg }}"
# agentpool infra
- key: properties.agentPoolProfiles[1].imageReference.name
  value: "{{ openshift_azure_acsengine_template_image_name }}"
- key: properties.agentPoolProfiles[1].imageReference.resourceGroup
  value: "{{ openshift_azure_acsengine_template_image_rg }}"
# linuxprofile
- key: properties.linuxProfile.adminUsername
  value: "{{ openshift_azure_vm_admin_username | default('openshift') }}"
- key: properties.linuxProfile.ssh.publicKeys[0].keyData
  value: "{{ openshift_azure_vm_ssh_public_keys[0].key_data }}"
# serviceprincipal
- key: properties.servicePrincipalProfile.clientId
  value: "{{ openshift_azure_client_id }}"
- key: properties.servicePrincipalProfile.secret
  value: "{{ openshift_azure_service_secret }}"
