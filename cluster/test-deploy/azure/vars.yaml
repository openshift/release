---
openshift_azure_resource_location: eastus

openshift_azure_base_image_ns: opstest

openshift_deployment_type: openshift-enterprise

openshift_azure_vm_admin_username: openshift
ansible_ssh_user: "{{ openshift_azure_vm_admin_username }}"
ansible_ssh_private_key_file: '~/.ssh/id_rsa'
become: true

openshift_master_bootstrap_enabled: true
openshift_master_fire_handlers: false
openshift_master_systemd_enable: no
openshift_is_containerized: false

openshift_azure_vm_ssh_public_keys:
- path: "/home/{{ openshift_azure_vm_admin_username }}/.ssh/authorized_keys"
  key_data: "{{ lookup('file', '~/.ssh/id_rsa.pub') }}"

openshift_azure_vm_data_disks:
- lun: 0
  managed_disk_type: Premium_LRS
  disk_size_gb: 200
  storage_container_name: "{{ openshift_azure_storage_account_name }}"
  storage_account_name: "{{ openshift_azure_storage_account_name }}"

openshift_azure_use_cloud_init: false
openshift_cloudprovider_kind: azure

openshift_docker_additional_registries: registry.access.redhat.com,registry.reg-aws.openshift.com:443

container_runtime_docker_storage_type: overlay2
container_runtime_docker_storage_setup_device: /dev/sdc

openshift_azure_acsengine_template_dns_prefix: "{{ openshift_azure_prefix }}-{{ openshift_azure_clusterid }}"
openshift_azure_acsengine_template_image_name: "{{ openshift_azure_image }}"
openshift_azure_acsengine_template_image_rg: "{{ openshift_azure_resource_group_name }}"
openshift_azure_acsengine_template_cluster_username: demo
openshift_azure_acsengine_template_cluster_password: demo

openshift_azure_acsengine_urls:
- "http://acs-engine-build-acs-engine-build.svc.ci.openshift.org/acs-engine"
- "http://acs-engine-build-acs-engine-build.svc.ci.openshift.org/openshift.json"

openshift_azure_acsengine_template_edits:
# orchestratorProfile
- key: properties.orchestratorProfile.openShiftConfig.clusterUsername
  value: "{{ openshift_azure_acsengine_template_cluster_username }}"
- key: properties.orchestratorProfile.openShiftConfig.clusterPassword
  value: "{{ openshift_azure_acsengine_template_cluster_password }}"
# azProfile
- key: properties.azProfile.tenantId
  value: "{{ openshift_azure_tenant_id }}"
- key: properties.azProfile.subscriptionId
  value: "{{ openshift_azure_subscription_id }}"
- key: properties.azProfile.resourceGroup
  value: "{{ openshift_azure_resource_group_name }}"
- key: properties.azProfile.location
  value: "{{ openshift_azure_resource_location }}"
# masterProfile
- key: properties.masterProfile.dnsPrefix
  value: "{{ openshift_azure_acsengine_template_dns_prefix }}"
- key: properties.masterProfile.imageReference.name
  value: "{{ openshift_azure_acsengine_template_image_name }}"
- key: properties.masterProfile.imageReference.resourceGroup
  value: "{{ openshift_azure_acsengine_template_image_rg }}"
# agentpool compute
- key: properties.agentPoolProfiles[0].imageReference.name
  value: "{{ openshift_azure_acsengine_template_image_name }}"
- key: properties.agentPoolProfiles[0].imageReference.resourceGroup
  value: "{{ openshift_azure_acsengine_template_image_rg }}"
# agentpool infra
- key: properties.agentPoolProfiles[1].imageReference.name
  value: "{{ openshift_azure_acsengine_template_image_name }}"
- key: properties.agentPoolProfiles[1].imageReference.resourceGroup
  value: "{{ openshift_azure_acsengine_template_image_rg }}"
# linuxprofile
- key: properties.linuxProfile.adminUsername
  value: "{{ openshift_azure_vm_admin_username | default('openshift') }}"
- key: properties.linuxProfile.ssh.publicKeys[0].keyData
  value: "{{ openshift_azure_vm_ssh_public_keys[0].key_data }}"
# serviceprincipal
- key: properties.servicePrincipalProfile.clientId
  value: "{{ openshift_azure_client_id }}"
- key: properties.servicePrincipalProfile.secret
  value: "{{ openshift_azure_service_secret }}"


openshift_additional_repos_rhel_default:
  baseurl: 'https://mirror.openshift.com/enterprise/enterprise-3.9/latest/x86_64/os/'
  enabled: yes
  gpgcheck: no
  gpgkey: 'https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-release https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-beta https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-openshifthosted'
  id: openshift-repo
  name: openshift-repo
  sslclientcert: /var/lib/yum/client-cert.pem
  sslclientkey: /var/lib/yum/client-key.pem
  sslverify: no

openshift_additional_repos_rhel_test:
  baseurl: '{{ openshift_test_repo | default("") }}'
  enabled: yes
  gpgcheck: no
  id: openshift-test-repo
  name: openshift-test-repo

openshift_additional_repos_rhel:
- '{{ openshift_additional_repos_rhel_test if openshift_test_repo is defined else openshift_additional_repos_rhel_default }}'

- baseurl: 'https://mirror.ops.rhcloud.com/enterprise/rhel/rhel-7-fast-datapath-rpms/'
  description: 'Fastdata provides the official builds of OVS OpenShift supports'
  enabled: True
  gpgcheck: False
  gpgkey: 'https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-release https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-beta https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-openshifthosted'
  name: fastdata-ovs
  sslclientcert: /var/lib/yum/client-cert.pem
  sslclientkey: /var/lib/yum/client-key.pem
  sslverify: False

- name: rhel-server-ansible
  id: rhel-server-ansible
  description: "Red Hat Enterprise Linux 7 - ansible"
  baseurl: 'https://mirror.openshift.com/enterprise/rhel/rhel-7-server-ansible-2.4-rpms/'
  enabled: yes
  gpgcheck: yes
  sslverify: no
  sslclientcert: "/var/lib/yum/client-cert.pem"
  sslclientkey: "/var/lib/yum/client-key.pem"
  gpgkey: "https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-release https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-beta https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-openshifthosted"

- name: rhel-server-extras
  id: rhel-server-extras
  description: "Red Hat Enterprise Linux 7 - Extras"
  baseurl: 'https://mirror.ops.rhcloud.com/libra/rhui-rhel-server-7-extras/'
  enabled: yes
  gpgcheck: yes
  sslverify: no
  sslclientcert: "/var/lib/yum/client-cert.pem"
  sslclientkey: "/var/lib/yum/client-key.pem"
  gpgkey: "https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-release https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-beta https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-openshifthosted"

- name: rhel-server-releases
  id: rhel-server-releases
  description: "Red Hat Enterprise Linux 7"
  baseurl: 'https://mirror.ops.rhcloud.com/libra/rhui-rhel-server-7-releases/'
  enabled: yes
  gpgcheck: yes
  sslverify: no
  sslclientcert: "/var/lib/yum/client-cert.pem"
  sslclientkey: "/var/lib/yum/client-key.pem"
  gpgkey: "https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-release https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-beta https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-openshifthosted"

- name: rhel-server-releases-optional
  id: rhel-server-releases
  description: "Red Hat Enterprise Linux 7 - Optional"
  baseurl: 'https://mirror.ops.rhcloud.com/libra/rhui-rhel-server-7-releases-optional/'
  enabled: yes
  gpgcheck: yes
  sslverify: no
  sslclientcert: "/var/lib/yum/client-cert.pem"
  sslclientkey: "/var/lib/yum/client-key.pem"
  gpgkey: "https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-release https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-beta https://mirror.ops.rhcloud.com/libra/keys/RPM-GPG-KEY-redhat-openshifthosted"


openshift_additional_repos_centos_default:
  name: origin-pr
  baseurl: 'https://storage.googleapis.com/origin-ci-test/logs/test_branch_origin_extended_conformance_gce_39/23/artifacts/rpms'
  enabled: 1
  gpgcheck: 0

openshift_additional_repos_centos_test:
  baseurl: '{{ openshift_test_repo | default("") }}'
  enabled: 1
  gpgcheck: 0
  id: openshift-test-repo
  name: openshift-test-repo

openshift_additional_repos_centos:
- '{{ openshift_additional_repos_centos_test if openshift_test_repo is defined else openshift_additional_repos_centos_default }}'

- name: origin-pr-dependencies
  baseurl: 'http://mirror.centos.org/centos/7/paas/x86_64/openshift-origin/'
  enabled: 1
  gpgcheck: 0


openshift_additional_repos: '{{ openshift_additional_repos_rhel if openshift_deployment_type == "openshift-enterprise" else openshift_additional_repos_centos }}'
