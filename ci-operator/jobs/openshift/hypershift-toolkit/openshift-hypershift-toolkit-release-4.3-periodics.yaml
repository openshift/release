periodics:
- agent: kubernetes
  decorate: true
  interval: 24h
  name: periodic-ibmcloud-cluster-create
  spec:
    containers:
    - args:
      - --artifact-dir=$(ARTIFACTS)
      - --branch=release-4.3
      - --give-pr-author-access-to-namespace=true
      - --org=openshift
      - --repo=hypershift-toolkit
      - --resolver-address=http://ci-operator-configresolver-ci.svc.ci.openshift.org
      - --secret-dir=/etc/ibm-gate-test-secrets
      - --sentry-dsn-path=/etc/sentry-dsn/ci-operator
      - --target=create-cluster
      command:
      - ci-operator
      env:
      - name: CONFIG_SPEC
        valueFrom:
          configMapKeyRef:
            key: openshift-hypershift-toolkit-release-4.3-ibm.yaml
            name: ci-operator-misc-configs
      - name: OPENSHIFT_BUILD_NAMESPACE
        valueFrom:
          fieldRef:
            fieldPath: metadata.namespace
      image: ci-operator:latest
      imagePullPolicy: Always
      name: ""
      resources:
        requests:
          cpu: 10m
      volumeMounts:
      - mountPath: /etc/ibm-gate-test-secrets
        name: ibm-gate-test-secrets
        readOnly: true
      - mountPath: /etc/sentry-dsn
        name: sentry-dsn
        readOnly: true
    serviceAccountName: ci-operator
