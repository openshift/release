build_root:
  image_stream_tag:
    name: release
    namespace: openshift
    tag: golang-1.22
  use_build_cache: true
releases:
  latest:
    release:
      architecture: amd64
      channel: fast
      version: "4.15"
resources:
  '*':
    limits:
      cpu: "2"
      memory: 5Gi
    requests:
      cpu: "2"
      memory: 2Gi
tests:
- as: e2e-ocp-helm
  cluster_claim:
    architecture: amd64
    cloud: aws
    labels:
      region: us-east-2
    owner: rhdh
    product: ocp
    timeout: 1h0m0s
    version: "4.18"
  skip_if_only_changed: ^docs/|showcase-docs/|^\.changeset/|CONTRIBUTING\.md|OWNERS|README\.md|USAGE_DATA\.md|^scripts/|^\.github/|\.threatmodel/|^ui/|\.md|\\.mdc|\\.toml$
  steps:
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - chain: gather
    test:
    - ref: redhat-developer-rhdh-ocp-helm
    workflow: generic-claim
- always_run: false
  as: e2e-ocp-helm-nightly
  cluster_claim:
    architecture: amd64
    cloud: aws
    labels:
      region: us-east-2
    owner: rhdh
    product: ocp
    timeout: 1h0m0s
    version: "4.18"
  cron: 0 7 * * *
  optional: true
  presubmit: true
  steps:
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - ref: redhat-developer-rhdh-send-alert
    - chain: gather
    test:
    - ref: redhat-developer-rhdh-ocp-helm-nightly
    workflow: generic-claim
- always_run: false
  as: e2e-ocp-v4-17-helm-nightly
  cluster_claim:
    architecture: amd64
    cloud: aws
    labels:
      region: us-east-2
    owner: rhdh
    product: ocp
    timeout: 1h0m0s
    version: "4.17"
  cron: 0 9 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    env:
      OC_CLIENT_VERSION: stable-4.16
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - ref: redhat-developer-rhdh-send-alert
    - chain: gather
    test:
    - ref: redhat-developer-rhdh-ocp-helm-nightly
    workflow: generic-claim
- always_run: false
  as: e2e-ocp-v4-19-helm-nightly
  cluster_claim:
    architecture: amd64
    cloud: aws
    labels:
      region: us-east-2
    owner: rhdh
    product: ocp
    timeout: 1h0m0s
    version: "4.19"
  cron: 0 8 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    env:
      OC_CLIENT_VERSION: stable-4.19
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - ref: redhat-developer-rhdh-send-alert
    - chain: gather
    test:
    - ref: redhat-developer-rhdh-ocp-helm-nightly
    workflow: generic-claim
- always_run: false
  as: e2e-aks-helm-nightly
  cron: 50 6 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - ref: redhat-developer-rhdh-send-alert
    - ref: redhat-developer-rhdh-aks-mapt-destroy
    test:
    - ref: redhat-developer-rhdh-aks-helm-nightly
    workflow: redhat-developer-rhdh-aks-mapt
- always_run: false
  as: e2e-aks-operator-nightly
  cron: 0 7 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - ref: redhat-developer-rhdh-send-alert
    - ref: redhat-developer-rhdh-aks-mapt-destroy
    test:
    - ref: redhat-developer-rhdh-aks-operator-nightly
    workflow: redhat-developer-rhdh-aks-mapt
- always_run: false
  as: e2e-eks-helm-nightly
  cron: 0 7 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - ref: redhat-developer-rhdh-send-alert
    - ref: redhat-developer-rhdh-eks-mapt-destroy
    test:
    - ref: redhat-developer-rhdh-eks-helm-nightly
    workflow: redhat-developer-rhdh-eks-mapt
- always_run: false
  as: e2e-eks-operator-nightly
  cron: 0 7 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - ref: redhat-developer-rhdh-send-alert
    - ref: redhat-developer-rhdh-eks-mapt-destroy
    test:
    - ref: redhat-developer-rhdh-eks-operator-nightly
    workflow: redhat-developer-rhdh-eks-mapt
- always_run: false
  as: e2e-gke-helm-nightly
  cron: 0 7 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - ref: redhat-developer-rhdh-send-alert
    test:
    - ref: redhat-developer-rhdh-gke-helm-nightly
- always_run: false
  as: e2e-gke-operator-nightly
  cron: 0 9 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - ref: redhat-developer-rhdh-send-alert
    test:
    - ref: redhat-developer-rhdh-gke-operator-nightly
- always_run: false
  as: e2e-ocp-operator-nightly
  cluster_claim:
    architecture: amd64
    cloud: aws
    labels:
      region: us-east-2
    owner: rhdh
    product: ocp
    timeout: 1h0m0s
    version: "4.18"
  cron: 0 8 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - ref: redhat-developer-rhdh-send-alert
    - chain: gather
    test:
    - ref: redhat-developer-rhdh-ocp-operator-nightly
    workflow: generic-claim
- always_run: false
  as: cleanup-mapt-destroy-orphaned-aks-clusters
  cron: 0 2 * * SUN
  optional: true
  presubmit: true
  steps:
    pre:
    - ref: redhat-developer-rhdh-aks-mapt-orphaned-get
    test:
    - ref: redhat-developer-rhdh-aks-mapt-orphaned-destroy
- always_run: false
  as: cleanup-mapt-destroy-orphaned-eks-clusters
  cron: 0 2 * * SUN
  optional: true
  presubmit: true
  steps:
    pre:
    - ref: redhat-developer-rhdh-eks-mapt-orphaned-get
    test:
    - ref: redhat-developer-rhdh-eks-mapt-orphaned-destroy
- always_run: false
  as: e2e-osd-gcp-helm-nightly
  cron: 0 10 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    env:
      OSD_VERSION: 4.17.12
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - ref: redhat-developer-rhdh-send-alert
    - ref: redhat-developer-rhdh-osd-gcp-claim-cluster-delete
    test:
    - ref: redhat-developer-rhdh-osd-gcp-helm-nightly
    workflow: redhat-developer-rhdh-osd-gcp-claim-cluster
  timeout: 3h40m0s
- always_run: false
  as: e2e-osd-gcp-operator-nightly
  cron: 0 8 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    env:
      OSD_VERSION: 4.17.12
    post:
    - ref: redhat-developer-rhdh-send-data-router
    - ref: redhat-developer-rhdh-send-alert
    - ref: redhat-developer-rhdh-osd-gcp-claim-cluster-delete
    test:
    - ref: redhat-developer-rhdh-osd-gcp-helm-nightly
    workflow: redhat-developer-rhdh-osd-gcp-claim-cluster
  timeout: 3h40m0s
- as: cleanup-osd-gcp-cluster
  cron: 0 17 * * *
  steps:
    test:
    - ref: redhat-developer-rhdh-osd-gcp-claim-cluster-cleanup
  timeout: 1h0m0s
- always_run: false
  as: e2e-ocp-operator-auth-providers-nightly
  cluster_claim:
    architecture: amd64
    cloud: aws
    labels:
      region: us-east-2
    owner: rhdh
    product: ocp
    timeout: 1h0m0s
    version: "4.18"
  cron: 0 7 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    test:
    - ref: redhat-developer-rhdh-ocp-helm-nightly
    workflow: generic-claim
- always_run: false
  as: e2e-ocp-helm-upgrade-nightly
  cluster_claim:
    architecture: amd64
    cloud: aws
    labels:
      region: us-east-2
    owner: rhdh
    product: ocp
    timeout: 1h0m0s
    version: "4.18"
  cron: 0 8 * * TUE,THU,SAT,SUN
  optional: true
  presubmit: true
  steps:
    test:
    - ref: redhat-developer-rhdh-ocp-helm-upgrade-nightly
    workflow: generic-claim
- always_run: false
  as: e2e-ocp-helm-sealights-nightly
  cluster_claim:
    architecture: amd64
    cloud: aws
    labels:
      region: us-east-2
    owner: rhdh
    product: ocp
    timeout: 1h0m0s
    version: "4.18"
  cron: 0 7 * * *
  optional: true
  presubmit: true
  steps:
    test:
    - ref: redhat-developer-rhdh-ocp-helm-nightly
    workflow: generic-claim
zz_generated_metadata:
  branch: main
  org: redhat-developer
  repo: rhdh
