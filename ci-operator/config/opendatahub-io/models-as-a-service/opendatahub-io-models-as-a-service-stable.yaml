build_root:
  project_image:
    dockerfile_literal: |-
      FROM registry.access.redhat.com/ubi9/go-toolset:1.25
      USER 0
      RUN yum install -y --nodocs --allowerasing \
        jq httpd-tools \
        python3.12 python3.12-pip python3.12-devel
      RUN curl -s "https://raw.githubusercontent.com/kubernetes-sigs/kustomize/master/hack/install_kustomize.sh" | bash
      RUN mv kustomize /usr/local/bin/
      RUN yum clean all && rm -rf /var/cache/yum
      RUN ln -s /cli/oc /usr/bin/kubectl
      RUN ln -s /usr/bin/python3 /usr/bin/python
images:
- context_dir: maas-api/
  dockerfile_path: Dockerfile
  to: maas-api
- context_dir: maas-controller/
  dockerfile_path: Dockerfile
  to: maas-controller
promotion:
  to:
  - namespace: opendatahub-io
    tag: stable
releases:
  latest:
    release:
      architecture: multi
      channel: stable
      version: "4.19"
resources:
  '*':
    limits:
      memory: 4Gi
    requests:
      cpu: 100m
      memory: 200Mi
tests:
- always_run: false
  as: e2e-test-maas-api
  skip_if_only_changed: ^docs/|\.md$|^(?:.*/)?(?:\.gitignore|OWNERS|PROJECT|LICENSE)$|^\.github/
  steps:
    cluster_profile: aws-opendatahub
    env:
      BASE_DOMAIN: openshift-ci-aws.rhaiseng.com
      HYPERSHIFT_AWS_REGION: us-west-2
      HYPERSHIFT_NODE_COUNT: "3"
    test:
    - ref: idp-htpasswd
    - as: e2e-maas-api-openshift
      cli: latest
      commands: ./test/e2e/scripts/prow_run_smoke_test.sh
      dependencies:
      - env: MAAS_API_IMAGE
        name: maas-api
      from: src
      resources:
        requests:
          cpu: 500m
          memory: 512Mi
      timeout: 15m0s
    workflow: hypershift-hostedcluster-workflow
- always_run: false
  as: pr-image-mirror-maas-api
  skip_if_only_changed: ^docs/|\.md$|^(?:.*/)?(?:\.gitignore|OWNERS|PROJECT|LICENSE)$|^\.github/
  steps:
    dependencies:
      SOURCE_IMAGE_REF: maas-api
    env:
      IMAGE_REPO: maas-api
    workflow: opendatahub-io-ci-image-mirror
- always_run: false
  as: stable-image-mirror-maas-api
  postsubmit: true
  skip_if_only_changed: ^docs/|\.md$|^(?:.*/)?(?:\.gitignore|OWNERS|PROJECT|LICENSE)$|^\.github/
  steps:
    dependencies:
      SOURCE_IMAGE_REF: maas-api
    env:
      IMAGE_REPO: maas-api
      RELEASE_VERSION: stable
    workflow: opendatahub-io-ci-image-mirror
- always_run: false
  as: pr-image-mirror-maas-controller
  skip_if_only_changed: ^docs/|\.md$|^(?:.*/)?(?:\.gitignore|OWNERS|PROJECT|LICENSE)$|^\.github/
  steps:
    dependencies:
      SOURCE_IMAGE_REF: maas-controller
    env:
      IMAGE_REPO: maas-controller
    workflow: opendatahub-io-ci-image-mirror
- always_run: false
  as: stable-image-mirror-maas-controller
  postsubmit: true
  skip_if_only_changed: ^docs/|\.md$|^(?:.*/)?(?:\.gitignore|OWNERS|PROJECT|LICENSE)$|^\.github/
  steps:
    dependencies:
      SOURCE_IMAGE_REF: maas-controller
    env:
      IMAGE_REPO: maas-controller
      RELEASE_VERSION: stable
    workflow: opendatahub-io-ci-image-mirror
zz_generated_metadata:
  branch: stable
  org: opendatahub-io
  repo: models-as-a-service
