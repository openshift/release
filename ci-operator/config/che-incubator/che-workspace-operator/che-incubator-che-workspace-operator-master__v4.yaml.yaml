base_images:
  base:
    name: "4.4"
    namespace: ocp
    tag: base
  cli:
    name: "4.4"
    namespace: ocp
    tag: cli
build_root:
  image_stream_tag:
    name: release
    namespace: openshift
    tag: golang-1.13
resources:
  '*':
    requests:
      cpu: 200m
      memory: 4Gi
tag_specification:
  name: "4.4"
  namespace: ocp
tests:
- as: openshift-web-terminal-e2e
  commands: |
    # Update CRDs
    oc apply -f https://raw.githubusercontent.com/devfile/kubernetes-api/master/deploy/crds/workspace.devfile.io_devworkspacetemplates_crd.yaml
    oc apply -f https://raw.githubusercontent.com/devfile/kubernetes-api/master/deploy/crds/workspace.devfile.io_devworkspaces_crd.yaml

    go mod tidy
    go mod vendor
    # Output of e2e binary
    export OUT_FILE=bin/workspace-controller-e2e

    # Compile e2e binary tests
    CGO_ENABLED=0 go test -v -c -o ${OUT_FILE} ./test/e2e/cmd/workspaces_test.go

    # Launch tests
    ./bin/workspace-controller-e2e
  openshift_installer_src:
    cluster_profile: aws
zz_generated_metadata:
  branch: master
  org: che-incubator
  repo: che-workspace-operator
  variant: v4.yaml
