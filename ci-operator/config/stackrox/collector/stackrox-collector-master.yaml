base_images:
  centos:
    name: centos
    namespace: origin
    tag: stream8
build_root:
  image_stream_tag:
    name: release
    namespace: openshift
    tag: golang-1.17
images:
- dockerfile_literal: |-
    FROM centos:8
    RUN yum install -y git
    RUN git clone --recurse-submodules https://github.com/stackrox/collector.git
    RUN yum makecache
    RUN yum install gcc gcc-c++ -y
    RUN yum install yum-utils -y
    RUN yum-config-manager --enable extras
    RUN yum makecache
    RUN yum install clang -y
    RUN yum install git-clang-format -y
    RUN clang_version="$(yum --showduplicates list git-clang-format | grep 13.0.1-1 | tail -1)"; \
    yum install git-clang-format-"$clang_version"
  from: centos
  to: test-image
resources:
  '*':
    limits:
      memory: 4Gi
    requests:
      cpu: 100m
      memory: 200Mi
tests:
- as: lint
  commands: make -C collector/collector check
  container:
    from: test-image
zz_generated_metadata:
  branch: master
  org: stackrox
  repo: collector
