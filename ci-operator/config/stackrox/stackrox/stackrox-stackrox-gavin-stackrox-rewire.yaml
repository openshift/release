base_images:
  base-build:
    name: apollo-ci
    namespace: stackrox
    tag: stackrox-build-0.3.44-2-ga2b83e99da
  base-test:
    name: apollo-ci
    namespace: stackrox
    tag: stackrox-test-0.3.44-2-ga2b83e99da
build_root:
  image_stream_tag:
    name: release
    namespace: openshift
    tag: golang-1.17
images:
- build_args:
  - name: ROX_PRODUCT_BRANDING
    value: RHACS_BRANDING
  dockerfile_path: .openshift-ci/build/Dockerfile.build-main-and-bundle
  to: main-bundle
- build_args:
  - name: ROX_PRODUCT_BRANDING
    value: RHACS_BRANDING
  dockerfile_path: Dockerfile.gen
  inputs:
    main-bundle:
      paths:
      - destination_dir: .
        source_path: /go/src/github.com/stackrox/stackrox/image/rhel/.
  to: main
resources:
  '*':
    requests:
      cpu: 2000m
      memory: 8000Mi
tests:
- as: go-unit-tests-base-build
  commands: .openshift-ci/dispatch.sh go-unit-tests
  container:
    clone: true
    from: base-build
- as: style-base-test
  commands: .openshift-ci/dispatch.sh style-checks
  container:
    clone: true
    from: base-test
- as: gke-qa-e2e-tests
  commands: .openshift-ci/dispatch.sh gke-qa-e2e-tests
  container:
    clone: true
    from: base-test
  secrets:
  - mount_path: /tmp/vault/stackrox-stackrox-base
    name: stackrox-stackrox-base
  - mount_path: /tmp/vault/stackrox-stackrox-e2e-tests-v2
    name: stackrox-stackrox-e2e-tests-v2
zz_generated_metadata:
  branch: gavin-stackrox-rewire
  org: stackrox
  repo: stackrox
