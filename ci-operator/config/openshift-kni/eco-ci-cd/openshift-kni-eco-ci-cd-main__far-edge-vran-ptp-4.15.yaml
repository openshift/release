base_images:
  base:
    name: "4.14"
    namespace: ocp
    tag: base
build_root:
  project_image:
    dockerfile_literal: |
      FROM registry.ci.openshift.org/openshift/release:golang-1.19
      ENV HOME /output
      RUN yum install -y ansible openconnect && \
          yum clean all && \
          rm -rf /var/cache/yum/* && \
          wget https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.11.9/openshift-client-linux.tar.gz && \
          tar -zxvf openshift-client-linux.tar.gz && \
          mv oc /usr/local/bin/ && \
          mv kubectl /usr/local/bin/ && \
          rm -f openshift-client-linux.tar.gz && \
          mkdir /output && \
          chmod -R g+rwx /output && \
          chmod g+w /etc/passwd && \
          echo 'echo default:x:$(id -u):$(id -g):Default Application User:/output:/sbin/nologin\ >> /etc/passwd' > /output/fix_uid.sh && \
          chmod g+rwx /output/fix_uid.sh
          ansible-galaxy collection install redhatci.ocp --ignore-certs
resources:
  '*':
    limits:
      memory: 4Gi
    requests:
      cpu: 100m
      memory: 200Mi
tests:
- as: eco-ci-cd
  cluster: build05
  cron: 00 13 * * 1
  steps:
    env:
      BYPASS_OLM_SYNC: "false"
      CNF_POLARION_BRANCH: enabling_updating_exsisting_test_run
      CNF_POLARION_REPO: https://gitlab.cee.redhat.com/alugasi/cnf-polarion.git
      DEPLOY_DU: "true"
      DU_PULL_SPEC: quay.io/openshift-release-dev/ocp-release:4.15.14-x86_64
      DU_USE_NEXUS_CACHE: "false"
      LAUNCH_DESCRIPTION: telco ran tests
      LAUNCH_NAME: telco-ran
      LOCK_LBL_HOST: registry.kni-qe-44.lab.eng.tlv2.redhat.com
      MIRROR_SPOKE_OPERATOR_IMAGES: "true"
      OCP_EDGE_BRANCH: master
      OCP_EDGE_REPO: https://gitlab.cee.redhat.com/ocp-edge-qe/ocp-edge.git
      OLM_ANSIBLE_EXTRA_ARGS: ocp_minor_version%3A%20%2715%27%0Agitops_iib_override%3A%20registry.redhat.io%2Fredhat%2Fredhat-operator-index%3Av4.15%0Aacm_mce_downstream_snapshot%3A%20stable
      OLM_CATALOG_SOURCE: redhat-operators
      OLM_USE_NEXUS: "true"
      OPERATORS_LIST: topology-aware-lifecycle-manager
      RAN_HUB: "true"
      RAN_METRICS_FORMAL_TEST: "true"
      RAN_SPOKE: "true"
      SPOKE_NAME: helix39
      SPOKE_OPERATOR_IMAGES_SOURCE: brew
      TEST_DESCRIPTION: Telco QE PTP and RFC2544 test
      TEST_TYPE: oslat=1m
      UPLOAD_METRICS: "false"
      UPLOAD_XML_POLARION: "false"
      UPLOAD_XML_REPORT_PORTAL: "true"
      UPLOAD_XML_SPLUNK: "false"
      VERSION: "4.15"
      ZTP_POLICIES_REPO_BRANCH: helix39-4.15
      ZTP_SITECONFIG_REPO_BRANCH: helix39-4.15
      ZTP_VERSION: "4.15"
    test:
    - ref: telcov10n-functional-ocp-far-edge-vran-tests
    workflow: telcov10n-functional-far-edge-vran-ran-ptp
zz_generated_metadata:
  branch: main
  org: openshift-kni
  repo: eco-ci-cd
  variant: far-edge-vran-ptp-4.15
