binary_build_commands: GO_COMPLIANCE_INFO=0 make build
build_root:
  image_stream_tag:
    name: builder
    namespace: ocp
    tag: rhel-9-golang-1.24-openshift-4.20
images:
- dockerfile_literal: |
    FROM src
    RUN cat /etc/dnf/dnf.conf || true
    RUN rpm --import https://packages.microsoft.com/keys/microsoft.asc
    RUN dnf install -y https://packages.microsoft.com/config/rhel/9.0/packages-microsoft-prod.rpm
    RUN ln -s /etc/yum.repos.d/microsoft-prod.repo /etc/yum.repos.art/ci/
    RUN dnf install -y azure-cli libicu
  from: src
  to: src-plus-az
resources:
  '*':
    requests:
      cpu: 100m
      memory: 200Mi
  unit:
    requests:
      cpu: 1000m
      memory: 4Gi
tests:
- as: create-aro-hcp-in-integration
  cron: 0 */4 * * *
  steps:
    env:
      CLUSTER_NAME: periodic-integration-cluster
      CUSTOMER_RESOURCE_GROUP_PREFIX: periodic-integration-customer-rg
      LOCATION: uksouth
      SUBSCRIPTION: ARO SRE Team - INT (EA Subscription 3)
      TENANT_ID: 64dc69e4-d083-49fc-9569-ebece1dd1408
    post:
    - ref: aro-hcp-provision-aro-hcp-gather-extra
    - chain: aro-hcp-provision-teardown-cluster
    pre:
    - ref: aro-hcp-provision-azure-login
    - ref: aro-hcp-provision-generate-resource-group-name
    test:
    - chain: aro-hcp-provision-create-functional-cluster
- as: delete-expired-integration-resource-groups
  cron: 7,37 * * * *
  steps:
    env:
      SUBSCRIPTION: ARO SRE Team - INT (EA Subscription 3)
      TENANT_ID: 64dc69e4-d083-49fc-9569-ebece1dd1408
    pre:
    - ref: aro-hcp-provision-azure-login
    test:
    - ref: aro-hcp-provision-delete-all-expired-resource-groups
- as: integration-e2e-parallel
  cron: 0 */4 * * *
  steps:
    env:
      ARO_HCP_SUITE_NAME: integration/parallel
      SUBSCRIPTION: ARO SRE Team - INT (EA Subscription 3)
      TENANT_ID: 64dc69e4-d083-49fc-9569-ebece1dd1408
      LOCATION: uksouth
    pre:
    - ref: aro-hcp-provision-azure-login
    post:
    - ref: aro-hcp-provision-aro-hcp-gather-extra
    - chain: aro-hcp-provision-teardown-cluster
    test:
    - ref: aro-hcp-tests-run-aro-hcp-tests
- as: create-aro-hcp-in-stage
  cron: 0 */4 * * *
  steps:
    env:
      CLUSTER_NAME: periodic-stage-cluster
      CUSTOMER_RESOURCE_GROUP_PREFIX: periodic-stage-customer-rg
      LOCATION: uksouth
      SUBSCRIPTION: ARO HCP E2E - Staging
      TENANT_ID: 93b21e64-4824-439a-b893-46c9b2a51082
    post:
    - ref: aro-hcp-provision-aro-hcp-gather-extra
    - chain: aro-hcp-provision-teardown-cluster
    pre:
    - ref: aro-hcp-provision-azure-login
    - ref: aro-hcp-provision-generate-resource-group-name
    test:
    - chain: aro-hcp-provision-create-functional-cluster
- as: stage-e2e-parallel
  cron: 0 */4 * * *
  steps:
    env:
      ARO_HCP_SUITE_NAME: stage/parallel
      SUBSCRIPTION: ARO HCP E2E - Staging
      TENANT_ID: 93b21e64-4824-439a-b893-46c9b2a51082
      LOCATION: uksouth
    pre:
    - ref: aro-hcp-provision-azure-login
    post:
    - ref: aro-hcp-provision-aro-hcp-gather-extra
    - chain: aro-hcp-provision-teardown-cluster
    test:
    - ref: aro-hcp-tests-run-aro-hcp-tests
- as: delete-expired-stage-resource-groups
  cron: 7,37 * * * *
  steps:
    env:
      SUBSCRIPTION: ARO HCP E2E - Staging
      TENANT_ID: 93b21e64-4824-439a-b893-46c9b2a51082
    pre:
    - ref: aro-hcp-provision-azure-login
    test:
    - ref: aro-hcp-provision-delete-all-expired-resource-groups
- as: create-aro-hcp-in-prod-uksouth
  cron: 0 */4 * * *
  steps:
    env:
      CLUSTER_NAME: periodic-prod-uksouth-cluster
      CUSTOMER_RESOURCE_GROUP_PREFIX: periodic-prod-uksouth-customer-rg
      LOCATION: uksouth
      SUBSCRIPTION: ARO HCP E2E
      TENANT_ID: 93b21e64-4824-439a-b893-46c9b2a51082
    post:
    - ref: aro-hcp-provision-aro-hcp-gather-extra
    - chain: aro-hcp-provision-teardown-cluster
    pre:
    - ref: aro-hcp-provision-azure-login
    - ref: aro-hcp-provision-generate-resource-group-name
    test:
    - chain: aro-hcp-provision-create-functional-cluster
- as: prod-uksouth-e2e-parallel
  cron: 0 */4 * * *
  steps:
    env:
      ARO_HCP_SUITE_NAME: prod/parallel
      SUBSCRIPTION: ARO HCP E2E
      TENANT_ID: 93b21e64-4824-439a-b893-46c9b2a51082
      LOCATION: uksouth
    pre:
    - ref: aro-hcp-provision-azure-login
    post:
    - ref: aro-hcp-provision-aro-hcp-gather-extra
    - chain: aro-hcp-provision-teardown-cluster
    test:
    - ref: aro-hcp-tests-run-aro-hcp-tests
- as: delete-expired-prod-resource-groups
  cron: 7,37 * * * *
  steps:
    env:
      SUBSCRIPTION: ARO HCP E2E
      TENANT_ID: 93b21e64-4824-439a-b893-46c9b2a51082
    pre:
    - ref: aro-hcp-provision-azure-login
    test:
    - ref: aro-hcp-provision-delete-all-expired-resource-groups
- as: prod-brazilsouth-e2e-parallel
  cron: '@daily'
  steps:
    env:
      ARO_HCP_SUITE_NAME: prod/parallel
      SUBSCRIPTION: ARO HCP E2E
      TENANT_ID: 93b21e64-4824-439a-b893-46c9b2a51082
      LOCATION: brazilsouth
    pre:
    - ref: aro-hcp-provision-azure-login
    post:
    - ref: aro-hcp-provision-aro-hcp-gather-extra
    - chain: aro-hcp-provision-teardown-cluster
    test:
    - ref: aro-hcp-tests-run-aro-hcp-tests
- as: prod-centralindia-e2e-parallel
  cron: '@daily'
  steps:
    env:
      ARO_HCP_SUITE_NAME: prod/parallel
      SUBSCRIPTION: ARO HCP E2E
      TENANT_ID: 93b21e64-4824-439a-b893-46c9b2a51082
      LOCATION: centralindia
    pre:
    - ref: aro-hcp-provision-azure-login
    post:
    - ref: aro-hcp-provision-aro-hcp-gather-extra
    - chain: aro-hcp-provision-teardown-cluster
    test:
    - ref: aro-hcp-tests-run-aro-hcp-tests
- as: prod-e2e-parallel
  cron: 0 0 31 2 0
  steps:
    env:
      ARO_HCP_SUITE_NAME: prod/parallel
      SUBSCRIPTION: ARO HCP E2E
      TENANT_ID: 93b21e64-4824-439a-b893-46c9b2a51082
      LOCATION: uksouth
    pre:
    - ref: aro-hcp-provision-azure-login
    post:
    - ref: aro-hcp-provision-aro-hcp-gather-extra
    - chain: aro-hcp-provision-teardown-cluster
    test:
    - ref: aro-hcp-tests-run-aro-hcp-tests
zz_generated_metadata:
  branch: main
  org: Azure
  repo: ARO-HCP
  variant: periodic
