build_root:
  image_stream_tag:
    name: ci-tools-build-root
    namespace: ci
    tag: latest
images:
- dockerfile_literal: |
    FROM src as builder
    FROM quay.io/openshifttest/python:3.9

    LABEL vendor="Red Hat Inc." maintainer="OCP QE Team"

    RUN curl -sSL https://mirror.openshift.com/pub/openshift-v4/clients/ocp/stable/openshift-client-linux.tar.gz | tar -xvzf -  &&\
    mv oc /bin && mv kubectl /bin && apt-get update && apt-get install -y gettext-base uuid-runtime jq && \
    ln -s /bin/bash /usr/bin/bash && /usr/local/bin/python -m pip install --upgrade pip && pip install virtualenv jq

    COPY --from=builder /go/src/github.com/openshift-qe/ocp-qe-perfscale-ci /tmp/
  from: src
  to: repo-scripts
promotion:
  additional_images:
    repo-scripts: repo-scripts
  namespace: ci
  tag: latest
releases:
  latest:
    candidate:
      product: ocp
      stream: nightly
      version: "4.13"
resources:
  '*':
    requests:
      cpu: 100m
      memory: 200Mi
tests:
- as: code-check
  commands: pwd;ls -R /tmp/
  container:
    clone: true
    from: repo-scripts
  optional: true
- as: ocp-qe-perfscale-loaded-upgrade-gcp
  cron: 0 12 * * 1
  steps:
    cluster_profile: gcp-qe
    post:
    - chain: ipi-gcp-post
    pre:
    - chain: ipi-gcp-pre
    workflow: openshift-qe-loaded-upgrade
zz_generated_metadata:
  branch: main
  org: openshift-qe
  repo: ocp-qe-perfscale-ci
  variant: loaded-upgrade
