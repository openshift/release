binary_build_commands: |-
  pip install --requirement requirements.txt
  go build -o /bin/pretriage ./cmd/pretriage
build_root:
  image_stream_tag:
    name: builder
    namespace: ocp
    tag: rhel-8-golang-1.18-openshift-4.11
images:
- dockerfile_literal: FROM bin
  from: bin
  to: shiftstack-bugwatcher-image
resources:
  '*':
    limits:
      memory: 4Gi
    requests:
      cpu: 100m
      memory: 200Mi
test_binary_build_commands: pip install pycodestyle
tests:
- as: pep8
  commands: pycodestyle --verbose ./*.py
  container:
    from: test-bin
- as: go-vet
  commands: go vet ./...
  container:
    from: bin
- as: go-fmt
  commands: if [ "$(gofmt -s -l . | tee /dev/stderr | wc -l)" -gt 0 ]; then exit 1;
    fi
  container:
    from: src
- as: bugwatcher-doctext
  cron: 0 8 * * 1-5
  steps:
    test:
    - ref: shiftstack-bugwatcher-doctext
- as: bugwatcher-posttriage
  cron: 0 7 * * *
  steps:
    test:
    - ref: shiftstack-bugwatcher-posttriage
- as: bugwatcher-pretriage-bugzilla
  cron: '*/30 * * * *'
  steps:
    env:
      TICKETING_SYSTEM: bugzilla
    test:
    - ref: shiftstack-bugwatcher-pretriage
- as: bugwatcher-pretriage
  cron: '*/30 * * * *'
  steps:
    env:
      TICKETING_SYSTEM: jira
    test:
    - ref: shiftstack-bugwatcher-pretriage
zz_generated_metadata:
  branch: main
  org: shiftstack
  repo: bugwatcher
