base_images:
  assisted-service-mcp:
    name: assisted-chat-img
    namespace: edge-infrastructure
    tag: assisted-service-mcp
  rh-ecosystem-edge-assisted-chat-install-source:
    name: assisted-chat-img
    namespace: edge-infrastructure
    tag: rh-ecosystem-edge-assisted-chat-install
  rh-ecosystem-edge-assisted-chat-test:
    name: assisted-chat-img
    namespace: edge-infrastructure
    tag: rh-ecosystem-edge-assisted-chat-test
build_root:
  project_image:
    dockerfile_literal: |
      FROM registry.access.redhat.com/ubi9/python-312:latest
      USER 0:0
images:
- dockerfile_path: Containerfile
  to: rag-source
- dockerfile_literal: |
    FROM RUNTIME_IMAGE
    COPY --chown=1001:1001 --from=rag:test /all-mpnet-base-v2/ /app-root/all-mpnet-base-v2/
    COPY --chown=1001:1001 --from=rag:test /llama_stack_vector_db/ /app-root/llama_stack_vector_db/
  from: rh-ecosystem-edge-assisted-chat-install-source
  inputs:
    rag-source:
      as:
      - rag:test
  to: rh-ecosystem-edge-assisted-chat-install
releases:
  latest:
    integration:
      include_built_images: true
      name: "4.20"
      namespace: ocp
resources:
  '*':
    limits:
      memory: 4Gi
    requests:
      cpu: 100m
      memory: 200Mi
tests:
- always_run: true
  as: eval-test
  cluster_claim:
    architecture: amd64
    cloud: aws
    owner: rh-ecosystem-edge
    product: ocp
    timeout: 1h0m0s
    version: "4.17"
  optional: true
  steps:
    allow_best_effort_post_steps: true
    dependencies:
      ASSISTED_CHAT_IMG: rh-ecosystem-edge-assisted-chat-install
      ASSISTED_CHAT_TEST: rh-ecosystem-edge-assisted-chat-test
      ASSISTED_MCP_IMG: assisted-service-mcp
    workflow: rh-ecosystem-edge-assisted-chat
zz_generated_metadata:
  branch: main
  org: openshift-assisted
  repo: assisted-chat-rag
