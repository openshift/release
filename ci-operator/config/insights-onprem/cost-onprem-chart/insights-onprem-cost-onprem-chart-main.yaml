build_root:
  project_image:
    dockerfile_literal: |-
      FROM registry.access.redhat.com/ubi9/python-311
      USER root
      RUN mkdir -p /go/src && chmod -R 777 /go && \
          pip3 install --no-cache-dir pytest pyyaml requests && \
          curl -sL https://github.com/mikefarah/yq/releases/latest/download/yq_linux_amd64 -o /usr/local/bin/yq && \
          chmod +x /usr/local/bin/yq && \
          curl -sL https://get.helm.sh/helm-v3.13.0-linux-amd64.tar.gz | tar xz -C /tmp && \
          mv /tmp/linux-amd64/helm /usr/local/bin/helm && \
          curl -sL https://mirror.openshift.com/pub/openshift-v4/clients/ocp/stable/openshift-client-linux.tar.gz | tar xz -C /usr/local/bin oc kubectl
      RUN dnf install -y git && dnf clean all
      WORKDIR /go/src
releases:
  latest:
    release:
      architecture: amd64
      channel: fast
      version: "4.20"
resources:
  '*':
    limits:
      memory: 4Gi
    requests:
      cpu: 100m
      memory: 200Mi
tests:
- as: e2e
  cluster_claim:
    architecture: amd64
    cloud: aws
    owner: openshift-ci
    product: ocp
    timeout: 1h0m0s
    version: "4.20"
  steps:
    test:
    - ref: insights-onprem-minio-deploy
    - ref: insights-onprem-cost-onprem-chart-e2e
    workflow: insights-onprem-cost-onprem-chart-claim
zz_generated_metadata:
  branch: main
  org: insights-onprem
  repo: cost-onprem-chart
