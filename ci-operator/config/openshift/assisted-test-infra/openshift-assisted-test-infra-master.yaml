base_images:
  assisted-image-service:
    name: ocm-2.6
    namespace: edge-infrastructure
    tag: assisted-image-service
  assisted-installer:
    name: ocm-2.6
    namespace: edge-infrastructure
    tag: assisted-installer
  assisted-installer-agent:
    name: ocm-2.6
    namespace: edge-infrastructure
    tag: assisted-installer-agent
  assisted-installer-controller:
    name: ocm-2.6
    namespace: edge-infrastructure
    tag: assisted-installer-controller
  assisted-service:
    name: ocm-2.6
    namespace: edge-infrastructure
    tag: assisted-service
  dev-scripts:
    name: test
    namespace: ocp-kni
    tag: dev-scripts
  hypershift-operator:
    name: "4.11"
    namespace: ocp
    tag: hypershift-operator
build_root:
  from_repository: true
images:
- dockerfile_literal: |
    FROM base
    COPY . .
  from: src
  to: assisted-test-infra
- dockerfile_literal: |
    FROM dev-scripts
    RUN ansible-galaxy collection install community.general
    COPY . assisted-test-infra/
    RUN chgrp -R 0 assisted-test-infra && \
        chmod -R g=u assisted-test-infra
    WORKDIR assisted-test-infra/
  from: dev-scripts
  to: assisted-test-infra-dev-script
- dockerfile_path: Dockerfile.assisted-test-infra
  to: assisted-test-infra-internal
promotion:
  name: ocm-2.6
  namespace: edge-infrastructure
releases:
  initial:
    integration:
      name: "4.9"
      namespace: ocp
  latest:
    integration:
      include_built_images: true
      name: "4.9"
      namespace: ocp
  ocp-4-11:
    integration:
      name: "4.11"
      namespace: ocp
resources:
  '*':
    requests:
      cpu: 100m
      memory: 200Mi
tests:
- as: e2e-metal-assisted-kube-api-late-binding-single-node
  optional: true
  steps:
    cluster_profile: packet-assisted
    env:
      POST_INSTALL_COMMANDS: |
        export TEST_FUNC=test_late_binding_kube_api_sno
        export KUBECONFIG=$(find ${KUBECONFIG} -type f)
        make deploy_assisted_operator test_kube_api_parallel
    workflow: assisted-baremetal
- as: e2e-metal-assisted-kube-api-late-binding-single-node2
  optional: true
  steps:
    cluster_profile: packet-assisted
    env:
      POST_INSTALL_COMMANDS: |
        export TEST_FUNC=test_late_binding_kube_api_sno
        export KUBECONFIG=$(find ${KUBECONFIG} -type f)
        make deploy_assisted_operator test_kube_api_parallel
    workflow: assisted-baremetal
- as: e2e-metal-assisted-kube-api-late-binding-single-node3
  optional: true
  steps:
    cluster_profile: packet-assisted
    env:
      POST_INSTALL_COMMANDS: |
        export TEST_FUNC=test_late_binding_kube_api_sno
        export KUBECONFIG=$(find ${KUBECONFIG} -type f)
        make deploy_assisted_operator test_kube_api_parallel
    workflow: assisted-baremetal
- as: e2e-metal-assisted-kube-api-late-binding-single-node4
  optional: true
  steps:
    cluster_profile: packet-assisted
    env:
      POST_INSTALL_COMMANDS: |
        export TEST_FUNC=test_late_binding_kube_api_sno
        export KUBECONFIG=$(find ${KUBECONFIG} -type f)
        make deploy_assisted_operator test_kube_api_parallel
    workflow: assisted-baremetal
- as: e2e-metal-assisted-kube-api-late-binding-single-node5
  optional: true
  steps:
    cluster_profile: packet-assisted
    env:
      POST_INSTALL_COMMANDS: |
        export TEST_FUNC=test_late_binding_kube_api_sno
        export KUBECONFIG=$(find ${KUBECONFIG} -type f)
        make deploy_assisted_operator test_kube_api_parallel
    workflow: assisted-baremetal
- as: e2e-metal-assisted-kube-api-late-binding-single-node6
  optional: true
  steps:
    cluster_profile: packet-assisted
    env:
      POST_INSTALL_COMMANDS: |
        export TEST_FUNC=test_late_binding_kube_api_sno
        export KUBECONFIG=$(find ${KUBECONFIG} -type f)
        make deploy_assisted_operator test_kube_api_parallel
    workflow: assisted-baremetal
- as: e2e-metal-assisted-kube-api-late-binding-single-node7
  optional: true
  steps:
    cluster_profile: packet-assisted
    env:
      POST_INSTALL_COMMANDS: |
        export TEST_FUNC=test_late_binding_kube_api_sno
        export KUBECONFIG=$(find ${KUBECONFIG} -type f)
        make deploy_assisted_operator test_kube_api_parallel
    workflow: assisted-baremetal
- as: e2e-metal-assisted-kube-api-late-binding-single-node8
  optional: true
  steps:
    cluster_profile: packet-assisted
    env:
      POST_INSTALL_COMMANDS: |
        export TEST_FUNC=test_late_binding_kube_api_sno
        export KUBECONFIG=$(find ${KUBECONFIG} -type f)
        make deploy_assisted_operator test_kube_api_parallel
    workflow: assisted-baremetal
- as: e2e-metal-assisted-kube-api-late-binding-single-node9
  optional: true
  steps:
    cluster_profile: packet-assisted
    env:
      POST_INSTALL_COMMANDS: |
        export TEST_FUNC=test_late_binding_kube_api_sno
        export KUBECONFIG=$(find ${KUBECONFIG} -type f)
        make deploy_assisted_operator test_kube_api_parallel
    workflow: assisted-baremetal
zz_generated_metadata:
  branch: master
  org: openshift
  repo: assisted-test-infra
