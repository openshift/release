base_images:
  builder:
    name: builder
    namespace: ocp
    tag: rhel-9-golang-1.24-openshift-4.21
  ocp_4.21_base-rhel9:
    name: "4.21"
    namespace: ocp
    tag: base-rhel9
  tools:
    name: "4.21"
    namespace: ocp
    tag: tools
  upi-installer:
    name: "4.21"
    namespace: ocp
    tag: upi-installer
build_root:
  image_stream_tag:
    name: builder
    namespace: ocp
    tag: rhel-9-golang-1.24-openshift-4.21
releases:
  latest:
    candidate:
      product: ocp
      stream: nightly
      version: "4.21"
resources:
  '*':
    limits:
      memory: 4Gi
    requests:
      cpu: 100m
      memory: 200Mi
tests:
- as: default-catalog-consistency
  cron: 0 */4 * * *
  steps:
    test:
    - as: default-catalog-tests
      commands: |
        echo "Running Default Catalog Tests"
        cd openshift/default-catalog-consistency
        REGISTRY_AUTH_FILE=/var/run/secrets/ci-pull-credentials/.dockerconfigjson make test-catalog
      credentials:
      - collection: ""
        mount_path: /var/run/secrets/ci-pull-credentials
        name: ci-pull-credentials
        namespace: ci
      from: src
      resources:
        requests:
          cpu: 100m
- as: e2e-aws-ovn-techpreview-extended-f1
  cron: 12 4 * * *
  steps:
    cluster_profile: aws-3
    env:
      FEATURE_SET: TechPreviewNoUpgrade
      TEST_ARGS: --monitor=watch-namespaces
      TEST_SUITE: olmv1/extended/candidate/fast
    workflow: openshift-e2e-aws-ovn
- as: e2e-aws-ovn-extended-f2
  cron: 19 3 1-31/2 * *
  steps:
    cluster_profile: aws-2
    env:
      TEST_ARGS: --monitor=watch-namespaces
      TEST_SUITE: olmv1/extended/candidate/fast
    workflow: openshift-e2e-aws-ovn
- as: e2e-aws-ovn-techpreview-slow-extended-f3
  cron: 15 23 1-31/3 * *
  steps:
    cluster_profile: aws-3
    env:
      FEATURE_SET: TechPreviewNoUpgrade
      TEST_ARGS: --monitor=watch-namespaces
      TEST_SUITE: olmv1/extended/candidate/slow
    workflow: openshift-e2e-aws-ovn
- as: e2e-aws-ovn-slow-extended-f4
  cron: 23 7 1-31/4 * *
  steps:
    cluster_profile: aws-2
    env:
      TEST_ARGS: --monitor=watch-namespaces
      TEST_SUITE: olmv1/extended/candidate/slow
    workflow: openshift-e2e-aws-ovn
- as: e2e-gcp-ovn-ipi-disconnected-techpreview-extended-f1
  cron: 9 15 * * *
  steps:
    cluster_profile: gcp
    env:
      ENABLE_IDMS: "yes"
      FEATURE_SET: TechPreviewNoUpgrade
      TEST_ARGS: --monitor=watch-namespaces
      TEST_SUITE: olmv1/extended/candidate/function
    post:
    - chain: cucushift-installer-rehearse-gcp-ipi-disconnected-deprovision
    pre:
    - chain: cucushift-installer-rehearse-gcp-ipi-disconnected-provision
    test:
    - ref: openshift-extended-olm-test-disconnected
- as: e2e-gcp-ovn-ipi-disconnected-extended-f2
  cron: 13 15 1-31/2 * *
  steps:
    cluster_profile: gcp
    env:
      ENABLE_IDMS: "yes"
      TEST_ARGS: --monitor=watch-namespaces
      TEST_SUITE: olmv1/extended/candidate/function
    post:
    - chain: cucushift-installer-rehearse-gcp-ipi-disconnected-deprovision
    pre:
    - chain: cucushift-installer-rehearse-gcp-ipi-disconnected-provision
    test:
    - ref: openshift-extended-olm-test-disconnected
zz_generated_metadata:
  branch: release-4.21
  org: openshift
  repo: operator-framework-operator-controller
  variant: periodics
