# Release jobs

The jobs in this directory automate verifying the integration of CI releases (based on images created when changes merge to release branches) and nightly releases (based on images created by ART and published to quay).

## Streams

OpenShift has three separate streams of images - those generated immediately on merge to a release branch (`ci`), those generated by the ART team using the official Red Hat release process in Brew (`nightly`), and those created for the OKD release which is a combination of `ci` images from release branches and images created from okd specific release branches (`okd`). `ci` usually lands first, `nightly` should come shortly after but is sometimes delayed due to other changes, and then `okd` happens using the latest `ci` plus the specific OKD images.

## Naming

ci-operator config in this directory should be named with the following patterns:

* `openshift-release-master__<stream>-<release_number>.yaml` - Contains all jobs that share the same integration stream
* `openshift-release-master__<stream>-<release_number>-upgrade-from-[<relative>-]<stream>-<release_number>.yaml` - Contains upgrade jobs from stream to stream

Variables:

* `<stream>` may be one of:
   * `ci`: A release generated from a CI stream (the `ocp/4.8` image stream)
   * `nightly`: A release generated from the published ART nightly release stream (the `ocp/4.8-art-latest` image stream)
   * `okd`: A release generated downstream of the CI stream that includes images specific to the `OKD` release
   * `stable`: A published public OCP release (which are renamed `nightly` builds) such as `4.6.10`
* `<release_number>` must be of the form `4.<number>`, i.e. `4.8`
* `<relative>` may be set to `previous` if upgrading across two streams

Examples:

* `openshift-release-master__ci-4.8-upgrade-from-stable-4.7.yaml` tests upgrading to a ci 4.8 release from the current stable 4.7 release
* `openshift-release-master__nightly-4.7.yaml` contains tests for releases built from ART, and should also contain upgrades from the previous nightly job by default.