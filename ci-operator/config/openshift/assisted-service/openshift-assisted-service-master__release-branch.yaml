base_images:
  blocking-issue-creator:
    name: blocking-issue-creator
    namespace: ci
    tag: latest
  repo-brancher:
    name: repo-brancher
    namespace: ci
    tag: latest
build_root:
  image_stream_tag:
    name: release
    namespace: openshift
    tag: golang-1.16
resources:
  '*':
    requests:
      cpu: 100m
      memory: 200Mi
tests:
- as: fast-forward
  commands: |
    repo-brancher --fast-forward --confirm \
        --config-dir=./ci-operator/config/openshift/assisted-service \
        --username=openshift-merge-robot \
        --token-path=/secrets/github-credentials-openshift-merge-robot/oauth \
        --current-promotion-namespace=ocp-kni \
        --current-release=ocm-2.4 \
        --future-release=ocm-2.4
  container:
    from: repo-brancher
  cron: '@hourly'
  secrets:
  - mount_path: /secrets/github-credentials-openshift-merge-robot/
    name: github-credentials-openshift-merge-robot
- as: merge-blocker
  commands: |
    blocking-issue-creator \
        --config-dir=./ci-operator/config/openshift/assisted-service \
        --github-token-path=/secrets/github-credentials-openshift-merge-robot/oauth \
        --current-release=ocm-2.4 \
        --future-release=ocm-2.4
  container:
    from: blocking-issue-creator
  cron: '@hourly'
  secrets:
  - mount_path: /secrets/github-credentials-openshift-merge-robot/
    name: github-credentials-openshift-merge-robot
zz_generated_metadata:
  branch: master
  org: openshift
  repo: assisted-service
  variant: release-branch
