base_images:
  cli:
    name: "4.13"
    namespace: ocp
    tag: cli
build_root:
  image_stream_tag:
    name: release
    namespace: openshift
    tag: golang-1.15
images:
- dockerfile_literal: |
    FROM quay.io/rh_integration/strimzi-interop:latest
    WORKDIR /home/jenkins/interop
    CMD ["/bin/bash"]
  to: test-image
releases:
  latest:
    candidate:
      product: ocp
      stream: nightly
      version: "4.13"
resources:
  '*':
    requests:
      cpu: 100m
      memory: 200Mi
tests:
- as: latest
  cron: 0 0 1 1 *
  steps:
    cluster_profile: aws-cspi-qe
    env:
      BASE_DOMAIN: aws.interop.ccitredhat.com
      COMPUTE_NODE_TYPE: m4.xlarge
      SUB_CHANNEL: stable
      SUB_INSTALL_NAMESPACE: openshift-streams
      SUB_PACKAGE: amq-streams
      SUB_SOURCE: redhat-operators
      SUB_TARGET_NAMESPACES: openshift-streams
    test:
    - ref: operatorhub-subscribe
    - as: test
      commands: |
        export USER_NAME=kubeadmin
        export PASSWORD=`cat ${KUBEADMIN_PASSWORD_FILE}`
        export API_URL=`oc whoami --show-server`
        export NAMESPACE=openshift-streams
        export KUBECONFIG="${SHARED_DIR}/kubeconfig"
        pwd
        stat .
        make interop
      from: test-image
      resources:
        requests:
          cpu: 100m
    workflow: ipi-aws
zz_generated_metadata:
  branch: main
  org: rhpit
  repo: interop-tests
  variant: amq-streams
