workflow:
  as: hypershift-jira-agent
  steps:
    pre:
      - ref: hypershift-jira-agent-setup
    test:
      - ref: hypershift-jira-agent-process
    post:
      - ref: hypershift-jira-agent-report
  documentation: |-
    HyperShift Jira Agent workflow for automated issue processing.

    This workflow:
    1. Setup: Clones HyperShift repo, configures git and GitHub CLI, sets up Claude Code authentication
    2. Process: Queries Jira for labeled issues, runs /jira-solve for each unprocessed issue, tracks state
    3. Report: Generates summary of processed issues and results

    The workflow uses the /jira-solve command from the HyperShift repository in non-interactive mode.
    Issues are queried from Jira with: project in (OCPBUGS, CNTRLPLANE) AND resolution = Unresolved AND labels = issue-for-agent

    State is maintained in a ConfigMap (hypershift-jira-agent-state) to prevent reprocessing.
