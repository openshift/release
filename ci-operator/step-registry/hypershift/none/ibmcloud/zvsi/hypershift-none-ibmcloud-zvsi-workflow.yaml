workflow:
  as: hypershift-none-ibmcloud-zvsi
  documentation: |-
    The hypershift-none-ibmcloud-zvsi workflow executes different steps to create a hosted cluster, 
    a zVSI (IBMZ Virtual Server Instance) on IBM Cloud and then attaches it as a compute node to the hosted control plane.

    This step also tests the attachment of the zVSI and verifies if all the cluster operators are up and running in this 
    multi architecture setup of management cluster being x86 and compute node with s390x architecture.

    Once the tests are executed successfully then this workflow destroys the hosted cluster and IBM Cloud resources that are created 
    during this workflow for testing the HypeShift on Z none based installation.

    Learn more about HyperShift here: https://github.com/openshift/hypershift.
  steps:
    post:
      - ref: hypershift-none-destroy-hostedcluster
      - chain: hypershift-aws-destroy-nested-management-cluster
      - ref: hypershift-none-ibmcloud-zvsi-destroy
    test:
      - ref: hypershift-none-ibmcloud-zvsi-create
    pre:
      - ref: ipi-install-rbac
      - chain: hypershift-aws-setup-nested-management-cluster
      - ref: hypershift-none-create-hostedcluster
