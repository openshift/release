ref:
  as: hypershift-konflux-check
  from: claude-ai-helpers
  commands: hypershift-konflux-check-commands.sh
  env:
  - name: CLAUDE_CODE_USE_VERTEX
    default: "1"
    documentation: Enable Vertex AI for Claude Code.
  - name: CLOUD_ML_REGION
    default: "us-east5"
    documentation: Google Cloud region for Vertex AI.
  - name: ANTHROPIC_VERTEX_PROJECT_ID
    default: "itpc-gcp-hybrid-pe-eng-claude"
    documentation: Google Cloud project ID for Vertex AI authentication.
  - name: GOOGLE_APPLICATION_CREDENTIALS
    default: "/var/run/claude-code-service-account/claude-prow"
    documentation: Path to the Google Cloud service account JSON key file.
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
  credentials:
  - namespace: test-credentials
    name: hypershift-team-claude-prow
    mount_path: /var/run/claude-code-service-account
  documentation: |-
    Checks HyperShift Tekton pipeline task bundles for updates.
    When updates are found:
    1. Uses Claude Code with /update-konflux-tasks skill to apply updates
    2. Creates a PR from hypershift-community/hypershift to openshift/hypershift
    3. Creates a Jira ticket documenting the updates
