ref:
  as: baremetal-lab-agent-conf-static
  from_image:
    namespace: ci
    name: "baremetal-qe-base"
    tag: latest
  commands: baremetal-lab-agent-conf-static-commands.sh
  resources:
    requests:
      cpu: '1'
      memory: 128Mi
  grace_period: 600
  env:
    - name: ipv4_enabled
      default: "true"
      documentation: "Whether to enable the ipv4 stack"
    - name: ipv6_enabled
      default: "true"
      documentation: "Whether to enable the ipv6 stack"
    - name: AUX_HOST
      default: ""
      documentation: ""
    - name: INTERNAL_NET_IP
      default: "192.168.80.1"
      documentation: ""
    - name: INTERNAL_NET_CIDR
      default: "192.168.80.0/22"
    - name: ADDITIONAL_WORKERS_DAY2
      default: "false"
      documentation: |
        Whether to add (power on) the additional workers after the cluster is installed.
        This is useful for testing multi-arch compute node clusters as a real day2 operation and is especially important
        for testing single-architectures clusters based on single-architecture payloads migrating to a multi-arch payload.
        Also, at time of writing, the above path is the only one possible for multi-arch clusters with arm64 control plane
        and additional amd64 workers (because the release image is not a manifest list when installing from Prow and 
        this check would fail at installation time if installing an arm64 CP cluster from the multi payload: 
        https://github.com/openshift/installer/blob/4daff6117fce1d73774b02caf605d9e1b836dd7c/data/data/bootstrap/files/usr/local/bin/release-image-download.sh.template#L36-L50).
  documentation: |-
    The baremetal-lab-agent-conf-dynamic step will generate the agent-config.yaml configuration asset for 
    a baremetal cluster using the agent installer.
    The minimum requirement for this step to work is to run it after the chain baremetal-lab-agent-conf.
