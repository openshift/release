ref:
  as: baremetal-lab-nfs-provisioner
  from_image:
    namespace: ci
    name: "baremetal-qe-base"
    tag: latest
  commands: baremetal-lab-nfs-provisioner-commands.sh
  resources:
    requests:
      cpu: 500m
      memory: 16Mi
  env:
    - name: AUX_HOST
      default: ""
    - name: NFS_SERVER
      default: ""
      documentation: |
        The NFS_SERVER that exports a share to be used by the node. It's set by default to the same value as the AUX_HOST. 
        The NFS_SERVER must exports the /opt/nfs/${CLUSTER_NAME} folder, to be consumed by the provisioner, and 
        assumed as already existing.
    - name: NFS_CLIENT_MIRRORED_IMAGE_URL
      default: "quay.io/openshifttest/nfs-subdir-external-provisioner@sha256:3036bf6b741cdee4caf8fc30bccd049afdf662e08a52f2e6ae47b75ef52a40ac"
      documentation: |
        In a network restricted environment additional images required by the nfs provisioner cannot be pulled from the internet,
        thus the need to have it mirrored and accessible through the proxy registry hosted on the aux host.
        Associated PR at https://gitlab.cee.redhat.com/aosqe/tests-images/-/merge_requests/85
  documentation: |-
    This step will run after a QE baremetal cluster is installed, to deploy the nfs dynamic provisioner, using an
    given NFS server.
