workflow:
  as: openshift-qe-installer-azure-ipi-ovn-multi-ipsec
  steps:
    cluster_profile: azure-qe
    dependencies:
      OPENSHIFT_INSTALL_RELEASE_IMAGE_OVERRIDE: release:multi-latest
    env:
      BASE_DOMAIN: qe.azure.devcluster.openshift.com
      COMPUTE_NODE_TYPE: Standard_D4ps_v5
      OCP_ARCH: arm64
    post:
    - chain: ipi-deprovision
    pre:
    - chain: ipi-conf-azure
    - ref: ipi-conf-azure-custom-region
    - ref: ovn-conf 
    - ref: ovn-conf-ipsec-manifest
    - chain: ipi-install
    - ref: ipi-azure-rbac
    - chain: create-infra-move-ingress-monitoring-registry
  documentation: |-
    Azure IPI OVN MULTIARCH IPSEC provision and deprovision workflow, including creating infra nodes and moving ingress monitoring and registry to infra nodes.