workflow:
  as: openshift-qe-installer-azure-ipi-ovn-ipsec-arm
  steps:
    env: 
      OCP_ARCH: arm64
      COMPUTE_NODE_TYPE: Standard_D4ps_v5
      CONTROL_PLANE_INSTANCE_TYPE: Standard_D8ps_v5
    post:
    - chain: ipi-deprovision
    pre:
    - chain: ipi-conf-azure
    - ref: ipi-conf-azure-custom-region
    - ref: ovn-conf 
    - ref: ovn-conf-ipsec-manifest
    - chain: ipi-install
    - ref: ipi-azure-rbac
    - chain: create-infra-move-ingress-monitoring-registry
  documentation: |-
    Azure IPI OVN IPSEC ARM provision and deprovision workflow, including creating infra nodes and moving ingress monitoring and registry to infra nodes.