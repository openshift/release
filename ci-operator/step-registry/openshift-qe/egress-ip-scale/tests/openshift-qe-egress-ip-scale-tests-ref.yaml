ref:
  as: openshift-qe-egress-ip-scale-tests
  from_image:
    namespace: ocp
    name: "4.20"
    tag: cli
  commands: openshift-qe-egress-ip-scale-tests-commands.sh
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
  env:
  - name: EIP_COUNT
    default: "10"
    documentation: "Number of EgressIP objects to test (must match setup)"
  - name: PODS_PER_EIP
    default: "200"  
    documentation: "Number of pods per EgressIP object (must match setup)"
  - name: NAMESPACE_PREFIX
    default: "scale-eip"
    documentation: "Prefix for scale test namespaces (must match setup)"
  documentation: |-
    Executes comprehensive scale testing for egress IP validation with real traffic flow testing.
    
    ADDRESSES REVIEWER FEEDBACK (@huiran0826): Now includes actual traffic validation
    to external services instead of just checking SNAT/LRP rules.
    
    This test performs:
    - Baseline SNAT rule validation (expected: 2000 rules for 2000 pods)
    - Baseline LRP rule validation (expected: 2000 rules for 2000 pods)  
    - EgressIP failover testing between nodes
    - Post-failover rule consistency validation
    - Original node SNAT cleanup verification (should be 0 after failover)
    
    Generates detailed metrics and CSV validation results for analysis
    of egress IP behavior at scale with 10 EgressIPs and 2000 pods.