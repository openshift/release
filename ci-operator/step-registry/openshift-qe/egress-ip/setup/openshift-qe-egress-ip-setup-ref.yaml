ref:
  as: openshift-qe-egress-ip-setup
  from_image:
    namespace: ocp
    name: "4.20"
    tag: cli
  commands: openshift-qe-egress-ip-setup-commands.sh
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  env:
  - name: EGRESS_IP_COUNT
    default: "1"
    documentation: "Number of egress IPs to allocate (1-50). Supports future scalability for multi-IP scenarios."
  documentation: |-
    Setup egress IP configuration for testing based on e2e methodology.
    This step configures EgressIP custom resources and validates proper assignment
    using intelligent IP allocation that supports multiple egress IPs for future scalability.
    
    The setup configures egress IP resources and prepares for functional validation using
    external bastion agnhost service (deployed separately) for end-to-end source IP verification
    rather than relying solely on internal cluster routing validation.
    
    Features:
    - Intelligent IP discovery to avoid conflicts with existing node/egress IPs
    - Flexible IP count allocation (configurable via EGRESS_IP_COUNT)
    - External agnhost service integration for functional validation
    - Network connectivity validation with ping tests
    - Support for future multi-IP egress scenarios
    - Cloud-bulldozer methodology integration for performance testing