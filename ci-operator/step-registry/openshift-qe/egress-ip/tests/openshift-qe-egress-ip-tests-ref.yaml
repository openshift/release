ref:
  as: openshift-qe-egress-ip-tests
  from_image:
    namespace: ocp
    name: "4.20"
    tag: cli
  commands: openshift-qe-egress-ip-tests-commands.sh
  resources:
    requests:
      cpu: 200m
      memory: 500Mi
  env:
  - name: EIP_NAME
    default: "egress-ip-test"
    documentation: "Name of the egress IP to test"
  - name: POD_KILL_RETRIES
    default: "10"
    documentation: "Number of OVN pod kill test iterations"
  - name: REBOOT_RETRIES
    default: "5" 
    documentation: "Number of node reboot test iterations"
  documentation: >-
    Executes comprehensive egress IP resilience testing using functional validation including:
    - Functional traffic flow testing using ipecho service to validate actual egress IP usage
    - OVN pod disruption testing with real traffic verification before and after chaos
    - Node reboot testing with egress IP functionality recovery validation
    - Control testing to verify non-egress IP pods do not use egress IP addresses
    - Metrics collection and analysis of functional test results
    - Artifact generation for test results
    
    Tests egress IP stability under infrastructure disruption scenarios using
    real traffic flow validation via ipecho service rather than checking
    implementation details like NAT rules or logical router policies.
    This provides true end-to-end functional validation that egress IP
    functionality actually works as expected by testing real traffic patterns.