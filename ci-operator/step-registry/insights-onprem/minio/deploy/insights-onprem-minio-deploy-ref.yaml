ref:
  as: insights-onprem-minio-deploy
  from: src
  commands: insights-onprem-minio-deploy-commands.sh
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  env:
  - name: MINIO_NAMESPACE
    default: "minio"
    documentation: "Namespace where MinIO will be deployed"
  - name: MINIO_ACCESS_KEY
    default: "minioadmin"
    documentation: "MinIO access key (username)"
  - name: MINIO_SECRET_KEY
    default: "minioadmin"
    documentation: "MinIO secret key (password)"
  - name: MINIO_STORAGE_SIZE
    default: "10Gi"
    documentation: "Size of the PVC for MinIO storage"
  - name: HELM_NAMESPACE
    default: "cost-onprem"
    documentation: "Namespace where the helm chart will be deployed and where ODF credentials secret will be created"
  - name: ODF_CREDENTIALS_SECRET_NAME
    default: "cost-onprem-odf-credentials"
    documentation: "Name of the secret to create with S3 credentials for the helm chart namespace"
  documentation: |-
    This step deploys MinIO as a lightweight S3-compatible object storage
    solution. It creates the MinIO deployment, service, and required buckets
    (ros-data, insights-upload-perma, koku-bucket).
    
    It also creates the ODF credentials secret in the helm chart namespace
    (default: cost-onprem) for use by the install-helm-chart.sh script.
    
    This is a lightweight alternative to ODF for tests that only need
    S3-compatible object storage without block or file storage.

