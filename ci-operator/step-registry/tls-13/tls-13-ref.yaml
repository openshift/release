ref:
  as: tls-13
  from: cli
  commands: |
    #!/bin/bash
    set -euo pipefail

    export KUBECONFIG=${SHARED_DIR}/kubeconfig

    oc patch apiservers/cluster --type=merge -p '{"spec": {"tlsSecurityProfile":{"modern":{},"type":"Modern"}}}'

    oc adm wait-for-stable-cluster
  documentation: |
    Set the cluster's API server configuration to use the TLS modern profile and wait for stabilization.