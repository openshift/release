workflow:
  as: cucushift-agent-vsphere-dualstack-install-day2-add-nodes
  steps:
    pre:
    - ref: ipi-install-rbac
    - ref: ipi-conf
    - ref: ipi-conf-telemetry
    - ref: ipi-conf-vsphere-check
    - ref: ipi-conf-vsphere-check-vcm
    - ref: cucushift-agent-vsphere-conf-vips
    - ref: ovn-conf-vsphere-dualstack
    - ref: cucushift-agent-vsphere-conf
    - ref: ipi-conf-vsphere-dns
    - ref: cucushift-agent-vsphere-provision
    - ref: cucushift-agent-vsphere-day2-add-nodes
    - ref: ipi-install-vsphere-registry
    - ref: enable-qe-catalogsource
    post:
      - ref: cucushift-agent-gather
      - chain: gather
      - ref: ipi-deprovision-vsphere-dns
      - ref: cucushift-agent-vsphere-deprovision
      - ref: ipi-deprovision-vsphere-lease
  documentation: |-
    The ABI dualstack workflow provides pre- and post-steps that provision, deprovision, and perform day-2 operations, such as
    adding nodes to an OpenShift cluster with a default configuration on vSphere, allowing job authors to inject their
    own end-to-end test logic.
