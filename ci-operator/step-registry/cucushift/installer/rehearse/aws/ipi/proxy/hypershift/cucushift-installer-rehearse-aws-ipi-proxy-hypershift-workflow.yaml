workflow:
  as: cucushift-installer-rehearse-aws-ipi-proxy-hypershift
  steps:
    pre:
    - chain: cucushift-installer-rehearse-aws-ipi-proxy-provision
    - chain: cucushift-hypershift-extended-install-private
    - chain: hypershift-aws-create
    - chain: cucushift-hypershift-extended-enable-qe-catalogsource
    post:
    - chain: hypershift-dump
    - chain: hypershift-aws-destroy
    - chain: cucushift-installer-rehearse-aws-ipi-proxy-deprovision
    env:
      HYPERSHIFT_BASE_DOMAIN: "qe.devcluster.openshift.com"
      HYPERSHIFT_GUEST_INFRA_OCP_ACCOUNT: "true"
      HYPERSHIFT_AWS_REGION: "us-east-1"
      HYPERSHIFT_CP_AVAILABILITY_POLICY: "HighlyAvailable"
      HYPERSHIFT_INFRA_AVAILABILITY_POLICY: "HighlyAvailable"
      ZONES_COUNT: "3"
      ENABLE_ICSP: "true"
      COMPUTE_NODE_REPLICAS: "3"
      EXTRA_ARGS: "--enable-proxy=true"
  documentation: |-
    This is the workflow to trigger Prow's rehearsal test when submitting installer steps/chain/workflow
