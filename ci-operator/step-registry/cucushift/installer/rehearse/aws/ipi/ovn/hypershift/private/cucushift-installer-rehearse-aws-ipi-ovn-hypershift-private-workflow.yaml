workflow:
  as: cucushift-installer-rehearse-aws-ipi-ovn-hypershift-private
  steps:
    pre:
    - chain: cucushift-installer-rehearse-aws-ipi-ovn-provision
    - chain: cucushift-hypershift-extended-install-private
    - chain: hypershift-aws-create
    - ref: hypershift-aws-bastion
    test:
    - ref: cucushift-installer-check
    post:
    - ref: wait
    - chain: cucushift-installer-rehearse-aws-ipi-ovn-hypershift-deprovision
    env:
      HYPERSHIFT_AWS_REGION: us-east-1
      HYPERSHIFT_BASE_DOMAIN: qe.devcluster.openshift.com
      COMPUTE_NODE_REPLICAS: "3"
      HYPERSHIFT_GUEST_INFRA_OCP_ACCOUNT: "true"
      ENDPOINT_ACCESS: Private
      ZONES_COUNT: "3"
      EXTRA_ARGS: "--ssh-key=${CLUSTER_PROFILE_DIR}/ssh-publickey"
  documentation: |-
    This is the workflow to trigger Prow's rehearsal test when submitting installer steps/chain/workflow
