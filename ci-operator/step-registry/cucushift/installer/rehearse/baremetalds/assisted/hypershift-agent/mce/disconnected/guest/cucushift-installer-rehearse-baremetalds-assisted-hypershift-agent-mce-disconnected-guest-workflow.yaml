workflow:
  as: cucushift-installer-rehearse-baremetalds-assisted-hypershift-agent-mce-disconnected-guest
  steps:
    pre:
    - chain: cucushift-installer-rehearse-baremetalds-assisted-hypershift-agent-mce-disconnected-provision
    - ref: cucushift-hypershift-extended-enable-guest
    post:
    - ref: cucushift-hypershift-extended-disable-guest
    - chain: cucushift-installer-rehearse-baremetalds-assisted-hypershift-agent-mce-deprovision
    env:
      LVM_OPERATOR_SUB_SOURCE: qe-app-registry
      METALLB_OPERATOR_SUB_SOURCE: qe-app-registry
      HYPERSHIFT_NAMESPACE: "local-cluster"
      MCE_QE_CATALOG: "true"
      DISCONNECTED: "true"
      IP_STACK: v4v6
      PACKET_OS: rocky_9
      DEVSCRIPTS_CONFIG: |
        IP_STACK=v4v6
        MIRROR_IMAGES=true
        NETWORK_TYPE=OVNKubernetes
        WORKER_MEMORY=14336
        VM_EXTRADISKS=true
        VM_EXTRADISKS_LIST=vda
        VM_EXTRADISKS_SIZE=500G
        NUM_EXTRA_WORKERS=3
  documentation: |-
    This is the workflow to trigger Prow's rehearsal test when submitting installer steps/chain/workflow
