chain:
  as: cucushift-installer-rehearse-baremetalds-ipi-ovn-dualstack-kubevirt-hypershift-provision
  steps:
  - ref: baremetalds-devscripts-conf-extranetwork
  - chain: cucushift-installer-rehearse-baremetalds-ipi-ovn-ipv4-kubevirt-provision
  - ref: hypershift-kubevirt-baremetalds-redhat-operators
  - chain: hypershift-kubevirt-baremetalds-lvm
  - chain: hypershift-kubevirt-baremetalds-metallb
  - ref: hypershift-install
  - ref: hypershift-agent-create-config-dns
  - ref: hypershift-kubevirt-create
  - ref: hypershift-kubevirt-baremetalds-proxy
  - ref: hypershift-kubevirt-health-check
  env:
    - name: EXTRA_NETWORK_CONFIG
      default: |
        EXTRA_NETWORK_NAMES="nmstate1 nmstate2"
        NMSTATE1_NETWORK_SUBNET_V4="192.168.221.0/24"
        NMSTATE1_NETWORK_SUBNET_V6="fd2e:6f44:5dd8:ca56::/120"
        NMSTATE2_NETWORK_SUBNET_V4="192.168.222.0/24"
        NMSTATE2_NETWORK_SUBNET_V6="fd2e:6f44:5dd8:cc56::/120"

  documentation: |-
    Create an IPI cluster on BM with KubeVirt-HostedCluster for QE e2e tests.
