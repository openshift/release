workflow:
  as: cucushift-installer-rehearse-baremetalds-ipi-ovn-ipv4-kubevirt-hypershift-mce-guest
  steps:
    pre:
      - chain: cucushift-installer-rehearse-baremetalds-ipi-ovn-ipv4-kubevirt-hypershift-mce-provision
      - ref: cucushift-hypershift-extended-enable-guest
      - ref: cucushift-installer-reportportal-marker
    post:
      - ref: wait
      - ref: cucushift-hypershift-extended-disable-guest
      - chain: cucushift-installer-rehearse-baremetalds-ipi-ovn-ipv4-kubevirt-hypershift-mce-deprovision
      - ref: send-results-to-reportportal
    env:
      HYPERSHIFT_NAMESPACE: "local-cluster"
      METALLB_OPERATOR_SUB_SOURCE: qe-app-registry
      LVM_OPERATOR_SUB_SOURCE: qe-app-registry
      LVM_SUB_TARGET_NAMESPACES: openshift-lvm-storage
      LVM_OPERATOR_SUB_INSTALL_NAMESPACE: openshift-lvm-storage
      ETCD_STORAGE_CLASS: lvms-vg1
      DEVSCRIPTS_CONFIG: |
        IP_STACK=v4
        NETWORK_TYPE=OVNKubernetes
        NUM_WORKERS=0
        NUM_MASTERS=3
        NUM_EXTRA_WORKERS=1
        MASTER_VCPU=8
        MASTER_MEMORY=32768
        VM_EXTRADISKS=true
        VM_EXTRADISKS_LIST="vda vdb"
        VM_EXTRADISKS_SIZE=250G
  documentation: |-
    This is the workflow to trigger Prow's rehearsal test when submitting installer steps/chain/workflow
