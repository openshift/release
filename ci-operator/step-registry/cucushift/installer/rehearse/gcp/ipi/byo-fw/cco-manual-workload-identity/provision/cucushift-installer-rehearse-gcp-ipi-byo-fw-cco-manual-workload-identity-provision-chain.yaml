chain:
  as: cucushift-installer-rehearse-gcp-ipi-byo-fw-cco-manual-workload-identity-provision
  steps: 
  - ref: gcp-provision-minimal-permission
  - ref: gcp-provision-vpc
  - ref: gcp-provision-firewalls
  - chain: ipi-conf-gcp
  - ref: ipi-conf-gcp-firewall-rules-management
  - ref: ipi-conf-manual-creds
  - ref: ipi-conf-gcp-oidc-creds-provision
  - ref: ipi-conf-manual-creds-remove-unnecessary-creds
  - ref: gcp-provision-machine-api-controller-permissions
  - ref: gcp-provision-ccm-permissions
  - ref: ipi-conf-gcp-service-account
  - chain: ipi-install
  - ref: ipi-conf-gcp-persistent-disk-workload-identity-federation
  - ref: enable-qe-catalogsource
  - chain: cucushift-installer-check
  - ref: cucushift-installer-check-gcp-credentials-mode
  env:
  - name: MINIMAL_PERMISSIONS_CCO_MANUAL_WITHOUT_FIREWALL_PROVISION
    default: "yes"
  - name: FILEWALL_RULES_MANAGEMENT
    default: "Unmanaged"
  - name: COMPUTE_SERVICE_ACCOUNT
    default: ""
    documentation: It defines the GCP service account for compute nodes.
  - name: CONTROL_PLANE_SERVICE_ACCOUNT
    default: ""
    documentation: It defines the GCP service account for control-plane nodes.
  - name: NETWORK_TAGS_FOR_COMPUTE_NODES
    default: "preserved-ipi-compute"
    documentation: Additional network tags applied to compute nodes, comma separated strings, e.g. "ocp-tag01,ocp-tag02".
  - name: NETWORK_TAGS_FOR_CONTROL_PLANE_NODES
    default: "preserved-ipi-control-plane"
    documentation: Additional network tags applied to control-plane nodes, comma separated strings, e.g. "ocp-tag01,ocp-tag02".
  documentation: |-
    Create an IPI cluster with GCP workload identity for QE e2e tests.
    
