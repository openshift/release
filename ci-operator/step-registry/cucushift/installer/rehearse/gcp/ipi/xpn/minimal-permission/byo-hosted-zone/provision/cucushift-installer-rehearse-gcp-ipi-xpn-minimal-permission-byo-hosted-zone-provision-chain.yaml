chain:
  as: cucushift-installer-rehearse-gcp-ipi-xpn-minimal-permission-byo-hosted-zone-provision
  steps: 
    - chain: ipi-conf-gcp
    - ref: ipi-conf-credentials-mode
    - ref: ipi-conf-gcp-xpn-network
    - ref: ipi-conf-gcp-create-firewall-rules
    - ref: gcp-provision-private-dns-zone
    - ref: gcp-provision-xpn-byo-hosted-zone-min-perm-passthrough-serviceaccount
    - ref: ipi-conf-gcp-service-account
    - ref: ipi-conf-gcp-private-dns-zone
    - chain: ipi-install
    - ref: enable-qe-catalogsource
    - chain: cucushift-installer-check
    - ref: cucushift-installer-check-gcp-credentials-mode
    - ref: cucushift-installer-check-gcp-byo-hosted-zone
  env:
  - name: CREDENTIALS_MODE
    default: "Passthrough"
    documentation: CCO mode.
  - name: NETWORK_TAGS_FOR_COMPUTE_NODES
    default: "preserved-ipi-xpn-compute"
    documentation: Additional network tags applied to compute nodes, comma separated strings, e.g. "ocp-tag01,ocp-tag02".
  - name: NETWORK_TAGS_FOR_CONTROL_PLANE_NODES
    default: "preserved-ipi-xpn-control-plane"
    documentation: Additional network tags applied to control-plane nodes, comma separated strings, e.g. "ocp-tag01,ocp-tag02".
  - name: COMPUTE_SERVICE_ACCOUNT
    default: ""
    documentation: It defines the GCP service account for compute nodes.
  - name: CONTROL_PLANE_SERVICE_ACCOUNT
    default: ""
    documentation: It defines the GCP service account for control-plane nodes.
  documentation: |-
    This chain contains all of the steps to provision an OpenShift cluster 
    into GCP shared VPC, using the service account having minimal permissions. 
    The service account doesn't have permissions to create/delete firewall-rules 
    and bind a private zone to the shared VPC in the host project. 
