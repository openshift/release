workflow:
  as: cucushift-installer-rehearse-gcp-ipi-custom-endpoints-proxy-whitelist-cco-manual-workload-identity
  steps:
    pre:
      - chain: cucushift-installer-rehearse-gcp-ipi-custom-endpoints-proxy-whitelist-cco-manual-workload-identity-provision
      - ref: cucushift-installer-reportportal-marker
    post:
      - chain: cucushift-installer-rehearse-gcp-ipi-custom-endpoints-proxy-whitelist-cco-manual-workload-identity-deprovision
      - ref: send-results-to-reportportal
  documentation: |-
    The IPI workflow provides provision- and deprovision- steps that provision and 
    deprovision an OpenShift disconnected cluster (behind proxy), using GCP custom 
    endpoints with a specified URL allowlist in the proxy server, and using Workload Identity on GCP.
    All modifications to this workflow should be done by modifying the `cucushift-installer-rehearse-gcp-ipi-custom-endpoints-proxy-whitelist-cco-manual-workload-identity-{provision,deprovision}` chains, to allow other workflows to 
    mimic and extend this base workflow without a need to backport changes.
