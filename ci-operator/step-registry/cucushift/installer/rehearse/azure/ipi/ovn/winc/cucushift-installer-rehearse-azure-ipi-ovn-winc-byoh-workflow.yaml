# ci-operator/step-registry/cucushift/installer/rehearse/azure/ipi/ovn/winc/cucushift-installer-rehearse-azure-ipi-ovn-winc-byoh-workflow.yaml
workflow:
  as: cucushift-installer-rehearse-azure-ipi-ovn-winc-byoh
  steps:
    env:
      SUB_CHANNEL: stable
      SUB_INSTALL_NAMESPACE: openshift-windows-machine-config-operator
      SUB_PACKAGE: windows-machine-config-operator
      SUB_TARGET_NAMESPACES: '!install'
      SUB_SOURCE: "qe-app-registry"
      WINDOWS_NODE_REPLICAS: 2
      WINDOWS_NODE_TYPE: both        # Enable both MachineSets and BYOH
      BYOH_NODE_COUNT: 2            # Number of BYOH nodes to create
    pre:
    - chain: cucushift-installer-rehearse-azure-ipi-ovn-winc-provision
    post:
    - chain: cucushift-installer-rehearse-azure-ipi-deprovision
  documentation: |-
    This is the workflow to trigger Prow's rehearsal test when submitting installer steps/chain/workflow which require both 
    Windows MachineSets and BYOH workers as part of the cluster for Azure IPI.

