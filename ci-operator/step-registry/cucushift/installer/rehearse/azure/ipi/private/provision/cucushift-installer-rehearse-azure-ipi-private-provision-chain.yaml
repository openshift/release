chain:
  as: cucushift-installer-rehearse-azure-ipi-private-provision
  steps:
  - ref: azure-provision-resourcegroup
  - ref: azure-provision-vnet
  - ref: azure-provision-disk-encryption-set
  - chain: azure-provision-bastionhost
  - ref: proxy-config-generate
  - ref: ipi-conf
  - ref: ipi-conf-telemetry
  - ref: ipi-conf-azure
  - ref: ipi-conf-azure-osimage
  - ref: ipi-conf-azure-osdisk-disktype
  - ref: ipi-conf-azure-osdisk-disksize
  - ref: ipi-conf-azure-provisionednetwork
  - ref: ipi-conf-azure-provisioned-des
  - chain: azure-provision-service-principal-minimal-permission
  - ref: azure-provision-disk-encryption-set-assign-role
  - chain: ipi-install
  - ref: azure-provision-disk-encryption-set-grant-permission
  - ref: ipi-install-post-monitoringpvc
  - ref: enable-qe-catalogsource
  - chain: cucushift-installer-check
  - chain: cucushift-installer-check-azure-private
  env:
  - name: PUBLISH
    default:  "Internal"
  - name: BASTION_BOOT_IMAGE
    default: "azureopenshift:aro4:aro_417:417.94.20240701"
    documentation: |-
      Specify bastion boot image directly from Azure Marketplace to provision bastion vm.
  documentation: |-
    Create an IPI private cluster on AZURE for QE e2e tests.
