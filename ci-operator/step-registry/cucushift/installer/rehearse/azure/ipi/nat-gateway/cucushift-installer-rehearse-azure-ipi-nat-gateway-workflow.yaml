workflow:
  as: cucushift-installer-rehearse-azure-ipi-nat-gateway
  steps:
    pre:
      - chain: ipi-conf-azure
      - ref: ipi-conf-azure-custom-region
      - chain: azure-provision-service-principal-minimal-permission
      - chain: ipi-install
      - ref: enable-qe-catalogsource
      - chain: cucushift-installer-check
      - ref: cucushift-installer-check-azure-nat-gateway
      - ref: cucushift-installer-reportportal-marker
    post:
      - chain: cucushift-installer-rehearse-azure-ipi-deprovision
      - ref: send-results-to-reportportal
    env:
      OUTBOUND_TYPE: NatGateway
  documentation: |-
    This is the workflow to trigger Prow's rehearsal test when submitting installer steps/chain/workflow
