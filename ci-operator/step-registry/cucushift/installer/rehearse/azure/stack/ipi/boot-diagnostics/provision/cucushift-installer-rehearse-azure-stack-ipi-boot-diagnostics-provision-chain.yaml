chain:
  as: cucushift-installer-rehearse-azure-stack-ipi-boot-diagnostics-provision
  steps:
  - chain: ipi-conf-azurestack
  - ref: ipi-conf-azure-bootdiagnostics
  - ref: ipi-conf-azurestack-creds
  - ref: ipi-conf-azurestack-rhcos
  - ref: ipi-conf-additional-ca-azurestack
  - chain: ipi-install
  - ref: enable-qe-catalogsource
  - chain: cucushift-installer-check
  - ref: cucushift-installer-check-azure-cpms
  - ref: cucushift-installer-check-azure-boot-diagnostics
  env:
  - name: BOOT_DIAGNOSTICS
    default: "false"
    documentation: "Inject boot diagnostics for *worker* nodes, configured via manifests during installation. Disable it in this workflow to test installer behavior."
  documentation: |-
    Create an IPI cluster on Azure Stack Hub for QE e2e tests.
    Configure boot diagnostics in install-config. Applicable on 4.21+.
