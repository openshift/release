ref:
  as: distributed-tracing-tests-opentelemetry-upstream
  from: opentelemetry-tests-runner
  timeout: 3h0m0s
  commands: distributed-tracing-tests-opentelemetry-upstream-commands.sh
  resources:
    requests:
      cpu: "1"
      memory: 3Gi
  env:
  - name: SKIP_TESTS
    default: ""
    documentation: "Space seperated test cases to skip from the test run. Example tests/e2e/smoke-targetallocator tests/e2e/prometheus-config-validation"
  - name: TARGETALLOCATOR_IMG
    default: ""
    documentation: The OpenTelemetry Target Allocator image used in testing.
  - name: OPERATOROPAMPBRIDGE_IMG
    default: ""
    documentation: The OpenTelemetry Opampbridge image used in testing.
  - name: OPAMP_BRIDGE_SERVER
    default: ""
    documentation: The OpenTelemetry Opampbridge bridge server image used in testing.
  - name: INSTRUMENTATION_JAVA_IMG
    default: ""
    documentation: The OpenTelemetry Java auto-instrumentation image used in testing.
  - name: INSTRUMENTATION_NODEJS_IMG
    default: ""
    documentation: The OpenTelemetry Node.js auto-instrumentation image used in testing.
  - name: INSTRUMENTATION_PYTHON_IMG
    default: ""
    documentation: The OpenTelemetry Python auto-instrumentation image used in testing.
  - name: INSTRUMENTATION_DOTNET_IMG
    default: ""
    documentation: The OpenTelemetry .NET auto-instrumentation image used in testing.
  - name: INSTRUMENTATION_APACHE_HTTPD_IMG
    default: ""
    documentation: The OpenTelemetry Apache HTTPD auto-instrumentation image used in testing.
  dependencies:
  - name: "opentelemetry-target-allocator"
    env: TARGETALLOCATOR_IMG
  - name: "opentelemetry-opampbridge"
    env: OPERATOROPAMPBRIDGE_IMG
  - name: "opamp-bridge-server"
    env: OPAMP_BRIDGE_SERVER
  - name: "opentelemetry-instrumentation-java"
    env: INSTRUMENTATION_JAVA_IMG
  - name: "opentelemetry-instrumentation-nodejs"
    env: INSTRUMENTATION_NODEJS_IMG
  - name: "opentelemetry-instrumentation-python"
    env: INSTRUMENTATION_PYTHON_IMG
  - name: "opentelemetry-instrumentation-dotnet"
    env: INSTRUMENTATION_DOTNET_IMG
  - name: "opentelemetry-instrumentation-apache-httpd"
    env: INSTRUMENTATION_APACHE_HTTPD_IMG
  documentation: |-
    The distributed-tracing-tests-opentelemetry-upstream step executes the OpenTelemetry Operator Upstream tests.
    
    This step requires the following pipeline images to be built:
    - opentelemetry-target-allocator: OpenTelemetry Target Allocator component image
    - opentelemetry-opampbridge: OpenTelemetry OpAMP Bridge component image  
    - opamp-bridge-server: Test server image for OpAMP Bridge testing
    - opentelemetry-instrumentation-java: Auto-instrumentation image for Java applications
    - opentelemetry-instrumentation-nodejs: Auto-instrumentation image for Node.js applications
    - opentelemetry-instrumentation-python: Auto-instrumentation image for Python applications
    - opentelemetry-instrumentation-dotnet: Auto-instrumentation image for .NET applications
    - opentelemetry-instrumentation-apache-httpd: Auto-instrumentation image for Apache HTTPD
    
    These images are built from the corresponding directories in the opentelemetry-operator repository
    and are passed to the operator during testing via command-line arguments. 
