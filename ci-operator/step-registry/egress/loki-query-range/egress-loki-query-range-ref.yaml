ref:
  as: egress-loki-query-range
  from: cli
  commands: egress-loki-query-range-commands.sh
  grace_period: 2m0s
  timeout: 300m
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
  env:
  - name: LOKI_NAMESPACE
    default: netobserv
  - name: LOKI_SERVICE
    default: loki
  #- name: LOKI_QUERY
  #  default: '{K8S_FlowLayer="infra"}' # Just an example; adjust as needed
  - name: LOKI_STEP
    default: 30s
  documentation: |-
    This step queries the Loki stack for network flow logs collected by the
    NetObserv FlowCollector. It constructs and executes a query to retrieve
    flow logs matching a specified label selector over a defined time range,
    aggregating results based on a specified step interval. The step helps
    verify that network flow data is being correctly collected and stored
    in the Loki backend.