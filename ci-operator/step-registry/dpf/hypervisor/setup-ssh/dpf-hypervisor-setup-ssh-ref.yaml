ref:
  as: dpf-hypervisor-setup-ssh
  commands: dpf-hypervisor-setup-ssh-commands.sh
  credentials:
  - mount_path: /var/run/dpf-ci
    name: dpf-ci
    namespace: test-credentials
  documentation: |-
    Set up SSH access to the DPF hypervisor (nvd-srv-45) using private key 
    from Vault and configure SSH client for automated connections.
    
    This step:
    1. Extracts SSH private key from Vault mount
    2. Sets proper permissions (600) on the key
    3. Creates SSH config with connection parameters
    4. Tests connectivity to ensure SSH access works
    
    The SSH configuration follows AMD CI patterns with proper timeouts,
    host key checking disabled for CI environment, and batch mode enabled.
    
    Required Vault secrets:
    - /var/run/dpf-ci/private-key: SSH private key for root@nvd-srv-45
  from: dpf-ci
  resources:
    requests:
      cpu: 100m
      memory: 200Mi