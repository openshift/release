ref:
  as: dpf-hypervisor-deploy-cluster
  commands: dpf-hypervisor-deploy-cluster-commands.sh
  dependencies:
  - env: SHARED_DIR
    name: shared-tmp
  documentation: |-
    Deploy OpenShift cluster with DPF using the automation scripts on the
    hypervisor. This step executes 'make all' which performs the complete
    DPF deployment including cluster creation and DPF operator installation.
    
    This step:
    1. Executes 'make all' on the hypervisor
    2. Monitors deployment progress with logs
    3. Waits for cluster to become ready
    4. Validates DPF operator deployment
    5. Copies kubeconfig back to CI environment
    
    The deployment includes:
    - OpenShift cluster creation via Assisted Installer
    - Virtual machine provisioning on hypervisor
    - DPF operator and prerequisites installation
    - HyperShift hosted cluster setup
    - Network configuration for DPUs
    
    Expected duration: 4-6 hours depending on cluster size
  from: dpf-ci
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
  timeout: 5h0m0s