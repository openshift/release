ref:
  as: job-re-trigger
  optional_on_success: true
  from: cli
  commands: job-re-trigger-commands.sh
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  env:
    - name: RE_TRIGGER_ON_FAILURE
      default: "false"
      documentation: Re-rigger job on job failure.
    - name: SLACK_WEBHOOK_URL
      default: ""
      documentation: Slack webhook URL. Webhook messages will be sent to this URL.
    - name: SLACK_ERROR_WEBHOOK_URL
      default: ""
      documentation: Slack errors webhook URL. Webhook error messages will be sent to this URL.
  documentation: >-
    This step re-triggers failed job if the job fails during `pre phase`.
    This step is intended to be used in conjunction with https://github.com/RedHatQE/openshift-ci-job-trigger
    Add this step as the last `ref` in the workflow.
    Required keys in openshift vault:
      - openshift-ci-job-trigger-server-url
      - openshift-ci-api-token
    Optional keys in openshift vault:
      - openshift-ci-job-trigger-slack-webhook-url
      - openshift-ci-job-trigger-slack-error-webhook-url
