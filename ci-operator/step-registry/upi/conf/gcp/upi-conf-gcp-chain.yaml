chain:
  as: upi-conf-gcp
  steps:
  - chain: ipi-conf-gcp     # generate "install-config.yaml" for GCP
  - ref: upi-conf-gcp-vpc   # create a VPC to host the cluster
  - ref: ipi-conf-gcp-proxy # deploy SSH bastion host
  - ref: upi-conf-gcp       # create ignition-configs
  env:
    CREATE_SSH_BASTION: "no"
  documentation: >-
    This chain generates the files necessary to deploy a GCP UPI cluster.
    It creates an install-config.yaml using the ipi-conf-gcp chain.
    Then it uses that file to create the Ignition, metadata.json, and kubeconfig files.
    These files are copied to the shared dir for future consumption.
