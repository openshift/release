ref:
  as: upi-conf-vsphere
  from: upi-installer
  grace_period: 10m
  commands: upi-conf-vsphere-commands.sh
  credentials:
  - namespace: test-credentials
    name: vsphere-vmc
    mount_path: /var/run/vault/vsphere
  - namespace: test-credentials
    name: ci-ibmcloud
    mount_path: /var/run/vault/ibmcloud
  resources:
    requests:
      cpu: 10m
      memory: 100Mi
  env:
  - name: SIZE_VARIANT
    default: ""
    documentation: |-
      The size of the cluster in one of our supported t-shirt values that is standard across all CI environments.

      The sizes are:
      * "" (default) - 4 vCPU, 16GB control plane nodes, default workers
      * "compact" - 8 vCPU, 32GB control plane nodes, no workers
      * "tiny" - single 4 vCPU, 16GB control plane node, 2 workers

      These sizes are roughly consistent across all cloud providers, but we may not be able to instantiate some sizes
      in some regions or accounts due to quota issues.  
  documentation: >-
    This step creates the files necessary to deploy a vSphere UPI cluster.
    It requires an existing install-config.yaml to exist in the shared directory with the necessary configuration to deploy a cluster to the vSphere CI project.
    It uses this install-config.yaml to generate the govc.sh, Ignition, metadata.json, and kubeconfig files with the modifications required to support the vSphere UPI workflow.
    These files are copied to the shared directory for future consumption.
