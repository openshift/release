ref:
  as: gke-deprovision
  from_image:
    namespace: ocp
    name: "4.22"
    tag: upi-installer
  commands: gke-deprovision-commands.sh
  resources:
    requests:
      cpu: 100m
      memory: 100Mi
  timeout: 30m0s
  grace_period: 10m0s
  documentation: |-
    This step destroys the GKE cluster and cleans up GCP projects created by gke-provision.

    IMPORTANT: GCP project deletion does NOT automatically clean up all resources.
    Some resources (VPC, GKE clusters) can block project deletion and must be
    deleted explicitly first. This step handles the proper cleanup order:
    1. Delete GKE cluster
    2. Delete VPC resources (firewall rules, NAT, router, subnets, VPC)
    3. Delete customer project resources
    4. Delete both projects

    Reads from ${SHARED_DIR}:
    - mgmt-project-id: Management project ID
    - customer-project-id: Customer project ID
    - cluster-name: GKE cluster name
    - gcp-region: GCP region
    - infra-id: Infrastructure identifier