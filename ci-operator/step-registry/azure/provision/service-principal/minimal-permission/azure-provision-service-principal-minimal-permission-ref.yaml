ref:
  as: azure-provision-service-principal-minimal-permission
  from_image:
    namespace: ocp
    name: "4.14"
    tag: upi-installer
  grace_period: 10m
  commands: azure-provision-service-principal-minimal-permission-commands.sh
  resources:
    requests:
      cpu: 10m
      memory: 100Mi
  dependencies:
  - name: "release:latest"
    env: RELEASE_IMAGE_LATEST_FROM_BUILD_FARM
  env:
  - name: CLUSTER_TYPE_MIN_PERMISSOIN
    default: "IPI"
    documentation: |-
      The provision way to set up cluster to test installation with Azure crendentials with minimal permissions.
      Valid value: IPI UPI
  - name: ENABLE_MIN_PERMISSION_FOR_MARKETPLACE
    default: "false"
    documentation: |-
      Assign addtional permissions for SP to install cluster with marketplace image
  - name: ENABLE_MIN_PERMISSION_FOR_DES
    default: "false"
    documentation: |-
      Assign additional permissions for SP to install cluster configured disk encryption set
  - name: AZURE_PERMISSION_FOR_CLUSTER_SP
    default: ""
    documentation: |-
      Define permission assigned to cluster service principal. If not defined, will create
      customer role with minimal permission and assign to cluster sp on scope of subscription.
  documentation: |-
    Provision a service principal with minimal permissions required for IPI-on-Azure
