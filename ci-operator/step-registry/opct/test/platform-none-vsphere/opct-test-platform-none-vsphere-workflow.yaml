workflow:
  as: opct-test-platform-none-vsphere
  steps:
    pre:
      - chain: opct-cluster-vsphere-upi-platform-none-pre
      - ref: provider-certification-tool-conf-dedicated
      - ref: provider-certification-tool-conf-setup
      - ref: provider-certification-tool-wait-ready
    test:
      - ref: provider-certification-tool-run
      - ref: provider-certification-tool-results
    post:
      - chain: gather
      - ref: provider-certification-tool-destroy
      - ref: upi-deprovision-vsphere
      - ref: upi-deprovision-vsphere-dns
      - ref: ipi-deprovision-vsphere-lease
    env:
      OPCT_CLI_IMAGE: quay.io/opct/opct:v0.5.0
  documentation: |-
    The OPCT workflow installs OpenShift on vSphere using platform type None, then
    the run test steps using conformance workflow using OPCT, gather's the results archive, and
    performs environment cleanup.
    The OPCT_CLI_IMAGE and OPCT_DEV_EXTRA_CMD must be removed when OPCT v0.5 will be released.
