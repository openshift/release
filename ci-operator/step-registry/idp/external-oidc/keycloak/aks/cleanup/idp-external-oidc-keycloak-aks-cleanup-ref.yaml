ref:
  as: idp-external-oidc-keycloak-aks-cleanup
  from_image:
    namespace: ocp
    name: "4.19"
    tag: upi-installer
  commands: idp-external-oidc-keycloak-aks-cleanup-commands.sh
  env:
  - name: HYPERSHIFT_BASE_DOMAIN
    default: "ci.azure.devcluster.openshift.com"
    documentation: "A base domain for the keycloak server's dns record."
  - name: DNS_ZONE_RG_NAME
    default: "os4-common"
    documentation: "The Azure resource group containing the DNS zone for HYPERSHIFT_BASE_DOMAIN. Defaults to os4-common where ci.azure.devcluster.openshift.com is hosted."
  - name: USE_HYPERSHIFT_AZURE_CREDS
    default: "false"
    documentation: "If true, use hypershift azure credentials"
  credentials:
    - mount_path: /etc/hypershift-ci-jobs-azurecreds
      name: hypershift-ci-jobs-azurecreds
      namespace: test-credentials
  grace_period: 10m0s
  timeout: 15m0s
  resources:
    requests:
      cpu: 100m
      memory: 100Mi
  documentation: |-
    Cleanup DNS A record created for the Keycloak server in the shared DNS zone.
    This step should be run as a post/teardown step to clean up the DNS record
    from the os4-common resource group.
