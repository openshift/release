workflow:
  as: rosa-terraform-e2e-cluster
  steps:
    env:
      TF_VARS: |
        ocm_environment = "staging"
        url = "https://api.stage.openshift.com"
        openshift_version = "4.13.1"
    post:
    - ref: rosa-terraform-e2e-cluster-delete
    - ref: rosa-terraform-e2e-cluster-delete-account-roles
    pre:
    - ref: rosa-terraform-e2e-cluster-create-name
    - ref: rosa-terraform-e2e-cluster-create-account-roles
    - ref: rosa-terraform-e2e-cluster-create

  documentation: |-
    This workflow installs a ocm-rosa cluster via terraform provider.
    After finish testing, the cluster will be destroyed.
