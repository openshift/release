ref:
  as: aws-windows-ami-discover
  from: upi-installer
  commands: aws-windows-ami-discover-commands.sh
  resources:
    requests:
      cpu: 100m
      memory: 100Mi
  env:
    - name: BYOH_WINDOWS_VERSION
      default: "2022"
      documentation: "Windows Server version to discover (2019 or 2022)"
  documentation: |-
    Discovers the latest Windows Server AMI ID in the target AWS region.

    This step queries the AWS API to find the latest official Windows Server AMI
    and exports it to SHARED_DIR/AWS_WINDOWS_AMI for use by windows-byoh-provision.

    Required for UPI workflows where Windows MachineSets don't exist to extract AMI from.
