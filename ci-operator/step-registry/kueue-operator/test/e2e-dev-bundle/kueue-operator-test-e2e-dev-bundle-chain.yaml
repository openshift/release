chain:
  as: kueue-operator-test-e2e-dev-bundle
  steps:
  - ref: cert-manager-install-operator
  - ref: kueue-operator-dev-bundle
  - as: run-sdk
    commands: |
      source "${SHARED_DIR}/env"
      echo "Using Bundle Image: ${BUNDLE_IMAGE}"
      operator-sdk run bundle --timeout=10m -n openshift-kueue-operator "$BUNDLE_IMAGE" --security-context-config=restricted
    from: operator-sdk
    resources:
      requests:
        cpu: 200m
        memory: 300Mi
  - chain: jobset-install
  - chain: leader-worker-set-install
  - as: e2e-kueue
    cli: latest
    commands: |
      source "${SHARED_DIR}/env"
      make e2e-ci-test
    from: kueue-operator-src
    resources:
      requests:
        cpu: "4"
        memory: "4Gi"
  - as: e2e-kueue-upstream
    cli: latest
    commands: |
      source "${SHARED_DIR}/env"
      make e2e-upstream-test
    from: kueue-operator-src
    resources:
      requests:
        cpu: "4"
        memory: "4Gi"
  documentation: |-
    This chain runs the e2e test suites for The Kueue operator.
