ref:
  as: mco-conf-day2-os-image-stream
  from: cli
  commands: mco-conf-day2-os-image-stream-commands.sh
  resources:
    requests:
      cpu: 10m
      memory: 100Mi
  env:
    - name: MCO_CONF_DAY2_OS_IMAGE_STREAM_POOLS
      default: ""
      documentation: |
        Space-separated list containing the names of the MachineConfigPools
        where the osImageStream will be configured.
        If the value is empty, ALL MachineConfigPools in the cluster will be configured.
        Example: "worker custom-pool" or "" (for all pools)
    - name: MCO_CONF_DAY2_OS_IMAGE_STREAM_NAME
      default: ""
      documentation: |
        Name of the osImageStream to configure on the MCPs.
        This must reference a valid stream name from the OSImageStream cluster resource.
        The name must be a lowercase RFC 1123 subdomain (lowercase alphanumeric, hyphens, dots).
        If the value is empty, this step will be skipped.
        Example: "rhel10-coreos"
    - name: MCO_CONF_DAY2_OS_IMAGE_STREAM_TIMEOUT
      default: "40m"
      documentation: |
        Maximum time that we will wait for a single pool to be updated with the new osImageStream.
        The default 40m value is configured for 3 masters and 3 workers.
        If configuring pools with more nodes, increase this value accordingly.
  documentation: |-
    This step configures MachineConfigPools to use a specific osImageStream
    and waits for the configuration to be applied. If no specific pools are listed,
    all MachineConfigPools in the cluster will be configured.
    This requires the OSStreams feature gate to be enabled.
