ref:
  as: interop-tests-fusion-access-create-pull-secrets
  from: cli
  commands: interop-tests-fusion-access-create-pull-secrets-commands.sh
  timeout: 5m0s
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  credentials:
  - namespace: test-credentials
    name: fusion-access-operator
    mount_path: /var/run/secrets
  documentation: |-
    Create Fusion Access pull secrets for IBM entitlement key and additional registry access.
    This step creates the necessary Kubernetes secrets for accessing IBM and other required container registries.
    These secrets are used by other steps in the test chain.
    
    This step handles IBM entitlement credentials gracefully:
    - Checks standard credential location at /var/run/secrets/ibm-entitlement-key
    - Continues execution even without credentials
    - Provides clear messaging about credential status
  env:
  - name: FUSION_ACCESS_NAMESPACE
    documentation: The namespace for Fusion Access Operator
    default: "ibm-fusion-access"
  - name: IBM_ENTITLEMENT_KEY
    documentation: IBM entitlement key for accessing IBM container registries
  - name: IBM_REGISTRY
    documentation: IBM container registry URL
    default: "cp.icr.io"
  - name: FUSION_PULL_SECRET_EXTRA
    documentation: Additional pull secret for openshift-storage-scale registry access
