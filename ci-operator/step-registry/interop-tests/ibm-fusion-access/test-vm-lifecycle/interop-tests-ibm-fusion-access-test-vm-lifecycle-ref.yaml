ref:
  as: interop-tests-ibm-fusion-access-test-vm-lifecycle
  from: cli
  commands: interop-tests-ibm-fusion-access-test-vm-lifecycle-commands.sh
  timeout: 2h0m0s
  grace_period: 5m0s
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  documentation: |-
    Test CNV VM lifecycle operations with IBM Storage Scale shared storage.
    
    This step tests VM stop and restart operations to verify that VMs can be
    properly stopped and restarted while preserving data on IBM Storage Scale
    shared storage.
    
    Tests implemented:
    - FA-CNV-1011: Stop VM with shared storage (verify VMI deletion and VM status)
    - FA-CNV-1012: Restart VM with shared storage (verify data persistence)
    
    Prerequisites:
    - CNV must be deployed and operational
    - IBM Storage Scale shared storage class must be configured
    - Test namespace will be created if it doesn't exist
  env:
  - name: CNV_NAMESPACE
    documentation: The namespace for CNV
    default: "openshift-cnv"
  - name: SHARED_STORAGE_CLASS
    documentation: Storage class for shared storage between CNV and IBM Fusion Access
    default: "ibm-spectrum-scale-cnv"
  - name: TEST_NAMESPACE
    documentation: Namespace for testing VM lifecycle operations
    default: "cnv-lifecycle-test"
  - name: VM_NAME
    documentation: Name of the test VM
    default: "test-lifecycle-vm"
  - name: VM_CPU_REQUEST
    documentation: CPU request for test VM
    default: "1"
  - name: VM_MEMORY_REQUEST
    documentation: Memory request for test VM
    default: "1Gi"


