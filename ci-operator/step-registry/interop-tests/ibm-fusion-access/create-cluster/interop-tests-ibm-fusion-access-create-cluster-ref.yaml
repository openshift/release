ref:
  as: interop-tests-ibm-fusion-access-create-cluster
  from: cli
  commands: interop-tests-ibm-fusion-access-create-cluster-commands.sh
  timeout: 15m0s
  grace_period: 15s
  best_effort: true
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  env:
  - name: STORAGE_SCALE_NAMESPACE
    documentation: The namespace for IBM Storage Scale
    default: "ibm-spectrum-scale"
  - name: STORAGE_SCALE_CLUSTER_NAME
    documentation: The name of the IBM Storage Scale cluster
    default: "ibm-spectrum-scale"
  - name: STORAGE_SCALE_CLIENT_CPU
    documentation: CPU allocation for client nodes
    default: "2"
  - name: STORAGE_SCALE_CLIENT_MEMORY
    documentation: Memory allocation for client nodes
    default: "4Gi"
  - name: STORAGE_SCALE_STORAGE_CPU
    documentation: CPU allocation for storage nodes
    default: "2"
  - name: STORAGE_SCALE_STORAGE_MEMORY
    documentation: Memory allocation for storage nodes
    default: "8Gi"
  documentation: |-
    Create IBM Storage Scale Cluster with /dev/disk/by-id/* device pattern.
    
    This step creates the Cluster resource using the IBM-recommended /dev/disk/by-id/*
    wildcard pattern for device discovery. This pattern works across all AWS instance
    types and avoids hardcoded device paths.
    
    Key features:
    - Uses /dev/disk/by-id/* wildcard for automatic device discovery
    - Works across different AWS instance types (c5n.metal, etc.)
    - Discovers all attached EBS volumes automatically
    - Avoids NVMe vs /dev/sd* naming issues
    - Requires KMM registry configuration for kernel module building
    
    Reference: IBM Storage Scale Container Native documentation
    
    Tests performed (JUnit XML):
    1. Cluster idempotency check
    2. Cluster resource creation (with device pattern)
    3. Cluster existence verification
    4. Verify /dev/disk/by-id/* device pattern configured
