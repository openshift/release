ref:
  as: interop-tests-ibm-fusion-access-create-local-disks
  from: cli
  commands: interop-tests-ibm-fusion-access-create-local-disks-commands.sh
  timeout: 10m0s
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  env:
  - name: FA__SCALE__NAMESPACE
    documentation: The namespace for IBM Storage Scale
    default: "ibm-spectrum-scale"
  - name: FA__LOCALDISK_NAME
    documentation: Name of the shared LocalDisk resource
    default: "shared-san-disk"
  documentation: |-
    Create IBM Storage Scale LocalDisk resource for shared SAN storage.
    
    This step creates a SINGLE LocalDisk custom resource representing the
    multi-attach io2 EBS volume shared by all worker nodes. This follows
    IBM's documented SAN architecture where a shared LUN is accessible
    from all storage nodes.
    
    The LocalDisk is created with:
    - device: NVMe device path pattern for EBS volumes
    - node: First worker node (used for device discovery only)
    - nodeConnectionSelector: Matches ALL worker nodes (shared access)
    
    This step must run after:
    - IBM Storage Scale cluster creation
    - Multi-attach EBS volume attachment (interop-tests-ibm-fusion-access-create-aws-multiattach-ebs)
    
    This step must run before:
    - Filesystem creation (which references the LocalDisk name)

