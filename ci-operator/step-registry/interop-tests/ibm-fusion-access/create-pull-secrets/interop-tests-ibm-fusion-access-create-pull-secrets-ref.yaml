ref:
  as: interop-tests-ibm-fusion-access-create-pull-secrets
  from: cli
  commands: interop-tests-ibm-fusion-access-create-pull-secrets-commands.sh
  timeout: 5m0s
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  credentials:
  - namespace: test-credentials
    name: fusion-access-operator
    mount_path: /var/run/secrets
  documentation: |-
    Create Fusion Access pull secrets for IBM entitlement key and additional registry access.
    This step creates the necessary Kubernetes secrets for accessing IBM and other required container registries.
    These secrets are used by other steps in the test chain.

    This step requires IBM entitlement credentials:
    - Checks standard credential location at /var/run/secrets/ibm-entitlement-key
    - Fails immediately if credentials are not available
    - Provides clear error messaging about missing credentials
  env:
  - name: FA__NAMESPACE
    documentation: The namespace for Fusion Access Operator
    default: "ibm-fusion-access"
  - name: FA__IBM_REGISTRY
    documentation: IBM container registry URL
    default: "cp.icr.io"
  - name: FA__SCALE__NAMESPACE
    documentation: The namespace for IBM Storage Scale
    default: "ibm-spectrum-scale"
  - name: FA__SCALE__DNS_NAMESPACE
    documentation: The namespace for IBM Storage Scale DNS
    default: "ibm-spectrum-scale-dns"
  - name: FA__SCALE__CSI_NAMESPACE
    documentation: The namespace for IBM Storage Scale CSI
    default: "ibm-spectrum-scale-csi"
  - name: FA__SCALE__OPERATOR_NAMESPACE
    documentation: The namespace for IBM Storage Scale Operator
    default: "ibm-spectrum-scale-operator"
