ref:
  as: ibm-fusion-access-create-pull-secrets
  from: cli
  commands: ibm-fusion-access-create-pull-secrets-commands.sh
  timeout: 5m0s
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  credentials:
  - namespace: test-credentials
    name: fusion-access-operator
    mount_path: /var/run/secrets
  documentation: |-
    Create IBM Fusion Access pull secrets for IBM entitlement key and additional registry access.

    **Required Secret Files** (mounted via credentials):
    - `ibm-entitlement-key` - IBM entitlement key for cp.icr.io registry access
    - `fusion-pullsecret-extra` - Additional pull secrets for IBM images (optional)

    **Credential Source:**
    - Vault path: test-credentials/fusion-access-operator
    - Contact: CSPI QE team (@cspi-qe-ocp-lp) for access

    **Local Testing:**
    For local step development, mount these secrets to /var/run/secrets/ directory.

    **Fail-Fast Behavior:**
    - Checks /var/run/secrets/ibm-entitlement-key
    - Fails immediately if credentials are not available
    - Provides clear error messaging about missing credentials
  env:
  - name: FA__NAMESPACE
    documentation: The namespace for IBM Fusion Access Operator
    default: "ibm-fusion-access"
  - name: FA__IBM_REGISTRY
    documentation: IBM container registry URL
    default: "cp.icr.io"
  - name: FA__SCALE__NAMESPACE
    documentation: The namespace for IBM Storage Scale
    default: "ibm-spectrum-scale"
  - name: FA__SCALE__DNS_NAMESPACE
    documentation: The namespace for IBM Storage Scale DNS
    default: "ibm-spectrum-scale-dns"
  - name: FA__SCALE__CSI_NAMESPACE
    documentation: The namespace for IBM Storage Scale CSI
    default: "ibm-spectrum-scale-csi"
  - name: FA__SCALE__OPERATOR_NAMESPACE
    documentation: The namespace for IBM Storage Scale Operator
    default: "ibm-spectrum-scale-operator"
