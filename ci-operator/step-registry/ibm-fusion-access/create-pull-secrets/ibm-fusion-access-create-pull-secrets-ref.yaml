ref:
  as: ibm-fusion-access-create-pull-secrets
  from: cli
  commands: ibm-fusion-access-create-pull-secrets-commands.sh
  timeout: 5m0s
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  credentials:
  - namespace: test-credentials
    name: fusion-access-operator
    mount_path: /var/run/secrets
  documentation: |-
    Create IBM Fusion Access pull secrets for IBM entitlement key and additional registry access.
    
    **Required Secret Files** (mounted via credentials):
    - `ibm-entitlement-key` - IBM entitlement key for cp.icr.io registry access
    - `fusion-pullsecret-extra` - Additional pull secrets for IBM images (optional)
    
    **Credential Source:**
    - Vault path: test-credentials/fusion-access-operator
    - Contact: CSPI QE team (@cspi-qe-ocp-lp) for access
    
    **Local Testing:**
    For local step development, mount these secrets to /var/run/secrets/ directory.
    
    **Graceful Handling:**
    - Checks /var/run/secrets/ibm-entitlement-key
    - Continues without credentials if not available
    - Provides clear status messaging
  env:
  - name: FA__NAMESPACE
    documentation: The namespace for IBM Fusion Access Operator
    default: "ibm-fusion-access"
  - name: FA__IBM_REGISTRY
    documentation: IBM container registry URL
    default: "cp.icr.io"
