workflow:
  as: openshift-e2e-aws-custom-dns
  steps:
    env:
      BASE_DOMAIN: qe1.devcluster.openshift.com
    pre:
    - chain: ipi-conf-aws
    - ref: ipi-conf-aws-usage-info
    - chain: aws-provision-iam-user-minimal-permission
    - ref: ipi-install-rbac
    - ref: openshift-cluster-bot-rbac
    - ref: ipi-install-hosted-loki
    - ref: ipi-install-install
    - ref: cucushift-installer-check-user-provisioned-dns
    - ref: aws-provision-public-custom-dns
    - ref: aws-provision-route53-public-record-sets
    - ref: ipi-install-times-collection
    - ref: nodes-readiness
    - ref: multiarch-validate-nodes
    - chain: cucushift-installer-check
    test:
    - ref: openshift-e2e-test
    post:
    - chain: cucushift-installer-rehearse-aws-ipi-deprovision
    - ref: aws-deprovision-route53-public-record-sets
  documentation: |-
    The Openshift E2E AWS workflow executes the common end-to-end test suite on an AWS configuration with custom security groups.
