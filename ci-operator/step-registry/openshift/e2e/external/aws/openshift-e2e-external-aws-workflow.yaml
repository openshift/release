workflow:
  as: openshift-e2e-external-aws
  steps:
    pre:
    - chain: platform-external-cluster-aws-pre
    test:
    - ref: openshift-e2e-test
    post:
    - chain: gather
    - chain: platform-external-cluster-aws-post
    dependencies:
      OPENSHIFT_INSTALL_RELEASE_IMAGE_OVERRIDE: "release:initial"
      OPENSHIFT_UPGRADE_RELEASE_IMAGE_OVERRIDE: "release:latest"
    env:
      PROVIDER_NAME: aws
      PLATFORM_EXTERNAL_CCM_ENABLED: no
      BASE_DOMAIN: origin-ci-int-aws.dev.rhcloud.com
      # FIXME: The following test skips must be removed once the issue is fixed.
      # https://issues.redhat.com/browse/SPLAT-1854
      TEST_SKIPS: >-
        \[sig-network\]\[Feature:Router\] The HAProxy router should expose the profiling endpoints \[Skipped:Disconnected\] \[Suite:openshift/conformance/parallel\]\|\[sig-network\]\[Feature:Router\] The HAProxy router should expose a health check on the metrics port \[Skipped:Disconnected\] \[Suite:openshift/conformance/parallel\]\|\[sig-network\]\[Feature:Router\] The HAProxy router should enable openshift-monitoring to pull metrics \[Skipped:Disconnected\] \[Suite:openshift/conformance/parallel\]\|\[sig-network\]\[Feature:Router\] The HAProxy router should expose prometheus metrics for a route \[apigroup:route.openshift.io\] \[Skipped:Disconnected\] \[Suite:openshift/conformance/parallel\]\|\[sig-network\] LoadBalancers \[Feature:LoadBalancer\] should be able to preserve UDP traffic when server pod cycles for a LoadBalancer service on the same nodes \[Skipped:alibabacloud\] \[Skipped:aws\] \[Skipped:baremetal\] \[Skipped:ibmcloud\] \[Skipped:kubevirt\] \[Skipped:nutanix\] \[Skipped:openstack\] \[Skipped:ovirt\] \[Skipped:vsphere\] \[Suite:openshift/conformance/parallel\] \[Suite:k8s\]\|\[sig-network\] LoadBalancers \[Feature:LoadBalancer\] should be able to preserve UDP traffic when server pod cycles for a LoadBalancer service on different nodes \[Skipped:alibabacloud\] \[Skipped:aws\] \[Skipped:baremetal\] \[Skipped:ibmcloud\] \[Skipped:kubevirt\] \[Skipped:nutanix\] \[Skipped:openstack\] \[Skipped:ovirt\] \[Skipped:vsphere\] \[Suite:openshift/conformance/parallel\] \[Suite:k8s\]
      TEST_ARGS: '--disable-monitor=service-type-load-balancer-availability'
  documentation: |-
    The origin E2E workflow to validate clusters installed on AWS with platform type external.
