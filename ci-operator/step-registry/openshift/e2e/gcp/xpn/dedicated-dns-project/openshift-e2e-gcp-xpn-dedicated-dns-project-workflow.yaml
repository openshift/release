workflow:
  as: openshift-e2e-gcp-xpn-dedicated-dns-project
  steps:
    env:
      CREDENTIALS_MODE: Passthrough
      PRE_CREATE_PRIVATE_ZONE: "no"
      PRIVATE_ZONE_PROJECT: openshift-qe-regional
    pre:
      - chain: ipi-conf-gcp-xpn
      - ref: ipi-conf-credentials-mode
      - ref: gcp-provision-private-dns-zone
      - ref: ipi-conf-gcp-private-dns-zone
      - chain: ipi-install
      - chain: cucushift-installer-check
      - ref: cucushift-installer-check-gcp-credentials-mode
    test:
      - ref: openshift-e2e-test
    post:
      - chain: cucushift-installer-rehearse-gcp-ipi-deprovision
      - ref: cucushift-installer-check-gcp-byo-hosted-zone-post-cluster-destroy
      - ref: gcp-deprovision-private-dns-zone
      - chain: ipi-conf-gcp-xpn-post
  documentation: |-
    The Openshift E2E GCP XPN workflow, of DNS in the dedicated project, for test Cluster API integration.
