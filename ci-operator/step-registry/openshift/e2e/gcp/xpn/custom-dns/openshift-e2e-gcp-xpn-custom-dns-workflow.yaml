workflow:
  as: openshift-e2e-gcp-xpn-custom-dns
  steps:
    env:
      BASE_DOMAIN: qe1.devcluster.openshift.com
      CREDENTIALS_MODE: Passthrough
      USER_PROVISIONED_DNS: "yes"
    pre:
      - chain: ipi-conf-gcp-xpn
      - ref: ipi-conf-credentials-mode
      - ref: ipi-install-rbac
      - ref: openshift-cluster-bot-rbac
      - ref: ipi-install-hosted-loki
      - ref: ipi-install-install
      - ref: gcp-provision-public-custom-dns
      - ref: aws-provision-route53-public-record-sets
      - ref: ipi-install-times-collection
      - ref: nodes-readiness
      - ref: multiarch-validate-nodes
      - chain: cucushift-installer-check
      - ref: cucushift-installer-check-gcp-credentials-mode
      - ref: cucushift-installer-check-user-provisioned-dns
    test:
      - ref: openshift-e2e-test
    post:
      - chain: cucushift-installer-rehearse-gcp-ipi-deprovision
      - ref: aws-deprovision-route53-public-record-sets
      - chain: ipi-conf-gcp-xpn-post
  documentation: |-
    The Openshift E2E GCP XPN workflow, of user provisioned dns, for test Cluster API integration.
