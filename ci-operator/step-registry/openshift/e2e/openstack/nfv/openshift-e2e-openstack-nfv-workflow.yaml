workflow:
  as: openshift-e2e-openstack-nfv
  steps:
    pre:
      - chain: ipi-openstack-pre
      - ref: openstack-provision-performanceprofile
      - ref: openstack-provision-vfio-noiommu
      - ref: openstack-provision-vhostuser
      - ref: openstack-provision-config-drive
      - ref: openstack-provision-sriov-worker
      - ref: optional-operators-subscribe
      - ref: openstack-provision-sriov-networknodepolicy
    test:
      - ref: openstack-test-dpdk
      - ref: openstack-test-sriov
    post:
      - chain: ipi-openstack-post
    env:
      ADDITIONAL_WORKERS_NETWORKS: "hostonly"
      BASE_DOMAIN: shiftstack.devcluster.openshift.com
      CONFIG_TYPE: "minimal"
      OO_INSTALL_NAMESPACE: openshift-sriov-network-operator
      OO_CHANNEL: alpha
      OO_PACKAGE: sriov-network-operator
      OO_TARGET_NAMESPACES: '!install'
      OPENSTACK_DPDK_NETWORK: "hostonly"
      OPENSTACK_SRIOV_NETWORK: "hostonly-sriov"
      WORKER_REPLICAS: 1
  documentation: |-
    The openshift-e2e-openstack-nfv workflow executes an installation of
    OpenShift on OpenStack in NFV environment.
