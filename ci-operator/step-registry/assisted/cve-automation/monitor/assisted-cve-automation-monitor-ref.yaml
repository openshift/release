ref:
  as: assisted-cve-automation-monitor
  from: cve-automation
  grace_period: 15m
  commands: assisted-cve-automation-monitor-commands.sh
  resources:
    requests:
      cpu: "1"
      memory: 1Gi
    limits:
      memory: 2Gi
  credentials:
    - mount_path: /var/run/vault/cve-automation-jira
      name: cve-automation-jira
      namespace: test-credentials
    - mount_path: /var/run/vault/cve-automation-github-app
      name: cve-automation-github-app
      namespace: test-credentials
  env:
    - name: JIRA_API_TOKEN
      default: ""
      documentation: |-
        JIRA API token for CVE tracking, loaded from mounted secret.
    - name: GH_TOKEN
      default: ""
      documentation: |-
        GitHub App token for repository access, loaded from mounted secret.
  documentation: |-
    This step monitors the status of CVE-related pull requests and updates
    the CVE tracking accordingly. It checks PR status (merged/closed), updates
    CVE status, and removes completed CVEs when JIRA tickets are closed.