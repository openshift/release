ref:
  as: assisted-cve-automation-scan
  from: cve-automation
  grace_period: 30m
  commands: assisted-cve-automation-scan-commands.sh
  resources:
    requests:
      cpu: "1"
      memory: 2Gi
    limits:
      memory: 4Gi
  credentials:
    - mount_path: /secrets/jira
      name: jira-credentials-cve-automation
      namespace: test-credentials
    - mount_path: /secrets/github
      name: github-app-cve-automation
      namespace: test-credentials
  env:
    - name: JIRA_API_TOKEN
      default: ""
      documentation: |-
        JIRA API token for CVE tracking, loaded from mounted secret.
    - name: GH_TOKEN
      default: ""
      documentation: |-
        GitHub App token for repository access, loaded from mounted secret.
  documentation: |-
    This step scans Go repositories for known CVEs using Trivy and creates
    a structured report of vulnerabilities. The scan covers all configured
    repositories and branches, checking for vulnerable dependencies and
    cross-referencing with existing JIRA tickets.