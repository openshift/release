ref:
  as: assisted-cve-automation-patch
  from: cve-automation
  grace_period: 60m
  commands: assisted-cve-automation-patch-commands.sh
  resources:
    requests:
      cpu: "2"
      memory: 4Gi
    limits:
      memory: 8Gi
  credentials:
    - mount_path: /var/run/vault/cve-automation-jira
      name: cve-automation-jira
      namespace: test-credentials
    - mount_path: /var/run/vault/cve-automation-github-app
      name: cve-automation-github-app
      namespace: test-credentials
  env:
    - name: JIRA_API_TOKEN
      default: ""
      documentation: |-
        JIRA API token for CVE tracking, loaded from mounted secret.
    - name: GH_TOKEN
      default: ""
      documentation: |-
        GitHub App token for repository access, loaded from mounted secret.
  documentation: |-
    This step processes CVEs from the cves.yaml file and creates patches for
    new vulnerabilities. It updates Go dependencies using multiple strategies,
    creates pull requests with the fixes, and updates CVE status to pending.