ref:
  as: assisted-baremetal-operator-catalog-publish
  from: assisted-service-scripts
  cli: latest
  commands: assisted-baremetal-operator-catalog-publish-commands.sh
  resources:
    requests:
      cpu: 1000m
      memory: 500Mi
  credentials:
  - mount_path: /secrets/docker
    name: edge-infrastructure-quay-push
    namespace: test-credentials
  - mount_path: /secrets/registry-pull-credentials
    name: registry-pull-credentials
    namespace: test-credentials
  dependencies:
  - name: "ci-index"
    env: INDEX_IMAGE
  env:
  - name: SECRETS_PATH
    default: /secrets
    documentation: |-
      The directory where credentials will be mounted.
  - name: REGISTRY_SECRET
    default: docker
    documentation: |-
      The name of the kube secret that contains the docker/config.json.
  - name: REGISTRY_SECRET_FILE
    default: config.json
    documentation: |-
      The name of the file in REGSITRY_SECRET with the contents of
      the .docker/config.json file.
  - name: CI_REGISTRY_SECRET
    default: registry-pull-credentials
    documentation: |-
      The name of the kube secret that contains the CI .dockerconfigjson file
  - name: CI_REGISTRY_SECRET_FILE
    default: .dockerconfigjson
    documentation: |-
      The name of the file in CI_REGISTRY_SECRET with the contents of
      the .docker/config.json file.
  - name: REGISTRY_HOST
    default: quay.io
    documentation: |-
      The hostname (and port) of the destination registry.
  - name: REGISTRY_ORG
    default: edge-infrastructure
    documentation: |-
      The organization of the destination image reference.
  - name: REGISTRY_CATALOG_REPOSITORY_NAME
    default: assisted-service-index
    documentation: |-
      The destination image repository for the mirrored catalog.
  - name: REGISTRY_CATALOG_REPOSITORY_TAG
    default: latest
    documentation: |-
      The destination image repository tag for the mirrored catalog.
  timeout: 60m0s
  grace_period: 1m0s
  documentation: |-
    Mirror the CI operator catalog to quay.io
