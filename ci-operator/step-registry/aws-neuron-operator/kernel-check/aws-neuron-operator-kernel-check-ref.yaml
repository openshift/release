ref:
  as: aws-neuron-operator-kernel-check
  from: cli
  commands: aws-neuron-operator-kernel-check-commands.sh
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  env:
  - name: OPENSHIFT_VERSION
    default: "4.20"
    documentation: The OCP version to check kernel for
  - name: LAST_KNOWN_DTK_COMMIT
    default: ""
    documentation: |-
      The last known commit SHA of driver-toolkit.json.
      Set this after first successful run to enable skip optimization.
      Leave empty for first run (will always run tests).
  documentation: |-
    Checks if the driver-toolkit.json has been updated since the last run.
    If unchanged, creates skip.txt in SHARED_DIR to signal subsequent steps to exit early.
    This optimization prevents unnecessary cluster provisioning when no kernel changes occurred.
