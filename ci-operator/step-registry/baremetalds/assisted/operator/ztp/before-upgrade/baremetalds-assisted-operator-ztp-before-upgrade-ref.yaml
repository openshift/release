ref:
  as: baremetalds-assisted-operator-ztp-before-upgrade
  from: assisted-service-scripts
  commands: baremetalds-assisted-operator-ztp-before-upgrade-commands.sh
  resources:
    requests:
      cpu: 1000m
      memory: 500Mi
  timeout: 1h30m0s
  grace_period: 5m0s
  dependencies:
    - name: "release:candidate"
      env: ASSISTED_OPENSHIFT_INSTALL_RELEASE_IMAGE_OVERRIDE
  env:
  - name: ASSISTED_OPENSHIFT_VERSION
    default: "openshift-v4.8.10"
  - name: ASSISTED_UPGRADE_OPERATOR
    default: "true"
    documentation: |-
      Determines the ASSISTED_OPENSHIFT_VERSION to be used. Before upgrading the operator, the value is set to "true",
      which signals that the current operator needs to be updated. The value is derived from the default_ocp_versions.json. 
      When set to "true", ASSISTED_OPENSHIFT_VERSION gets the value 4.8. Otherwise, 4.9. 
      After upgrading the operator, the value of this variable is "false".
  - name: ASSISTED_STOP_AFTER_AGENT_DISCOVERY
    default: "false"
    documentation: |-
      Determines if a full cluster deployment is needed. Before upgrading the operator, the value of this variable is "false", 
      which preserves the existing behavior and completes cluster installation. After upgrading the operator, the value of this variable is true.
      When set to "true", cluster installation will stop after agents are discovered.
  - name : ASSISTED_DEPLOYMENT_METHOD
    default: "from_community_operators"
  - name : CHANNEL_INSTALL_OVERRIDE
    default: "ocm-2.3"
  documentation: |-
    Using Assisted installer running on an OCP hub cluster, install a spoke OCP cluster.
