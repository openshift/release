ref:
  as: baremetalds-two-node-fencing-post-install-node-degredation
  from: tests
  commands: baremetalds-two-node-fencing-post-install-node-degredation-commands.sh
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  env:
  - name: DEGRADED_NODE
    default: "false"
    documentation: |-
      If set to "true", degrades one of the running nodes after installation.
  documentation: |-
    This step optionally degrades one of the running nodes in a two-node fencing cluster
    by undefining and destroying the second master node if DEGRADED_NODE is set to "true".
    When running in degraded mode, certain tests are expected to be skipped due to fundamental platform
    limitations of a Two-Node Fencing (TNF) cluster operating in a degraded state.

    The authoritative source of truth for:
    - which tests are skipped,
    - whether the skip is expected,
    - and the rationale behind each decision,

    is tracked and reviewed in the following document:
    https://docs.google.com/spreadsheets/d/1IhAUoKRtlgp3krhnUp9Cyy-ITO8wuaDgppbRyNcU3x4/edit?gid=318709113

    Any changes to skip behavior in degraded TNF workflows must be aligned with this
    document to ensure consistency, correctness, and reviewability.
