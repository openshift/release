ref:
  as: windows-conf-operator-olmv1
  from: cli
  commands: windows-conf-operator-olmv1-commands.sh
  resources:
    requests:
      cpu: 10m
      memory: 100Mi
  env:
  - name: WMCO_NAMESPACE
    default: "windows-machine-config-operator-system"
    documentation: The namespace into which WMCO will be deployed.
  - name: PACKAGE_NAME
    default: "windows-machine-config-operator"
    documentation: The package name for WMCO in the catalog.
  - name: CATALOG_NAME
    default: "wmco-catalog"
    documentation: The name of the ClusterCatalog to use for WMCO installation.
  - name: FBC_IMAGE
    default: "quay.io/redhat-user-workloads/windows-machine-conf-tenant/windows-machine-config-operator-fbc/windows-machine-config-operator-fbc-release-4-21:latest"
    documentation: The File-Based Catalog (FBC) image reference for WMCO.
  documentation: |-
    This step installs the Windows Machine Config Operator using OLM v1 (ClusterExtension API).
    It creates the necessary ImageDigestMirrorSet, ClusterCatalog, namespace, SSH secret, 
    ServiceAccount, RBAC, and deploys WMCO via ClusterExtension custom resource. 
    This requires a cluster with OLM v1 enabled (TechPreviewNoUpgrade feature set in OCP 4.18+).
