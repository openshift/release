ref:
  as: kms-mock-plugin-verify
  from: cli
  commands: kms-mock-plugin-verify-commands.sh
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  documentation: |-
    Verifies that the mock KMS plugin is running correctly on all control plane nodes.

    This step performs comprehensive verification:
    - Checks that KMS plugin pods are running on all control plane nodes
    - Verifies the Unix socket exists and is accessible
    - Checks pod logs for errors
    - Validates encryption status on kube-apiserver

    Prerequisites:
      - kms-mock-plugin-deploy must have been run
      - ${SHARED_DIR}/kms-plugin-socket-path must exist
      - ${SHARED_DIR}/kms-plugin-namespace must exist
      - ${SHARED_DIR}/kms-plugin-version must exist
