ref:
  as: servicemesh-mapt-create
  commands: servicemesh-mapt-create-commands.sh
  credentials:
  - mount_path: /tmp/secrets
    name: cluster-secrets-ossm-aws
    namespace: ci
  env:
  - name: PROJECT_NAME
    default: "servicemesh"
    documentation: "Project name for the MAPT cluster"
  - name: TEST_NAME
    default: "servicemesh-mapt"
    documentation: "Test name used for S3 bucket naming"
  - name: OCP_VERSION
    default: "4.20.0"
    documentation: "OpenShift version to deploy"
  - name: MAPT_TAGS
    default: "ci=true,repo=openshift-servicemesh"
    documentation: "Additional tags for the AWS instance"
  - name: SPOT
    default: "true"
    documentation: "Use AWS spot instances for cost savings"
  - name: SPOT_INCREASE_RATIO
    default: "40"
    documentation: "Percentage to increase the spot price over the on-demand price"
  - name: CPU
    default: "16"
    documentation: "Number of CPUs for the instance"
  - name: MEMORY
    default: "128"
    documentation: "Memory in GB for the instance"
  - name: TIMEOUT
    default: "10m"
    documentation: "Timeout for waiting for cluster to be ready"
  - name: AWS_REGION
    default: "us-east-1"
    documentation: "AWS region to deploy the cluster. If spot is true, the region will be picked based on best prices"
  from_image:
    name: mapt
    namespace: ci
    tag: v0.9.6
  resources:
    limits:
      cpu: "2"
      memory: 6Gi
    requests:
      cpu: "2"
      memory: 6Gi