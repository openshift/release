ref:
  as: servicemesh-istio-int-tests
  from: src
  commands: servicemesh-istio-int-tests-commands.sh
  resources:
    requests:
      cpu: '1'
      memory: 500Mi
  timeout: 3h0m0s
  env:
  - name: MAISTRA_NAMESPACE
    default: "maistra-e2e-test"
    documentation: |-
      The namespace where the test pod is running
  - name: MAISTRA_SC_POD
    default: "maistra-e2e-test-sc-pod"
    documentation: |-
      The name of the test pod where tests will be executed
  - name: AMBIENT
    default: "false"
    documentation: |-
      Set to true when running ambient tests.
  - name: CONTROL_PLANE_SOURCE
    default: "istio"
    documentation: |-
      Set to 'istio|sail' to use default CP installation or CP installation via sail operator.
  - name: INSTALL_SAIL_OPERATOR
    default: "false"
    documentation: |-
      Set to true to deploy sail operator via 'deploy' make target.
  - name: TEST_SUITE
    documentation: |-
      Which test suite should be run: 'ambient|security|telemetry|pilot|helm'
  - name: SKIPPED_TESTS
    default: ""
    documentation: |-
      Which tests should be skipped: e.g. 'TestAPIServer|TestTCPRoute|TestTLSRoute'
  - name: SKIPPED_SUITES
    default: ""
    documentation: |-
      Which suites should be skipped: e.g. 'external_ca|file_mounted_certs|policy_attachment_only'
  documentation: |-
    Runs Istio integration tests in given MAISTRA_SC_POD which must be prepared in advance.
