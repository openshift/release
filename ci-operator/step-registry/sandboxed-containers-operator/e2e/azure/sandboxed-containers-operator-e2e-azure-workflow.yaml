workflow:
  as: sandboxed-containers-operator-e2e-azure
  steps:
    env:
      SLEEP_DURATION: 3h
      TEST_PARALLEL: 1
      FORCE_SUCCESS_EXIT: no
      MUST_GATHER_IMAGE: "registry.redhat.io/openshift-sandboxed-containers/osc-must-gather-rhel9:latest"
      MUST_GATHER_TIMEOUT: "35m"
      ENABLE_MUST_GATHER: "true"
      MUST_GATHER_ON_FAILURE_ONLY: "true"
      TEST_FILTERS: ~DisconnectedOnly&;~Disruptive&
    pre:
    - chain: sandboxed-containers-operator-ipi-azure-pre
    - chain: sandboxed-containers-operator-pre
    post:
    - ref: cucushift-installer-wait
      timeout: 12h10m0s
      best_effort: true
      optional_on_success: true
    - ref: sandboxed-containers-operator-gather-must-gather
    - chain: ipi-azure-post
    test:
    - ref: openshift-extended-test
  documentation: |-
    This workflow run openshift-extented-test on an Azure cluster with
    the sandboxed containers deployed.
