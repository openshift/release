workflow:
  as: sandboxed-containers-operator-e2e-aws
  steps:
    env:
      TEST_PARALLEL: 1
      COMPUTE_NODE_REPLICAS: 2
      CONTROL_PLANE_REPLICAS: 3
      SPOT_INSTANCES: "false"
    pre:
    - chain: ipi-conf-aws
    - chain: aws-provision-iam-user-minimal-permission
    - ref: sandboxed-containers-operator-aws-region-override
    - chain: ipi-install
    - chain: sandboxed-containers-operator-pre
    post:
    - ref: cucushift-installer-wait
    - chain: ipi-aws-post
    test:
    - ref: openshift-extended-test
  documentation: |-
    This workflow run openshift-extented-test on an AWS cluster with
    the sandboxed containers deployed.
    AWS_REGION_OVERRIDE from sandboxed-containers-operator-aws-region-override
    defines the region to create the cluster in.
