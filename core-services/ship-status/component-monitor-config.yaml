frequency: 5m
components:
  - component_slug: "prow"
    sub_component_slug: "deck"
    http_monitor:
      url: "https://prow.ci.openshift.org/"
      code: 200
      retry_after: 4m
      severity: "Down"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
        - query: "max(up{job=\"deck\"}) > 0"
          duration: "5m"
          step: "30s"
          severity: "Down"
  - component_slug: "prow"
    sub_component_slug: "deck-internal"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
        - query: "max(up{job=\"deck-internal\"}) > 0"
          duration: "5m"
          step: "30s"
          severity: "Down"
  - component_slug: "prow"
    sub_component_slug: "qe-private-deck"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
        - query: "max(up{job=\"qe-private-deck\"}) > 0"
          duration: "5m"
          step: "30s"
          severity: "Down"
  - component_slug: "prow"
    sub_component_slug: "crier"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
        - query: "max(up{job=\"crier\"}) > 0"
          duration: "5m"
          step: "30s"
          severity: "Down"
  - component_slug: "prow"
    sub_component_slug: "sinker"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
        - query: "max(up{job=\"sinker\"}) > 0"
          duration: "5m"
          step: "30s"
          severity: "Down"
  - component_slug: "prow"
    sub_component_slug: "prow-controller-manager"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
        - query: "max(up{job=\"prow-controller-manager\"}) > 0"
          duration: "5m"
          step: "30s"
          severity: "Down"
  - component_slug: "prow"
    sub_component_slug: "tide"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
        - query: "max(up{job=\"tide\"}) > 0"
          duration: "5m"
          step: "30s"
          severity: "Down"
  - component_slug: "prow"
    sub_component_slug: "gangway"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
        - query: "max(up{job=\"gangway\"}) > 0"
          duration: "5m"
          step: "30s"
          severity: "Down"
  - component_slug: "prow"
    sub_component_slug: "gcsweb"
    http_monitor:
      url: "https://gcsweb-ci.apps.ci.l2s4.p1.openshiftapps.com/gcs/test-platform-results"
      code: 200
      retry_after: 4m
      severity: "Down"
  - component_slug: "prow"
    sub_component_slug: "ghproxy"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
        - query: "max(up{job=\"ghproxy\"}) > 0"
          duration: "5m"
          step: "30s"
          severity: "Down"
  - component_slug: "prow"
    sub_component_slug: "hook"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
        - query: "max(up{job=\"hook-apps\"}) > 0"
          duration: "5m"
          step: "30s"
          severity: "Down"
  - component_slug: "downstream-ci"
    sub_component_slug: "pj-rehearse-plugin"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
        - query: "max(up{job=\"pj-rehearse-plugin\"}) > 0"
          duration: "5m"
          step: "30s"
          severity: "Down"
  - component_slug: "downstream-ci"
    sub_component_slug: "retester"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
        - query: "max(up{job=\"retester\"}) > 0"
          duration: "5m"
          step: "30s"
          severity: "Down"
  - component_slug: "boskos"
    sub_component_slug: "leasing-server"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
      - query: "max(up{job=\"boskos\"}) > 0"
        duration: "5m"
        step: "30s"
        severity: "Down"
  - component_slug: "boskos"
    sub_component_slug: "aws"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
      - query: "sum(boskos_resources{type=\"aws-quota-slice\",state=\"free\"}) > 0"
        failure_query: "sum by (state) (boskos_resources{type=\"aws-quota-slice\"})"
        duration: "30m"
        step: "1m"
        severity: "CapacityExhausted"
  - component_slug: "boskos"
    sub_component_slug: "aws-2"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
      - query: "sum(boskos_resources{type=\"aws-2-quota-slice\",state=\"free\"}) > 0"
        failure_query: "sum by (state) (boskos_resources{type=\"aws-2-quota-slice\"})"
        duration: "30m"
        step: "1m"
        severity: "CapacityExhausted"
  - component_slug: "boskos"
    sub_component_slug: "aws-3"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
      - query: "sum(boskos_resources{type=\"aws-3-quota-slice\",state=\"free\"}) > 0"
        failure_query: "sum by (state) (boskos_resources{type=\"aws-3-quota-slice\"})"
        duration: "30m"
        step: "1m"
        severity: "CapacityExhausted"
  - component_slug: "boskos"
    sub_component_slug: "aws-4"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
      - query: "sum(boskos_resources{type=\"aws-4-quota-slice\",state=\"free\"}) > 0"
        failure_query: "sum by (state) (boskos_resources{type=\"aws-4-quota-slice\"})"
        duration: "30m"
        step: "1m"
        severity: "CapacityExhausted"
  - component_slug: "boskos"
    sub_component_slug: "aws-5"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
      - query: "sum(boskos_resources{type=\"aws-5-quota-slice\",state=\"free\"}) > 0"
        failure_query: "sum by (state) (boskos_resources{type=\"aws-5-quota-slice\"})"
        duration: "30m"
        step: "1m"
        severity: "CapacityExhausted"
  - component_slug: "boskos"
    sub_component_slug: "gcp"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
      - query: "sum(boskos_resources{type=\"gcp-quota-slice\",state=\"free\"}) > 0"
        failure_query: "sum by (state) (boskos_resources{type=\"gcp-quota-slice\"})"
        duration: "30m"
        step: "1m"
        severity: "CapacityExhausted"
  - component_slug: "boskos"
    sub_component_slug: "gcp-2"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
      - query: "sum(boskos_resources{type=\"gcp-openshift-gce-devel-ci-2-quota-slice\",state=\"free\"}) > 0"
        failure_query: "sum by (state) (boskos_resources{type=\"gcp-openshift-gce-devel-ci-2-quota-slice\"})"
        duration: "30m"
        step: "1m"
        severity: "CapacityExhausted"
  - component_slug: "boskos"
    sub_component_slug: "gcp-3"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
      - query: "sum(boskos_resources{type=\"gcp-3-quota-slice\",state=\"free\"}) > 0"
        failure_query: "sum by (state) (boskos_resources{type=\"gcp-3-quota-slice\"})"
        duration: "30m"
        step: "1m"
        severity: "CapacityExhausted"
  - component_slug: "boskos"
    sub_component_slug: "azure-2"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
      - query: "sum(boskos_resources{type=\"azure-2-quota-slice\",state=\"free\"}) > 0"
        failure_query: "sum by (state) (boskos_resources{type=\"azure-2-quota-slice\"})"
        duration: "30m"
        step: "1m"
        severity: "CapacityExhausted"
  - component_slug: "boskos"
    sub_component_slug: "azure4"
    prometheus_monitor:
      prometheus_location:
        cluster: "app.ci"
        namespace: "openshift-monitoring"
        route: "thanos-querier"
      queries:
      - query: "sum(boskos_resources{type=\"azure4-quota-slice\",state=\"free\"}) > 0"
        failure_query: "sum by (state) (boskos_resources{type=\"azure4-quota-slice\"})"
        duration: "30m"
        step: "1m"
        severity: "CapacityExhausted"
