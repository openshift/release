# GSM Configuration File for Secret Management
# This file defines how secrets from Google Secret Manager are bundled and consumed in our CI.
# See docs for further info: [TODO docs link]

cluster_groups:
  build_farm:
    - app.ci
    - build01
    - build02
    - build03
    - build04
    - build05
    - build06
    - build07
    - build08
    - build09
    - build10
    - build11
    - core-ci
    - vsphere02
  managed_clusters:
    - app.ci
    - build01
    - build02
    - build03
    - build04
    - build05
    - build06
    - build07
    - build08
    - build09
    - build10
    - build11
    - core-ci
    - hosted-mgmt
  non_app_ci:
    - build01
    - build02
    - build03
    - build04
    - build05
    - build06
    - build07
    - build08
    - build09
    - build10
    - build11
    - core-ci
    - vsphere02

bundles:
  - name: test-credentials
    gsm_secrets:
      - collection: psalajova-first-secret
        group: group1
    sync_to_cluster: true
    targets:
      - cluster: build01
        namespace: ci
