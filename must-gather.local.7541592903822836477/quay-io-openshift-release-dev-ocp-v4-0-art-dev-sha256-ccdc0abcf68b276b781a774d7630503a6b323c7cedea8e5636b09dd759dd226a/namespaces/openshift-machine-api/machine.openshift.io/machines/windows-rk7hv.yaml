---
apiVersion: machine.openshift.io/v1beta1
kind: Machine
metadata:
  annotations:
    machine.openshift.io/instance-state: Unknown
  creationTimestamp: "2024-06-11T11:30:37Z"
  finalizers:
  - machine.machine.openshift.io
  generateName: windows-
  generation: 1
  labels:
    machine.openshift.io/cluster-api-cluster: ci-op-9xx71rvq-1e28e-w667k
    machine.openshift.io/cluster-api-machine-role: worker
    machine.openshift.io/cluster-api-machine-type: worker
    machine.openshift.io/cluster-api-machineset: windows
    machine.openshift.io/exclude-node-draining: ""
    machine.openshift.io/os-id: Windows
  managedFields:
  - apiVersion: machine.openshift.io/v1beta1
    fieldsType: FieldsV1
    fieldsV1:
      f:metadata:
        f:generateName: {}
        f:labels:
          .: {}
          f:machine.openshift.io/cluster-api-cluster: {}
          f:machine.openshift.io/cluster-api-machine-role: {}
          f:machine.openshift.io/cluster-api-machine-type: {}
          f:machine.openshift.io/cluster-api-machineset: {}
          f:machine.openshift.io/exclude-node-draining: {}
          f:machine.openshift.io/os-id: {}
        f:ownerReferences:
          .: {}
          k:{"uid":"28914708-8af1-404e-868c-90eaaba1e3a0"}: {}
      f:spec:
        .: {}
        f:lifecycleHooks: {}
        f:metadata:
          .: {}
          f:labels:
            .: {}
            f:node-role.kubernetes.io/worker: {}
        f:providerSpec:
          .: {}
          f:value:
            .: {}
            f:acceleratedNetworking: {}
            f:apiVersion: {}
            f:credentialsSecret:
              .: {}
              f:name: {}
              f:namespace: {}
            f:diagnostics:
              .: {}
              f:boot:
                .: {}
                f:storageAccountType: {}
            f:image:
              .: {}
              f:offer: {}
              f:publisher: {}
              f:resourceID: {}
              f:sku: {}
              f:version: {}
            f:kind: {}
            f:location: {}
            f:managedIdentity: {}
            f:metadata:
              .: {}
              f:creationTimestamp: {}
            f:networkResourceGroup: {}
            f:osDisk:
              .: {}
              f:diskSettings: {}
              f:diskSizeGB: {}
              f:managedDisk:
                .: {}
                f:securityProfile:
                  .: {}
                  f:diskEncryptionSet: {}
                f:storageAccountType: {}
              f:osType: {}
            f:publicIP: {}
            f:publicLoadBalancer: {}
            f:resourceGroup: {}
            f:securityProfile:
              .: {}
              f:settings: {}
            f:subnet: {}
            f:userDataSecret:
              .: {}
              f:name: {}
            f:vmSize: {}
            f:vnet: {}
            f:zone: {}
    manager: machineset-controller
    operation: Update
    time: "2024-06-11T11:30:37Z"
  - apiVersion: machine.openshift.io/v1beta1
    fieldsType: FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          .: {}
          f:machine.openshift.io/instance-state: {}
        f:finalizers:
          .: {}
          v:"machine.machine.openshift.io": {}
    manager: machine-controller-manager
    operation: Update
    time: "2024-06-11T11:30:44Z"
  - apiVersion: machine.openshift.io/v1beta1
    fieldsType: FieldsV1
    fieldsV1:
      f:status:
        .: {}
        f:conditions: {}
        f:errorMessage: {}
        f:errorReason: {}
        f:lastUpdated: {}
        f:phase: {}
        f:providerStatus:
          .: {}
          f:conditions: {}
          f:metadata: {}
    manager: machine-controller-manager
    operation: Update
    subresource: status
    time: "2024-06-11T11:30:44Z"
  name: windows-rk7hv
  namespace: openshift-machine-api
  ownerReferences:
  - apiVersion: machine.openshift.io/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: MachineSet
    name: windows
    uid: 28914708-8af1-404e-868c-90eaaba1e3a0
  resourceVersion: "38773"
  uid: 79210d49-5360-43be-b805-d925a798e734
spec:
  lifecycleHooks: {}
  metadata:
    labels:
      node-role.kubernetes.io/worker: ""
  providerSpec:
    value:
      acceleratedNetworking: true
      apiVersion: machine.openshift.io/v1beta1
      credentialsSecret:
        name: azure-cloud-credentials
        namespace: openshift-machine-api
      diagnostics:
        boot:
          storageAccountType: AzureManaged
      image:
        offer: ""
        publisher: ""
        resourceID: 2022-datacenter
        sku: ""
        version: ""
      kind: AzureMachineProviderSpec
      location: centralus
      managedIdentity: ci-op-9xx71rvq-1e28e-w667k-identity
      metadata:
        creationTimestamp: null
      networkResourceGroup: ci-op-9xx71rvq-1e28e-w667k-rg
      osDisk:
        diskSettings: {}
        diskSizeGB: 128
        managedDisk:
          securityProfile:
            diskEncryptionSet: {}
          storageAccountType: Premium_LRS
        osType: Windows
      publicIP: false
      publicLoadBalancer: ci-op-9xx71rvq-1e28e-w667k
      resourceGroup: ci-op-9xx71rvq-1e28e-w667k-rg
      securityProfile:
        settings: {}
      subnet: ci-op-9xx71rvq-1e28e-w667k-worker-subnet
      userDataSecret:
        name: windows-user-data
      vmSize: Standard_D32s_v3
      vnet: ci-op-9xx71rvq-1e28e-w667k-vnet
      zone: "1"
status:
  conditions:
  - lastTransitionTime: "2024-06-11T11:30:38Z"
    status: "True"
    type: Drainable
  - lastTransitionTime: "2024-06-11T11:30:38Z"
    message: Instance has not been created
    reason: InstanceNotCreated
    severity: Warning
    status: "False"
    type: InstanceExists
  - lastTransitionTime: "2024-06-11T11:30:38Z"
    status: "True"
    type: Terminable
  errorMessage: 'failed to reconcile machine "windows-rk7hv": failed to create vm
    windows-rk7hv: failure sending request for machine windows-rk7hv: cannot create
    vm: compute.VirtualMachinesClient#CreateOrUpdate: Failure sending request: StatusCode=403
    -- Original Error: Code="LinkedAuthorizationFailed" Message="The client has permission
    to perform action ''Microsoft.Resources/subscriptions/read'' on scope ''/subscriptions/53b8f551-f0fc-4bea-8cba-6d1fefd54c8a/resourceGroups/ci-op-9xx71rvq-1e28e-w667k-rg/providers/Microsoft.Compute/virtualMachines/windows-rk7hv'',
    however the linked subscription ''53b8f551-f0fc-4bea-8cba-6d1fefd54c8a2022-datacenter''
    was not found. "'
  errorReason: InvalidConfiguration
  lastUpdated: "2024-06-11T11:30:44Z"
  phase: Failed
  providerStatus:
    conditions:
    - lastTransitionTime: "2024-06-11T11:30:44Z"
      message: 'failed to create vm windows-rk7hv: failure sending request for machine
        windows-rk7hv: cannot create vm: compute.VirtualMachinesClient#CreateOrUpdate:
        Failure sending request: StatusCode=403 -- Original Error: Code="LinkedAuthorizationFailed"
        Message="The client has permission to perform action ''Microsoft.Resources/subscriptions/read''
        on scope ''/subscriptions/53b8f551-f0fc-4bea-8cba-6d1fefd54c8a/resourceGroups/ci-op-9xx71rvq-1e28e-w667k-rg/providers/Microsoft.Compute/virtualMachines/windows-rk7hv'',
        however the linked subscription ''53b8f551-f0fc-4bea-8cba-6d1fefd54c8a2022-datacenter''
        was not found. "'
      reason: MachineCreationFailed
      status: "False"
      type: MachineCreated
    metadata: {}
