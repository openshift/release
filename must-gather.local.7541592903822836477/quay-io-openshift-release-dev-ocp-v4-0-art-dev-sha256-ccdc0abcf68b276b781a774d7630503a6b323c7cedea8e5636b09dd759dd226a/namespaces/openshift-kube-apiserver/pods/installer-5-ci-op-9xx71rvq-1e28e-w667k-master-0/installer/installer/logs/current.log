2024-06-11T10:56:24.038509095Z I0611 10:56:24.038260       1 cmd.go:92] &{<nil> true {false} installer true map[cert-configmaps:0xc00098a960 cert-dir:0xc00098ab40 cert-secrets:0xc00098a8c0 configmaps:0xc00098a460 namespace:0xc00098a280 optional-cert-configmaps:0xc00098aaa0 optional-cert-secrets:0xc00098aa00 optional-configmaps:0xc00098a5a0 optional-secrets:0xc00098a500 pod:0xc00098a320 pod-manifest-dir:0xc00098a6e0 resource-dir:0xc00098a640 revision:0xc00098a1e0 secrets:0xc00098a3c0 v:0xc00098bf40] [0xc00098bf40 0xc00098a1e0 0xc00098a280 0xc00098a320 0xc00098a640 0xc00098a6e0 0xc00098a460 0xc00098a5a0 0xc00098a3c0 0xc00098a500 0xc00098ab40 0xc00098a960 0xc00098aaa0 0xc00098a8c0 0xc00098aa00] [] map[cert-configmaps:0xc00098a960 cert-dir:0xc00098ab40 cert-secrets:0xc00098a8c0 configmaps:0xc00098a460 help:0xc000998320 kubeconfig:0xc00098a140 log-flush-frequency:0xc00098bea0 namespace:0xc00098a280 optional-cert-configmaps:0xc00098aaa0 optional-cert-secrets:0xc00098aa00 optional-configmaps:0xc00098a5a0 optional-secrets:0xc00098a500 pod:0xc00098a320 pod-manifest-dir:0xc00098a6e0 pod-manifests-lock-file:0xc00098a820 resource-dir:0xc00098a640 revision:0xc00098a1e0 secrets:0xc00098a3c0 timeout-duration:0xc00098a780 v:0xc00098bf40 vmodule:0xc000998000] [0xc00098a140 0xc00098a1e0 0xc00098a280 0xc00098a320 0xc00098a3c0 0xc00098a460 0xc00098a500 0xc00098a5a0 0xc00098a640 0xc00098a6e0 0xc00098a780 0xc00098a820 0xc00098a8c0 0xc00098a960 0xc00098aa00 0xc00098aaa0 0xc00098ab40 0xc00098bea0 0xc00098bf40 0xc000998000 0xc000998320] [0xc00098a960 0xc00098ab40 0xc00098a8c0 0xc00098a460 0xc000998320 0xc00098a140 0xc00098bea0 0xc00098a280 0xc00098aaa0 0xc00098aa00 0xc00098a5a0 0xc00098a500 0xc00098a320 0xc00098a6e0 0xc00098a820 0xc00098a640 0xc00098a1e0 0xc00098a3c0 0xc00098a780 0xc00098bf40 0xc000998000] map[104:0xc000998320 118:0xc00098bf40] [] -1 0 0xc00097c9c0 true 0xa51380 []}
2024-06-11T10:56:24.038665196Z I0611 10:56:24.038618       1 cmd.go:93] (*installerpod.InstallOptions)(0xc0007ff6c0)({
2024-06-11T10:56:24.038665196Z  KubeConfig: (string) "",
2024-06-11T10:56:24.038665196Z  KubeClient: (kubernetes.Interface) <nil>,
2024-06-11T10:56:24.038665196Z  Revision: (string) (len=1) "5",
2024-06-11T10:56:24.038665196Z  NodeName: (string) "",
2024-06-11T10:56:24.038665196Z  Namespace: (string) (len=24) "openshift-kube-apiserver",
2024-06-11T10:56:24.038665196Z  PodConfigMapNamePrefix: (string) (len=18) "kube-apiserver-pod",
2024-06-11T10:56:24.038665196Z  SecretNamePrefixes: ([]string) (len=3 cap=4) {
2024-06-11T10:56:24.038665196Z   (string) (len=11) "etcd-client",
2024-06-11T10:56:24.038665196Z   (string) (len=34) "localhost-recovery-serving-certkey",
2024-06-11T10:56:24.038665196Z   (string) (len=31) "localhost-recovery-client-token"
2024-06-11T10:56:24.038665196Z  },
2024-06-11T10:56:24.038665196Z  OptionalSecretNamePrefixes: ([]string) (len=2 cap=2) {
2024-06-11T10:56:24.038665196Z   (string) (len=17) "encryption-config",
2024-06-11T10:56:24.038665196Z   (string) (len=21) "webhook-authenticator"
2024-06-11T10:56:24.038665196Z  },
2024-06-11T10:56:24.038665196Z  ConfigMapNamePrefixes: ([]string) (len=8 cap=8) {
2024-06-11T10:56:24.038665196Z   (string) (len=18) "kube-apiserver-pod",
2024-06-11T10:56:24.038665196Z   (string) (len=6) "config",
2024-06-11T10:56:24.038665196Z   (string) (len=37) "kube-apiserver-cert-syncer-kubeconfig",
2024-06-11T10:56:24.038665196Z   (string) (len=28) "bound-sa-token-signing-certs",
2024-06-11T10:56:24.038665196Z   (string) (len=15) "etcd-serving-ca",
2024-06-11T10:56:24.038665196Z   (string) (len=18) "kubelet-serving-ca",
2024-06-11T10:56:24.038665196Z   (string) (len=22) "sa-token-signing-certs",
2024-06-11T10:56:24.038665196Z   (string) (len=29) "kube-apiserver-audit-policies"
2024-06-11T10:56:24.038665196Z  },
2024-06-11T10:56:24.038665196Z  OptionalConfigMapNamePrefixes: ([]string) (len=3 cap=4) {
2024-06-11T10:56:24.038665196Z   (string) (len=14) "oauth-metadata",
2024-06-11T10:56:24.038665196Z   (string) (len=12) "cloud-config",
2024-06-11T10:56:24.038665196Z   (string) (len=24) "kube-apiserver-server-ca"
2024-06-11T10:56:24.038665196Z  },
2024-06-11T10:56:24.038665196Z  CertSecretNames: ([]string) (len=10 cap=16) {
2024-06-11T10:56:24.038665196Z   (string) (len=17) "aggregator-client",
2024-06-11T10:56:24.038665196Z   (string) (len=30) "localhost-serving-cert-certkey",
2024-06-11T10:56:24.038665196Z   (string) (len=31) "service-network-serving-certkey",
2024-06-11T10:56:24.038665196Z   (string) (len=37) "external-loadbalancer-serving-certkey",
2024-06-11T10:56:24.038665196Z   (string) (len=37) "internal-loadbalancer-serving-certkey",
2024-06-11T10:56:24.038665196Z   (string) (len=33) "bound-service-account-signing-key",
2024-06-11T10:56:24.038665196Z   (string) (len=40) "control-plane-node-admin-client-cert-key",
2024-06-11T10:56:24.038665196Z   (string) (len=31) "check-endpoints-client-cert-key",
2024-06-11T10:56:24.038665196Z   (string) (len=14) "kubelet-client",
2024-06-11T10:56:24.038665196Z   (string) (len=16) "node-kubeconfigs"
2024-06-11T10:56:24.038665196Z  },
2024-06-11T10:56:24.038665196Z  OptionalCertSecretNamePrefixes: ([]string) (len=11 cap=16) {
2024-06-11T10:56:24.038665196Z   (string) (len=17) "user-serving-cert",
2024-06-11T10:56:24.038665196Z   (string) (len=21) "user-serving-cert-000",
2024-06-11T10:56:24.038665196Z   (string) (len=21) "user-serving-cert-001",
2024-06-11T10:56:24.038665196Z   (string) (len=21) "user-serving-cert-002",
2024-06-11T10:56:24.038665196Z   (string) (len=21) "user-serving-cert-003",
2024-06-11T10:56:24.038665196Z   (string) (len=21) "user-serving-cert-004",
2024-06-11T10:56:24.038665196Z   (string) (len=21) "user-serving-cert-005",
2024-06-11T10:56:24.038665196Z   (string) (len=21) "user-serving-cert-006",
2024-06-11T10:56:24.038665196Z   (string) (len=21) "user-serving-cert-007",
2024-06-11T10:56:24.038665196Z   (string) (len=21) "user-serving-cert-008",
2024-06-11T10:56:24.038665196Z   (string) (len=21) "user-serving-cert-009"
2024-06-11T10:56:24.038665196Z  },
2024-06-11T10:56:24.038665196Z  CertConfigMapNamePrefixes: ([]string) (len=4 cap=4) {
2024-06-11T10:56:24.038665196Z   (string) (len=20) "aggregator-client-ca",
2024-06-11T10:56:24.038665196Z   (string) (len=9) "client-ca",
2024-06-11T10:56:24.038665196Z   (string) (len=29) "control-plane-node-kubeconfig",
2024-06-11T10:56:24.038665196Z   (string) (len=26) "check-endpoints-kubeconfig"
2024-06-11T10:56:24.038665196Z  },
2024-06-11T10:56:24.038665196Z  OptionalCertConfigMapNamePrefixes: ([]string) (len=1 cap=1) {
2024-06-11T10:56:24.038665196Z   (string) (len=17) "trusted-ca-bundle"
2024-06-11T10:56:24.038665196Z  },
2024-06-11T10:56:24.038665196Z  CertDir: (string) (len=57) "/etc/kubernetes/static-pod-resources/kube-apiserver-certs",
2024-06-11T10:56:24.038665196Z  ResourceDir: (string) (len=36) "/etc/kubernetes/static-pod-resources",
2024-06-11T10:56:24.038665196Z  PodManifestDir: (string) (len=25) "/etc/kubernetes/manifests",
2024-06-11T10:56:24.038665196Z  Timeout: (time.Duration) 2m0s,
2024-06-11T10:56:24.038665196Z  StaticPodManifestsLockFile: (string) "",
2024-06-11T10:56:24.038665196Z  PodMutationFns: ([]installerpod.PodMutationFunc) <nil>,
2024-06-11T10:56:24.038665196Z  KubeletVersion: (string) ""
2024-06-11T10:56:24.038665196Z })
2024-06-11T10:56:24.039741100Z I0611 10:56:24.039703       1 cmd.go:410] Getting controller reference for node ci-op-9xx71rvq-1e28e-w667k-master-0
2024-06-11T10:56:24.142095346Z I0611 10:56:24.141994       1 cmd.go:423] Waiting for installer revisions to settle for node ci-op-9xx71rvq-1e28e-w667k-master-0
2024-06-11T10:56:24.147237068Z I0611 10:56:24.147184       1 cmd.go:515] Waiting additional period after revisions have settled for node ci-op-9xx71rvq-1e28e-w667k-master-0
2024-06-11T10:56:54.147857733Z I0611 10:56:54.147780       1 cmd.go:521] Getting installer pods for node ci-op-9xx71rvq-1e28e-w667k-master-0
2024-06-11T10:56:54.155280268Z I0611 10:56:54.155240       1 cmd.go:539] Latest installer revision for node ci-op-9xx71rvq-1e28e-w667k-master-0 is: 5
2024-06-11T10:56:54.155280268Z I0611 10:56:54.155264       1 cmd.go:428] Querying kubelet version for node ci-op-9xx71rvq-1e28e-w667k-master-0
2024-06-11T10:56:54.158986385Z I0611 10:56:54.158949       1 cmd.go:441] Got kubelet version 1.29.5+b2f5b11 on target node ci-op-9xx71rvq-1e28e-w667k-master-0
2024-06-11T10:56:54.158986385Z I0611 10:56:54.158973       1 cmd.go:290] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5" ...
2024-06-11T10:56:54.159257987Z I0611 10:56:54.159211       1 cmd.go:218] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5" ...
2024-06-11T10:56:54.159257987Z I0611 10:56:54.159249       1 cmd.go:226] Getting secrets ...
2024-06-11T10:56:54.162938904Z I0611 10:56:54.162908       1 copy.go:32] Got secret openshift-kube-apiserver/etcd-client-5
2024-06-11T10:56:54.167654126Z I0611 10:56:54.167614       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-client-token-5
2024-06-11T10:56:54.171439844Z I0611 10:56:54.171407       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-serving-certkey-5
2024-06-11T10:56:54.175304262Z I0611 10:56:54.175228       1 copy.go:24] Failed to get secret openshift-kube-apiserver/encryption-config-5: secrets "encryption-config-5" not found
2024-06-11T10:56:54.179509581Z I0611 10:56:54.179448       1 copy.go:32] Got secret openshift-kube-apiserver/webhook-authenticator-5
2024-06-11T10:56:54.179545281Z I0611 10:56:54.179516       1 cmd.go:239] Getting config maps ...
2024-06-11T10:56:54.183343699Z I0611 10:56:54.183299       1 copy.go:60] Got configMap openshift-kube-apiserver/bound-sa-token-signing-certs-5
2024-06-11T10:56:54.187378418Z I0611 10:56:54.187344       1 copy.go:60] Got configMap openshift-kube-apiserver/config-5
2024-06-11T10:56:54.190766034Z I0611 10:56:54.190714       1 copy.go:60] Got configMap openshift-kube-apiserver/etcd-serving-ca-5
2024-06-11T10:56:54.352747690Z I0611 10:56:54.352690       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-audit-policies-5
2024-06-11T10:56:54.552650324Z I0611 10:56:54.552597       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-cert-syncer-kubeconfig-5
2024-06-11T10:56:54.752765958Z I0611 10:56:54.752702       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-pod-5
2024-06-11T10:56:54.954737802Z I0611 10:56:54.954627       1 copy.go:60] Got configMap openshift-kube-apiserver/kubelet-serving-ca-5
2024-06-11T10:56:55.153020728Z I0611 10:56:55.152949       1 copy.go:60] Got configMap openshift-kube-apiserver/sa-token-signing-certs-5
2024-06-11T10:56:55.352319900Z I0611 10:56:55.352223       1 copy.go:60] Got configMap openshift-kube-apiserver/cloud-config-5
2024-06-11T10:56:55.552534665Z I0611 10:56:55.552465       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-server-ca-5
2024-06-11T10:56:55.755426535Z I0611 10:56:55.755336       1 copy.go:52] Failed to get config map openshift-kube-apiserver/oauth-metadata-5: configmaps "oauth-metadata-5" not found
2024-06-11T10:56:55.755568436Z I0611 10:56:55.755542       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/etcd-client" ...
2024-06-11T10:56:55.755839136Z I0611 10:56:55.755805       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/etcd-client/tls.crt" ...
2024-06-11T10:56:55.756140137Z I0611 10:56:55.756107       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/etcd-client/tls.key" ...
2024-06-11T10:56:55.756364238Z I0611 10:56:55.756318       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-client-token" ...
2024-06-11T10:56:55.756501538Z I0611 10:56:55.756472       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-client-token/service-ca.crt" ...
2024-06-11T10:56:55.756699838Z I0611 10:56:55.756670       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-client-token/token" ...
2024-06-11T10:56:55.756876639Z I0611 10:56:55.756848       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-client-token/ca.crt" ...
2024-06-11T10:56:55.757142339Z I0611 10:56:55.757110       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-client-token/namespace" ...
2024-06-11T10:56:55.757349540Z I0611 10:56:55.757320       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-serving-certkey" ...
2024-06-11T10:56:55.757549140Z I0611 10:56:55.757505       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-serving-certkey/tls.crt" ...
2024-06-11T10:56:55.757759141Z I0611 10:56:55.757713       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-serving-certkey/tls.key" ...
2024-06-11T10:56:55.757981341Z I0611 10:56:55.757954       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/webhook-authenticator" ...
2024-06-11T10:56:55.758126642Z I0611 10:56:55.758097       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/webhook-authenticator/kubeConfig" ...
2024-06-11T10:56:55.758342542Z I0611 10:56:55.758309       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/bound-sa-token-signing-certs" ...
2024-06-11T10:56:55.758540343Z I0611 10:56:55.758510       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/bound-sa-token-signing-certs/service-account-001.pub" ...
2024-06-11T10:56:55.758768043Z I0611 10:56:55.758736       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/config" ...
2024-06-11T10:56:55.758930144Z I0611 10:56:55.758897       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/config/config.yaml" ...
2024-06-11T10:56:55.759185244Z I0611 10:56:55.759154       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/etcd-serving-ca" ...
2024-06-11T10:56:55.759342544Z I0611 10:56:55.759315       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/etcd-serving-ca/ca-bundle.crt" ...
2024-06-11T10:56:55.759538845Z I0611 10:56:55.759509       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-audit-policies" ...
2024-06-11T10:56:55.759678945Z I0611 10:56:55.759651       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-audit-policies/policy.yaml" ...
2024-06-11T10:56:55.759888846Z I0611 10:56:55.759858       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-cert-syncer-kubeconfig" ...
2024-06-11T10:56:55.760013646Z I0611 10:56:55.759985       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig" ...
2024-06-11T10:56:55.760245347Z I0611 10:56:55.760215       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-pod" ...
2024-06-11T10:56:55.760395747Z I0611 10:56:55.760367       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-pod/forceRedeploymentReason" ...
2024-06-11T10:56:55.760678348Z I0611 10:56:55.760644       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-pod/pod.yaml" ...
2024-06-11T10:56:55.763084153Z I0611 10:56:55.760853       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-pod/version" ...
2024-06-11T10:56:55.763304854Z I0611 10:56:55.763273       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kubelet-serving-ca" ...
2024-06-11T10:56:55.763518654Z I0611 10:56:55.763488       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kubelet-serving-ca/ca-bundle.crt" ...
2024-06-11T10:56:55.763721555Z I0611 10:56:55.763692       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/sa-token-signing-certs" ...
2024-06-11T10:56:55.763864355Z I0611 10:56:55.763835       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/sa-token-signing-certs/service-account-002.pub" ...
2024-06-11T10:56:55.764087255Z I0611 10:56:55.764028       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/sa-token-signing-certs/service-account-001.pub" ...
2024-06-11T10:56:55.764296556Z I0611 10:56:55.764266       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/cloud-config" ...
2024-06-11T10:56:55.764439056Z I0611 10:56:55.764411       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/cloud-config/cloud.conf" ...
2024-06-11T10:56:55.764668557Z I0611 10:56:55.764639       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-server-ca" ...
2024-06-11T10:56:55.764808657Z I0611 10:56:55.764773       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-server-ca/ca-bundle.crt" ...
2024-06-11T10:56:55.765009558Z I0611 10:56:55.764980       1 cmd.go:218] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs" ...
2024-06-11T10:56:55.765121258Z I0611 10:56:55.765094       1 cmd.go:226] Getting secrets ...
2024-06-11T10:56:55.953527895Z I0611 10:56:55.953468       1 copy.go:32] Got secret openshift-kube-apiserver/aggregator-client
2024-06-11T10:56:56.151949155Z I0611 10:56:56.151888       1 copy.go:32] Got secret openshift-kube-apiserver/bound-service-account-signing-key
2024-06-11T10:56:56.353491523Z I0611 10:56:56.353409       1 copy.go:32] Got secret openshift-kube-apiserver/check-endpoints-client-cert-key
2024-06-11T10:56:56.557969398Z I0611 10:56:56.557894       1 copy.go:32] Got secret openshift-kube-apiserver/control-plane-node-admin-client-cert-key
2024-06-11T10:56:56.752634149Z I0611 10:56:56.752569       1 copy.go:32] Got secret openshift-kube-apiserver/external-loadbalancer-serving-certkey
2024-06-11T10:56:56.951808411Z I0611 10:56:56.951719       1 copy.go:32] Got secret openshift-kube-apiserver/internal-loadbalancer-serving-certkey
2024-06-11T10:56:57.152378077Z I0611 10:56:57.152310       1 copy.go:32] Got secret openshift-kube-apiserver/kubelet-client
2024-06-11T10:56:57.352899142Z I0611 10:56:57.352821       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-serving-cert-certkey
2024-06-11T10:56:57.552876306Z I0611 10:56:57.552819       1 copy.go:32] Got secret openshift-kube-apiserver/node-kubeconfigs
2024-06-11T10:56:57.755274376Z I0611 10:56:57.755192       1 copy.go:32] Got secret openshift-kube-apiserver/service-network-serving-certkey
2024-06-11T10:56:57.951465931Z I0611 10:56:57.951389       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert: secrets "user-serving-cert" not found
2024-06-11T10:56:58.153899801Z I0611 10:56:58.153822       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-000: secrets "user-serving-cert-000" not found
2024-06-11T10:56:58.352948363Z I0611 10:56:58.352818       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-001: secrets "user-serving-cert-001" not found
2024-06-11T10:56:58.551893724Z I0611 10:56:58.551815       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-002: secrets "user-serving-cert-002" not found
2024-06-11T10:56:58.753672693Z I0611 10:56:58.753598       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-003: secrets "user-serving-cert-003" not found
2024-06-11T10:56:58.958278267Z I0611 10:56:58.958204       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-004: secrets "user-serving-cert-004" not found
2024-06-11T10:56:59.152885919Z I0611 10:56:59.152786       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-005: secrets "user-serving-cert-005" not found
2024-06-11T10:56:59.353188684Z I0611 10:56:59.353102       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-006: secrets "user-serving-cert-006" not found
2024-06-11T10:56:59.552405546Z I0611 10:56:59.552343       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-007: secrets "user-serving-cert-007" not found
2024-06-11T10:56:59.753326912Z I0611 10:56:59.753262       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-008: secrets "user-serving-cert-008" not found
2024-06-11T10:56:59.952701275Z I0611 10:56:59.952637       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-009: secrets "user-serving-cert-009" not found
2024-06-11T10:56:59.952701275Z I0611 10:56:59.952665       1 cmd.go:239] Getting config maps ...
2024-06-11T10:57:00.180861204Z I0611 10:57:00.180760       1 copy.go:60] Got configMap openshift-kube-apiserver/aggregator-client-ca
2024-06-11T10:57:00.352603003Z I0611 10:57:00.352546       1 copy.go:60] Got configMap openshift-kube-apiserver/check-endpoints-kubeconfig
2024-06-11T10:57:00.552359466Z I0611 10:57:00.552265       1 copy.go:60] Got configMap openshift-kube-apiserver/client-ca
2024-06-11T10:57:00.753474633Z I0611 10:57:00.753395       1 copy.go:60] Got configMap openshift-kube-apiserver/control-plane-node-kubeconfig
2024-06-11T10:57:00.963013819Z I0611 10:57:00.962944       1 copy.go:60] Got configMap openshift-kube-apiserver/trusted-ca-bundle
2024-06-11T10:57:00.964302222Z I0611 10:57:00.964256       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client" ...
2024-06-11T10:57:00.964347422Z I0611 10:57:00.964305       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.crt" ...
2024-06-11T10:57:00.964694323Z I0611 10:57:00.964628       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.key" ...
2024-06-11T10:57:00.964958724Z I0611 10:57:00.964910       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key" ...
2024-06-11T10:57:00.964999624Z I0611 10:57:00.964950       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.key" ...
2024-06-11T10:57:00.965273624Z I0611 10:57:00.965209       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.pub" ...
2024-06-11T10:57:00.965519225Z I0611 10:57:00.965477       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key" ...
2024-06-11T10:57:00.965551225Z I0611 10:57:00.965511       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.crt" ...
2024-06-11T10:57:00.965727626Z I0611 10:57:00.965679       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.key" ...
2024-06-11T10:57:00.965877726Z I0611 10:57:00.965832       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key" ...
2024-06-11T10:57:00.965877726Z I0611 10:57:00.965866       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.crt" ...
2024-06-11T10:57:00.966115526Z I0611 10:57:00.966070       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.key" ...
2024-06-11T10:57:00.966349827Z I0611 10:57:00.966309       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey" ...
2024-06-11T10:57:00.966349827Z I0611 10:57:00.966341       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.key" ...
2024-06-11T10:57:00.966567327Z I0611 10:57:00.966513       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.crt" ...
2024-06-11T10:57:00.966888928Z I0611 10:57:00.966846       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey" ...
2024-06-11T10:57:00.966933828Z I0611 10:57:00.966893       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.key" ...
2024-06-11T10:57:00.967308529Z I0611 10:57:00.967270       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.crt" ...
2024-06-11T10:57:00.967670730Z I0611 10:57:00.967635       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client" ...
2024-06-11T10:57:00.967771230Z I0611 10:57:00.967742       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.crt" ...
2024-06-11T10:57:00.968067031Z I0611 10:57:00.967989       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.key" ...
2024-06-11T10:57:00.968245531Z I0611 10:57:00.968202       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey" ...
2024-06-11T10:57:00.968245531Z I0611 10:57:00.968234       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.crt" ...
2024-06-11T10:57:00.968456232Z I0611 10:57:00.968405       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.key" ...
2024-06-11T10:57:01.031452478Z I0611 10:57:01.031371       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs" ...
2024-06-11T10:57:01.031452478Z I0611 10:57:01.031439       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost.kubeconfig" ...
2024-06-11T10:57:01.031789579Z I0611 10:57:01.031711       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-ext.kubeconfig" ...
2024-06-11T10:57:01.031924179Z I0611 10:57:01.031864       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-int.kubeconfig" ...
2024-06-11T10:57:01.032095580Z I0611 10:57:01.032026       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost-recovery.kubeconfig" ...
2024-06-11T10:57:01.032252980Z I0611 10:57:01.032226       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey" ...
2024-06-11T10:57:01.032272380Z I0611 10:57:01.032249       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.crt" ...
2024-06-11T10:57:01.032433580Z I0611 10:57:01.032383       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.key" ...
2024-06-11T10:57:01.032683481Z I0611 10:57:01.032646       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca" ...
2024-06-11T10:57:01.032922981Z I0611 10:57:01.032883       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca/ca-bundle.crt" ...
2024-06-11T10:57:01.033242482Z I0611 10:57:01.033187       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig" ...
2024-06-11T10:57:01.033374482Z I0611 10:57:01.033329       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig/kubeconfig" ...
2024-06-11T10:57:01.033536183Z I0611 10:57:01.033498       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca" ...
2024-06-11T10:57:01.033565783Z I0611 10:57:01.033541       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca/ca-bundle.crt" ...
2024-06-11T10:57:01.033885684Z I0611 10:57:01.033848       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig" ...
2024-06-11T10:57:01.034029984Z I0611 10:57:01.033973       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig/kubeconfig" ...
2024-06-11T10:57:01.034243884Z I0611 10:57:01.034210       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle" ...
2024-06-11T10:57:01.034405785Z I0611 10:57:01.034367       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle/ca-bundle.crt" ...
2024-06-11T10:57:01.034670485Z I0611 10:57:01.034642       1 cmd.go:332] Getting pod configmaps/kube-apiserver-pod-5 -n openshift-kube-apiserver
2024-06-11T10:57:01.152229358Z I0611 10:57:01.152176       1 cmd.go:348] Creating directory for static pod manifest "/etc/kubernetes/manifests" ...
2024-06-11T10:57:01.152288658Z I0611 10:57:01.152234       1 cmd.go:376] Writing a pod under "kube-apiserver-pod.yaml" key 
2024-06-11T10:57:01.152288658Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"5"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:7ba197ae2d89cf7ceab51c6f6a8b68df9505128a176b80642977899c52455c68","command":["/usr/bin/timeout","220","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 135s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 135s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 135 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:7ba197ae2d89cf7ceab51c6f6a8b68df9505128a176b80642977899c52455c68","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=135s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"5"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"GOGC","value":"100"}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"timeoutSeconds":10,"periodSeconds":5,"successThreshold":1,"failureThreshold":1},"startupProbe":{"httpGet":{"path":"healthz","port":6443,"scheme":"HTTPS"},"timeoutSeconds":10,"periodSeconds":5,"successThreshold":1,"failureThreshold":30},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:bac0ddaf801035bf3d571daea9916b68407c1e9a58a3864616c1ca14e15e74bb","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:bac0ddaf801035bf3d571daea9916b68407c1e9a58a3864616c1ca14e15e74bb","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:bac0ddaf801035bf3d571daea9916b68407c1e9a58a3864616c1ca14e15e74bb","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:bac0ddaf801035bf3d571daea9916b68407c1e9a58a3864616c1ca14e15e74bb","command":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":135,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
2024-06-11T10:57:01.157406070Z I0611 10:57:01.157323       1 cmd.go:607] Writing pod manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/kube-apiserver-pod.yaml" ...
2024-06-11T10:57:01.157614771Z I0611 10:57:01.157549       1 cmd.go:614] Removed existing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2024-06-11T10:57:01.157614771Z I0611 10:57:01.157574       1 cmd.go:618] Writing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2024-06-11T10:57:01.157614771Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"5"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:7ba197ae2d89cf7ceab51c6f6a8b68df9505128a176b80642977899c52455c68","command":["/usr/bin/timeout","220","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 135s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 135s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 135 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:7ba197ae2d89cf7ceab51c6f6a8b68df9505128a176b80642977899c52455c68","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=135s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"5"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"GOGC","value":"100"}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"timeoutSeconds":10,"periodSeconds":5,"successThreshold":1,"failureThreshold":1},"startupProbe":{"httpGet":{"path":"healthz","port":6443,"scheme":"HTTPS"},"timeoutSeconds":10,"periodSeconds":5,"successThreshold":1,"failureThreshold":30},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:bac0ddaf801035bf3d571daea9916b68407c1e9a58a3864616c1ca14e15e74bb","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:bac0ddaf801035bf3d571daea9916b68407c1e9a58a3864616c1ca14e15e74bb","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:bac0ddaf801035bf3d571daea9916b68407c1e9a58a3864616c1ca14e15e74bb","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:bac0ddaf801035bf3d571daea9916b68407c1e9a58a3864616c1ca14e15e74bb","command":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":135,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
