2024-06-11T10:47:35.051948363Z ++ K8S_NODE=
2024-06-11T10:47:35.051948363Z ++ [[ -n '' ]]
2024-06-11T10:47:35.051948363Z ++ northd_pidfile=/var/run/ovn/ovn-northd.pid
2024-06-11T10:47:35.051948363Z ++ controller_pidfile=/var/run/ovn/ovn-controller.pid
2024-06-11T10:47:35.051948363Z ++ controller_logfile=/var/log/ovn/acl-audit-log.log
2024-06-11T10:47:35.052053465Z ++ vswitch_dbsock=/var/run/openvswitch/db.sock
2024-06-11T10:47:35.052053465Z ++ nbdb_pidfile=/var/run/ovn/ovnnb_db.pid
2024-06-11T10:47:35.052053465Z ++ nbdb_sock=/var/run/ovn/ovnnb_db.sock
2024-06-11T10:47:35.052053465Z ++ nbdb_ctl=/var/run/ovn/ovnnb_db.ctl
2024-06-11T10:47:35.052053465Z ++ sbdb_pidfile=/var/run/ovn/ovnsb_db.pid
2024-06-11T10:47:35.052053465Z ++ sbdb_sock=/var/run/ovn/ovnsb_db.sock
2024-06-11T10:47:35.052053465Z ++ sbdb_ctl=/var/run/ovn/ovnsb_db.ctl
2024-06-11T10:47:35.052976982Z + start-rbac-proxy-node ovn-metrics 9105 29105 /etc/pki/tls/metrics-cert/tls.key /etc/pki/tls/metrics-cert/tls.crt
2024-06-11T10:47:35.052976982Z + local detail=ovn-metrics
2024-06-11T10:47:35.052991783Z + local listen_port=9105
2024-06-11T10:47:35.052991783Z + local upstream_port=29105
2024-06-11T10:47:35.052991783Z + local privkey=/etc/pki/tls/metrics-cert/tls.key
2024-06-11T10:47:35.052991783Z + local clientcert=/etc/pki/tls/metrics-cert/tls.crt
2024-06-11T10:47:35.053000683Z + [[ 5 -ne 5 ]]
2024-06-11T10:47:35.053407391Z ++ date -Iseconds
2024-06-11T10:47:35.055086523Z + echo '2024-06-11T10:47:35+00:00 INFO: waiting for ovn-metrics certs to be mounted'
2024-06-11T10:47:35.055108823Z 2024-06-11T10:47:35+00:00 INFO: waiting for ovn-metrics certs to be mounted
2024-06-11T10:47:35.055128624Z + wait-for-certs ovn-metrics /etc/pki/tls/metrics-cert/tls.key /etc/pki/tls/metrics-cert/tls.crt
2024-06-11T10:47:35.055152124Z + local detail=ovn-metrics
2024-06-11T10:47:35.055152124Z + local privkey=/etc/pki/tls/metrics-cert/tls.key
2024-06-11T10:47:35.055159924Z + local clientcert=/etc/pki/tls/metrics-cert/tls.crt
2024-06-11T10:47:35.055167425Z + [[ 3 -ne 3 ]]
2024-06-11T10:47:35.055167425Z + retries=0
2024-06-11T10:47:35.055550432Z ++ date +%s
2024-06-11T10:47:35.056990260Z + TS=1718102855
2024-06-11T10:47:35.056990260Z + WARN_TS=1718104055
2024-06-11T10:47:35.057027660Z + HAS_LOGGED_INFO=0
2024-06-11T10:47:35.057027660Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:47:35.057409268Z ++ date +%s
2024-06-11T10:47:35.058863396Z + CUR_TS=1718102855
2024-06-11T10:47:35.058863396Z + [[ 1718102855 -gt WARN_TS ]]
2024-06-11T10:47:35.058882296Z + [[ 0 -eq 0 ]]
2024-06-11T10:47:35.059279804Z ++ date -Iseconds
2024-06-11T10:47:35.060640930Z 2024-06-11T10:47:35+00:00 INFO: ovn-metrics certs not mounted. Waiting one hour.
2024-06-11T10:47:35.060667031Z + echo '2024-06-11T10:47:35+00:00 INFO: ovn-metrics certs not mounted. Waiting one hour.'
2024-06-11T10:47:35.060667031Z + HAS_LOGGED_INFO=1
2024-06-11T10:47:35.060667031Z + sleep 5
2024-06-11T10:47:40.062531557Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:47:40.062919464Z ++ date +%s
2024-06-11T10:47:40.064388593Z + CUR_TS=1718102860
2024-06-11T10:47:40.064388593Z + [[ 1718102860 -gt WARN_TS ]]
2024-06-11T10:47:40.064388593Z + [[ 1 -eq 0 ]]
2024-06-11T10:47:40.064422793Z + sleep 5
2024-06-11T10:47:45.066517648Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:47:45.067112860Z ++ date +%s
2024-06-11T10:47:45.068812793Z + CUR_TS=1718102865
2024-06-11T10:47:45.068856593Z + [[ 1718102865 -gt WARN_TS ]]
2024-06-11T10:47:45.068856593Z + [[ 1 -eq 0 ]]
2024-06-11T10:47:45.068856593Z + sleep 5
2024-06-11T10:47:50.070770424Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:47:50.071391436Z ++ date +%s
2024-06-11T10:47:50.073282872Z + CUR_TS=1718102870
2024-06-11T10:47:50.073307473Z + [[ 1718102870 -gt WARN_TS ]]
2024-06-11T10:47:50.073319573Z + [[ 1 -eq 0 ]]
2024-06-11T10:47:50.073331773Z + sleep 5
2024-06-11T10:47:55.075494558Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:47:55.076128371Z ++ date +%s
2024-06-11T10:47:55.077781002Z + CUR_TS=1718102875
2024-06-11T10:47:55.077802503Z + [[ 1718102875 -gt WARN_TS ]]
2024-06-11T10:47:55.077813203Z + [[ 1 -eq 0 ]]
2024-06-11T10:47:55.077823303Z + sleep 5
2024-06-11T10:48:00.080331974Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:48:00.080910085Z ++ date +%s
2024-06-11T10:48:00.082588917Z + CUR_TS=1718102880
2024-06-11T10:48:00.082611518Z + [[ 1718102880 -gt WARN_TS ]]
2024-06-11T10:48:00.082611518Z + [[ 1 -eq 0 ]]
2024-06-11T10:48:00.082627218Z + sleep 5
2024-06-11T10:48:05.084696662Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:48:05.085291274Z ++ date +%s
2024-06-11T10:48:05.086955106Z + CUR_TS=1718102885
2024-06-11T10:48:05.086973206Z + [[ 1718102885 -gt WARN_TS ]]
2024-06-11T10:48:05.086986106Z + [[ 1 -eq 0 ]]
2024-06-11T10:48:05.086998706Z + sleep 5
2024-06-11T10:48:10.088774643Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:48:10.089524758Z ++ date +%s
2024-06-11T10:48:10.091267291Z + CUR_TS=1718102890
2024-06-11T10:48:10.091267291Z + [[ 1718102890 -gt WARN_TS ]]
2024-06-11T10:48:10.091297292Z + [[ 1 -eq 0 ]]
2024-06-11T10:48:10.091297292Z + sleep 5
2024-06-11T10:48:15.093307873Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:48:15.093947886Z ++ date +%s
2024-06-11T10:48:15.095840823Z + CUR_TS=1718102895
2024-06-11T10:48:15.095867424Z + [[ 1718102895 -gt WARN_TS ]]
2024-06-11T10:48:15.095879524Z + [[ 1 -eq 0 ]]
2024-06-11T10:48:15.095891124Z + sleep 5
2024-06-11T10:48:20.097883375Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:48:20.098410685Z ++ date +%s
2024-06-11T10:48:20.100204419Z + CUR_TS=1718102900
2024-06-11T10:48:20.100223119Z + [[ 1718102900 -gt WARN_TS ]]
2024-06-11T10:48:20.100246020Z + [[ 1 -eq 0 ]]
2024-06-11T10:48:20.100253920Z + sleep 5
2024-06-11T10:48:25.101921035Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:48:25.102491346Z ++ date +%s
2024-06-11T10:48:25.104311981Z + CUR_TS=1718102905
2024-06-11T10:48:25.104311981Z + [[ 1718102905 -gt WARN_TS ]]
2024-06-11T10:48:25.104348682Z + [[ 1 -eq 0 ]]
2024-06-11T10:48:25.104348682Z + sleep 5
2024-06-11T10:48:30.106024189Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:48:30.106569399Z ++ date +%s
2024-06-11T10:48:30.108221531Z + CUR_TS=1718102910
2024-06-11T10:48:30.108244931Z + [[ 1718102910 -gt WARN_TS ]]
2024-06-11T10:48:30.108244931Z + [[ 1 -eq 0 ]]
2024-06-11T10:48:30.108244931Z + sleep 5
2024-06-11T10:48:35.109926412Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:48:35.110490822Z ++ date +%s
2024-06-11T10:48:35.111973751Z + CUR_TS=1718102915
2024-06-11T10:48:35.111997151Z + [[ 1718102915 -gt WARN_TS ]]
2024-06-11T10:48:35.112023852Z + [[ 1 -eq 0 ]]
2024-06-11T10:48:35.112023852Z + sleep 5
2024-06-11T10:48:40.113774453Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:48:40.114474866Z ++ date +%s
2024-06-11T10:48:40.116161698Z + CUR_TS=1718102920
2024-06-11T10:48:40.116161698Z + [[ 1718102920 -gt WARN_TS ]]
2024-06-11T10:48:40.116188499Z + [[ 1 -eq 0 ]]
2024-06-11T10:48:40.116188499Z + sleep 5
2024-06-11T10:48:45.118147888Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:48:45.118715699Z ++ date +%s
2024-06-11T10:48:45.120581735Z + CUR_TS=1718102925
2024-06-11T10:48:45.120581735Z + [[ 1718102925 -gt WARN_TS ]]
2024-06-11T10:48:45.120581735Z + [[ 1 -eq 0 ]]
2024-06-11T10:48:45.120613835Z + sleep 5
2024-06-11T10:48:50.122680200Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:48:50.123200810Z ++ date +%s
2024-06-11T10:48:50.124769740Z + CUR_TS=1718102930
2024-06-11T10:48:50.124769740Z + [[ 1718102930 -gt WARN_TS ]]
2024-06-11T10:48:50.124769740Z + [[ 1 -eq 0 ]]
2024-06-11T10:48:50.124800941Z + sleep 5
2024-06-11T10:48:55.126705950Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:48:55.127353662Z ++ date +%s
2024-06-11T10:48:55.129137196Z + CUR_TS=1718102935
2024-06-11T10:48:55.129163497Z + [[ 1718102935 -gt WARN_TS ]]
2024-06-11T10:48:55.129163497Z + [[ 1 -eq 0 ]]
2024-06-11T10:48:55.129177697Z + sleep 5
2024-06-11T10:49:00.131340680Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:49:00.132030993Z ++ date +%s
2024-06-11T10:49:00.133837927Z + CUR_TS=1718102940
2024-06-11T10:49:00.133861228Z + [[ 1718102940 -gt WARN_TS ]]
2024-06-11T10:49:00.133873628Z + [[ 1 -eq 0 ]]
2024-06-11T10:49:00.133885828Z + sleep 5
2024-06-11T10:49:05.135834728Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:49:05.136290137Z ++ date +%s
2024-06-11T10:49:05.137812766Z + CUR_TS=1718102945
2024-06-11T10:49:05.137838666Z + [[ 1718102945 -gt WARN_TS ]]
2024-06-11T10:49:05.137838666Z + [[ 1 -eq 0 ]]
2024-06-11T10:49:05.137850367Z + sleep 5
2024-06-11T10:49:10.139699928Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:49:10.140186337Z ++ date +%s
2024-06-11T10:49:10.141776168Z + CUR_TS=1718102950
2024-06-11T10:49:10.141776168Z + [[ 1718102950 -gt WARN_TS ]]
2024-06-11T10:49:10.141797168Z + [[ 1 -eq 0 ]]
2024-06-11T10:49:10.141807768Z + sleep 5
2024-06-11T10:49:15.143571586Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.key ]]
2024-06-11T10:49:15.143571586Z + [[ ! -f /etc/pki/tls/metrics-cert/tls.crt ]]
2024-06-11T10:49:15.144138697Z ++ date -Iseconds
2024-06-11T10:49:15.145917931Z 2024-06-11T10:49:15+00:00 INFO: ovn-metrics certs mounted, starting kube-rbac-proxy
2024-06-11T10:49:15.145943732Z + echo '2024-06-11T10:49:15+00:00 INFO: ovn-metrics certs mounted, starting kube-rbac-proxy'
2024-06-11T10:49:15.145943732Z + exec /usr/bin/kube-rbac-proxy --logtostderr --secure-listen-address=:9105 --tls-cipher-suites=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 --upstream=http://127.0.0.1:29105/ --tls-private-key-file=/etc/pki/tls/metrics-cert/tls.key --tls-cert-file=/etc/pki/tls/metrics-cert/tls.crt
2024-06-11T10:49:15.176561015Z W0611 10:49:15.176470    5273 deprecated.go:66] 
2024-06-11T10:49:15.176561015Z ==== Removed Flag Warning ======================
2024-06-11T10:49:15.176561015Z 
2024-06-11T10:49:15.176561015Z logtostderr is removed in the k8s upstream and has no effect any more.
2024-06-11T10:49:15.176561015Z 
2024-06-11T10:49:15.176561015Z ===============================================
2024-06-11T10:49:15.176561015Z 		
2024-06-11T10:49:15.176909822Z I0611 10:49:15.176891    5273 kube-rbac-proxy.go:233] Valid token audiences: 
2024-06-11T10:49:15.176944722Z I0611 10:49:15.176931    5273 kube-rbac-proxy.go:347] Reading certificate files
2024-06-11T10:49:15.177388931Z I0611 10:49:15.177363    5273 kube-rbac-proxy.go:395] Starting TCP socket on :9105
2024-06-11T10:49:15.177673036Z I0611 10:49:15.177657    5273 kube-rbac-proxy.go:402] Listening securely on :9105
