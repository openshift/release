# Jira Agent Schedule Update Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Update the HyperShift Jira Agent periodic job to run weekly on Mondays at 8:30 AM UTC instead of daily at 9:00 AM UTC.

**Architecture:** Single-file configuration change in the ci-operator config, followed by regeneration of Prow job files via `make update`.

**Tech Stack:** YAML configuration, Prow CI, cron syntax

---

## Task 1: Update the cron schedule in CI config

**Files:**
- Modify: `ci-operator/config/openshift/hypershift/openshift-hypershift-main.yaml:485`

**Step 1: Review current configuration**

Current cron configuration at line 485:
```yaml
- as: periodic-jira-agent
  cron: 0 9 * * *
  steps:
    env:
      JIRA_AGENT_MAX_ISSUES: "1"
    workflow: hypershift-jira-agent
```

The current `0 9 * * *` means "at 9:00 AM UTC every day".

**Step 2: Update cron to weekly Monday at 8:30 AM UTC**

Change the cron expression from `0 9 * * *` to `30 8 * * 1`:
- `30` = minute 30
- `8` = hour 8 (8:00 AM UTC)
- `*` = any day of month
- `*` = any month
- `1` = Monday (day of week, 0=Sunday, 1=Monday)

```yaml
- as: periodic-jira-agent
  cron: 30 8 * * 1
  steps:
    env:
      JIRA_AGENT_MAX_ISSUES: "1"
    workflow: hypershift-jira-agent
```

**Step 3: Verify the change is correct**

Visual confirmation that line 485 now shows `cron: 30 8 * * 1`.

---

## Task 2: Regenerate Prow job configurations

**Files:**
- Regenerated: `ci-operator/jobs/openshift/hypershift/openshift-hypershift-main-periodics.yaml`

**Step 1: Run make update**

Run: `make update`

This command will:
1. Validate the config changes
2. Regenerate the Prow job YAML in `ci-operator/jobs/`
3. Update any metadata files

**Step 2: Verify the generated job file**

Read `ci-operator/jobs/openshift/hypershift/openshift-hypershift-main-periodics.yaml` and confirm the `periodic-ci-openshift-hypershift-main-periodic-jira-agent` job now has `cron: 30 8 * * 1` (around line 152).

---

## Task 3: Update the PR description

**Files:**
- None (PR metadata only)

**Step 1: Draft PR description**

Create a PR with the following description:

```markdown
## Summary
- Updates the HyperShift Jira Agent periodic job schedule from daily (9:00 AM UTC) to weekly (Mondays at 8:30 AM UTC)

## Test plan
- [ ] Verify CI config syntax is valid (`make update` succeeds)
- [ ] Confirm generated Prow job has correct cron schedule
- [ ] Job will run on next Monday at 8:30 AM UTC after merge

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)
```

**Step 2: Commit the changes**

```bash
git add ci-operator/config/openshift/hypershift/openshift-hypershift-main.yaml
git add ci-operator/jobs/openshift/hypershift/openshift-hypershift-main-periodics.yaml
git commit -m "feat(hypershift): update jira-agent to run weekly on Mondays at 8:30 UTC

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"
```

**Step 3: Create the PR**

```bash
gh pr create --title "Update HyperShift Jira Agent schedule to weekly Monday 8:30 UTC" --body "$(cat <<'EOF'
## Summary
- Updates the HyperShift Jira Agent periodic job schedule from daily (9:00 AM UTC) to weekly (Mondays at 8:30 AM UTC)

## Test plan
- [ ] Verify CI config syntax is valid (`make update` succeeds)
- [ ] Confirm generated Prow job has correct cron schedule
- [ ] Job will run on next Monday at 8:30 AM UTC after merge

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)
EOF
)"
```

---

## Summary of Changes

| File | Change |
|------|--------|
| `ci-operator/config/openshift/hypershift/openshift-hypershift-main.yaml` | Change `cron: 0 9 * * *` to `cron: 30 8 * * 1` |
| `ci-operator/jobs/openshift/hypershift/openshift-hypershift-main-periodics.yaml` | Auto-regenerated by `make update` |
